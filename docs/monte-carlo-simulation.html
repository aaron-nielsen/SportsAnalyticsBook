<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Monte Carlo Simulation | Sports Analytics</title>
  <meta name="description" content="Chapter 3 Monte Carlo Simulation | Sports Analytics Notes" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Monte Carlo Simulation | Sports Analytics" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://aaron-nielsen.github.io/SportsAnalyticsBook/images/csu.png" />
  <meta property="og:description" content="Chapter 3 Monte Carlo Simulation | Sports Analytics Notes" />
  <meta name="github-repo" content="aaron-nielsen.github.io/SportsAnalyticsBook/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Monte Carlo Simulation | Sports Analytics" />
  
  <meta name="twitter:description" content="Chapter 3 Monte Carlo Simulation | Sports Analytics Notes" />
  <meta name="twitter:image" content="https://aaron-nielsen.github.io/SportsAnalyticsBook/images/csu.png" />

<meta name="author" content="Aaron Nielsen, Department of Statistics, Colorado State University" />


<meta name="date" content="2022-07-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="probability.html"/>
<link rel="next" href="statistical-inference.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Sports Analytics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="current-tasks.html"><a href="current-tasks.html"><i class="fa fa-check"></i>Current Tasks</a></li>
<li class="chapter" data-level="1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>1</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="1.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#getting-started-with-r"><i class="fa fa-check"></i><b>1.1</b> Getting Started With R</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#installing-r"><i class="fa fa-check"></i><b>1.1.1</b> Installing R</a></li>
<li class="chapter" data-level="1.1.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#some-r-basics"><i class="fa fa-check"></i><b>1.1.2</b> Some R Basics</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#descriptive-statistics"><i class="fa fa-check"></i><b>1.2</b> Descriptive Statistics</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#definitions"><i class="fa fa-check"></i><b>1.2.1</b> Definitions</a></li>
<li class="chapter" data-level="1.2.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#descriptive-statistics-1"><i class="fa fa-check"></i><b>1.2.2</b> Descriptive Statistics</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#visualizations"><i class="fa fa-check"></i><b>1.3</b> Visualizations</a></li>
<li class="chapter" data-level="1.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#baseball"><i class="fa fa-check"></i><b>1.4</b> Baseball</a></li>
<li class="chapter" data-level="1.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#football"><i class="fa fa-check"></i><b>1.5</b> Football</a></li>
<li class="chapter" data-level="1.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basketball"><i class="fa fa-check"></i><b>1.6</b> Basketball</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-basketball-statistics"><i class="fa fa-check"></i><b>1.6.1</b> Basic Basketball Statistics</a></li>
<li class="chapter" data-level="1.6.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#advanced-basketball-statistics"><i class="fa fa-check"></i><b>1.6.2</b> Advanced Basketball Statistics</a></li>
<li class="chapter" data-level="1.6.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#four-factors"><i class="fa fa-check"></i><b>1.6.3</b> Four Factors</a></li>
<li class="chapter" data-level="1.6.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basketballanalyzer-four-factors"><i class="fa fa-check"></i><b>1.6.4</b> BasketballAnalyzeR Four Factors</a></li>
<li class="chapter" data-level="1.6.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basketballanalyzer-shot-charts"><i class="fa fa-check"></i><b>1.6.5</b> BasketballAnalyzeR Shot Charts</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#soccer"><i class="fa fa-check"></i><b>1.7</b> Soccer</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#bar-plot"><i class="fa fa-check"></i><b>1.7.1</b> Bar Plot</a></li>
<li class="chapter" data-level="1.7.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#scatter-plot"><i class="fa fa-check"></i><b>1.7.2</b> Scatter Plot</a></li>
<li class="chapter" data-level="1.7.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#density-ridges-plot"><i class="fa fa-check"></i><b>1.7.3</b> Density Ridges Plot</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#hockey"><i class="fa fa-check"></i><b>1.8</b> Hockey</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-hockey-statistics"><i class="fa fa-check"></i><b>1.8.1</b> Basic Hockey Statistics</a></li>
<li class="chapter" data-level="1.8.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#advanced-hockey-statistics"><i class="fa fa-check"></i><b>1.8.2</b> Advanced Hockey Statistics</a></li>
<li class="chapter" data-level="1.8.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#actual-vs.-expected-goals"><i class="fa fa-check"></i><b>1.8.3</b> Actual vs. Expected Goals</a></li>
<li class="chapter" data-level="1.8.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#goalie-statistics"><i class="fa fa-check"></i><b>1.8.4</b> Goalie Statistics</a></li>
<li class="chapter" data-level="1.8.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#correlation-plots"><i class="fa fa-check"></i><b>1.8.5</b> Correlation Plots</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#volleyball"><i class="fa fa-check"></i><b>1.9</b> Volleyball</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#scatter-plot-1"><i class="fa fa-check"></i><b>1.9.1</b> Scatter Plot</a></li>
<li class="chapter" data-level="1.9.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#box-plot"><i class="fa fa-check"></i><b>1.9.2</b> Box Plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="probability.html"><a href="probability.html"><i class="fa fa-check"></i><b>2</b> Probability</a>
<ul>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#chapter-preview"><i class="fa fa-check"></i>Chapter Preview</a></li>
<li class="chapter" data-level="2.1" data-path="probability.html"><a href="probability.html#definitions-1"><i class="fa fa-check"></i><b>2.1</b> Definitions</a></li>
<li class="chapter" data-level="2.2" data-path="probability.html"><a href="probability.html#set-theory"><i class="fa fa-check"></i><b>2.2</b> Set Theory</a></li>
<li class="chapter" data-level="2.3" data-path="probability.html"><a href="probability.html#axioms-properties-and-laws"><i class="fa fa-check"></i><b>2.3</b> Axioms, Properties, and Laws</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="probability.html"><a href="probability.html#axioms-of-probability"><i class="fa fa-check"></i><b>2.3.1</b> Axioms of Probability</a></li>
<li class="chapter" data-level="2.3.2" data-path="probability.html"><a href="probability.html#properties-of-probability"><i class="fa fa-check"></i><b>2.3.2</b> Properties of Probability</a></li>
<li class="chapter" data-level="2.3.3" data-path="probability.html"><a href="probability.html#laws-of-probability"><i class="fa fa-check"></i><b>2.3.3</b> Laws of Probability</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="probability.html"><a href="probability.html#combinatorics"><i class="fa fa-check"></i><b>2.4</b> Combinatorics</a></li>
<li class="chapter" data-level="2.5" data-path="probability.html"><a href="probability.html#odds-and-gambling"><i class="fa fa-check"></i><b>2.5</b> Odds and Gambling</a></li>
<li class="chapter" data-level="2.6" data-path="probability.html"><a href="probability.html#random-variables"><i class="fa fa-check"></i><b>2.6</b> Random Variables</a></li>
<li class="chapter" data-level="2.7" data-path="probability.html"><a href="probability.html#common-random-variables"><i class="fa fa-check"></i><b>2.7</b> Common Random Variables</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="probability.html"><a href="probability.html#binomial-rvs"><i class="fa fa-check"></i><b>2.7.1</b> Binomial RVs</a></li>
<li class="chapter" data-level="2.7.2" data-path="probability.html"><a href="probability.html#geometric-rvs"><i class="fa fa-check"></i><b>2.7.2</b> Geometric RVs</a></li>
<li class="chapter" data-level="2.7.3" data-path="probability.html"><a href="probability.html#poisson-rvs"><i class="fa fa-check"></i><b>2.7.3</b> Poisson RVs</a></li>
<li class="chapter" data-level="2.7.4" data-path="probability.html"><a href="probability.html#negative-binomial-rvs"><i class="fa fa-check"></i><b>2.7.4</b> Negative Binomial RVs</a></li>
<li class="chapter" data-level="2.7.5" data-path="probability.html"><a href="probability.html#normal-rvs"><i class="fa fa-check"></i><b>2.7.5</b> Normal RVs</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="probability.html"><a href="probability.html#extra-stuff"><i class="fa fa-check"></i><b>2.8</b> Extra Stuff</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="probability.html"><a href="probability.html#sets-and-conditional-probability"><i class="fa fa-check"></i><b>2.8.1</b> Sets and Conditional Probability</a></li>
<li class="chapter" data-level="2.8.2" data-path="probability.html"><a href="probability.html#binomials-and-multinomials"><i class="fa fa-check"></i><b>2.8.2</b> Binomials and Multinomials</a></li>
<li class="chapter" data-level="2.8.3" data-path="probability.html"><a href="probability.html#expectation---baseball"><i class="fa fa-check"></i><b>2.8.3</b> Expectation - Baseball</a></li>
<li class="chapter" data-level="2.8.4" data-path="probability.html"><a href="probability.html#basketball-scenario"><i class="fa fa-check"></i><b>2.8.4</b> Basketball Scenario</a></li>
<li class="chapter" data-level="2.8.5" data-path="probability.html"><a href="probability.html#multiple-probability-distributions---basketball"><i class="fa fa-check"></i><b>2.8.5</b> Multiple Probability Distributions - Basketball</a></li>
<li class="chapter" data-level="2.8.6" data-path="probability.html"><a href="probability.html#law-of-total-probability---hockey"><i class="fa fa-check"></i><b>2.8.6</b> Law of Total Probability - Hockey</a></li>
<li class="chapter" data-level="2.8.7" data-path="probability.html"><a href="probability.html#law-of-total-probability---baseball"><i class="fa fa-check"></i><b>2.8.7</b> Law of Total Probability - Baseball</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html"><i class="fa fa-check"></i><b>3</b> Monte Carlo Simulation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#basics"><i class="fa fa-check"></i><b>3.1</b> Basics</a></li>
<li class="chapter" data-level="3.2" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#estimating-probabilities"><i class="fa fa-check"></i><b>3.2</b> Estimating Probabilities</a></li>
<li class="chapter" data-level="3.3" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#a-few-reminderstips-for-simulation-and-a-basic-example"><i class="fa fa-check"></i><b>3.3</b> A few reminders/tips for simulation, and a basic example</a></li>
<li class="chapter" data-level="3.4" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#streak-simulation---basketball"><i class="fa fa-check"></i><b>3.4</b> Streak Simulation - Basketball</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="statistical-inference.html"><a href="statistical-inference.html"><i class="fa fa-check"></i><b>4</b> Statistical Inference</a>
<ul>
<li class="chapter" data-level="4.1" data-path="statistical-inference.html"><a href="statistical-inference.html#one-sample-and-two-sample-t-tests-and-confidence-intervals"><i class="fa fa-check"></i><b>4.1</b> One Sample and Two Sample t-tests and confidence intervals</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="correlation.html"><a href="correlation.html"><i class="fa fa-check"></i><b>5</b> Correlation</a></li>
<li class="chapter" data-level="6" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>6</b> Linear Regression</a></li>
<li class="chapter" data-level="7" data-path="data-scraping.html"><a href="data-scraping.html"><i class="fa fa-check"></i><b>7</b> Data Scraping</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-scraping.html"><a href="data-scraping.html#wnba-scraping"><i class="fa fa-check"></i><b>7.1</b> wnba scraping</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html"><i class="fa fa-check"></i><b>8</b> Principal Component Analysis</a></li>
<li class="chapter" data-level="9" data-path="clustering.html"><a href="clustering.html"><i class="fa fa-check"></i><b>9</b> Clustering</a></li>
<li class="chapter" data-level="10" data-path="classification.html"><a href="classification.html"><i class="fa fa-check"></i><b>10</b> Classification</a></li>
<li class="chapter" data-level="11" data-path="decision-trees.html"><a href="decision-trees.html"><i class="fa fa-check"></i><b>11</b> Decision Trees</a>
<ul>
<li class="chapter" data-level="11.1" data-path="decision-trees.html"><a href="decision-trees.html#random-forests"><i class="fa fa-check"></i><b>11.1</b> Random Forests</a></li>
<li class="chapter" data-level="11.2" data-path="decision-trees.html"><a href="decision-trees.html#gradient-boosting"><i class="fa fa-check"></i><b>11.2</b> Gradient Boosting</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="non-parametric-statistics.html"><a href="non-parametric-statistics.html"><i class="fa fa-check"></i><b>12</b> Non-parametric Statistics</a></li>
<li class="chapter" data-level="13" data-path="baseball-1.html"><a href="baseball-1.html"><i class="fa fa-check"></i><b>13</b> Baseball</a></li>
<li class="chapter" data-level="14" data-path="football-1.html"><a href="football-1.html"><i class="fa fa-check"></i><b>14</b> Football</a></li>
<li class="chapter" data-level="15" data-path="basketball-1.html"><a href="basketball-1.html"><i class="fa fa-check"></i><b>15</b> Basketball</a></li>
<li class="chapter" data-level="16" data-path="soccer-1.html"><a href="soccer-1.html"><i class="fa fa-check"></i><b>16</b> Soccer</a></li>
<li class="chapter" data-level="17" data-path="hockey-1.html"><a href="hockey-1.html"><i class="fa fa-check"></i><b>17</b> Hockey</a></li>
<li class="chapter" data-level="18" data-path="volleyball-1.html"><a href="volleyball-1.html"><i class="fa fa-check"></i><b>18</b> Volleyball</a>
<ul>
<li class="chapter" data-level="18.1" data-path="volleyball-1.html"><a href="volleyball-1.html#resources"><i class="fa fa-check"></i><b>18.1</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="other-sports.html"><a href="other-sports.html"><i class="fa fa-check"></i><b>19</b> Other Sports</a></li>
<li class="chapter" data-level="20" data-path="text-solutions.html"><a href="text-solutions.html"><i class="fa fa-check"></i><b>20</b> Text solutions</a>
<ul>
<li class="chapter" data-level="20.1" data-path="text-solutions.html"><a href="text-solutions.html#chapter-1"><i class="fa fa-check"></i><b>20.1</b> Chapter 1</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="aarons-stuff.html"><a href="aarons-stuff.html"><i class="fa fa-check"></i><b>21</b> Aaron’s stuff</a>
<ul>
<li class="chapter" data-level="21.1" data-path="aarons-stuff.html"><a href="aarons-stuff.html#notes-for-chapter-2-probability"><i class="fa fa-check"></i><b>21.1</b> Notes for Chapter 2 (Probability)</a></li>
<li class="chapter" data-level="21.2" data-path="aarons-stuff.html"><a href="aarons-stuff.html#suggested-readings"><i class="fa fa-check"></i><b>21.2</b> Suggested Readings</a>
<ul>
<li class="chapter" data-level="21.2.1" data-path="aarons-stuff.html"><a href="aarons-stuff.html#moneyball"><i class="fa fa-check"></i><b>21.2.1</b> Moneyball</a></li>
<li class="chapter" data-level="21.2.2" data-path="aarons-stuff.html"><a href="aarons-stuff.html#future-value"><i class="fa fa-check"></i><b>21.2.2</b> Future Value</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="aarons-stuff.html"><a href="aarons-stuff.html#notes-for-chapter-4-simulation"><i class="fa fa-check"></i><b>21.3</b> Notes for Chapter 4 (Simulation)</a>
<ul>
<li class="chapter" data-level="21.3.1" data-path="aarons-stuff.html"><a href="aarons-stuff.html#baseball-simulation-example"><i class="fa fa-check"></i><b>21.3.1</b> Baseball Simulation Example</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Sports Analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="monte-carlo-simulation" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Monte Carlo Simulation<a href="monte-carlo-simulation.html#monte-carlo-simulation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="basics" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Basics<a href="monte-carlo-simulation.html#basics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Monte Carlo Simulation is a collection of computer-driven, computational algorithms that use repeated random sampling to calculate estimates. The basic steps for such a simulation are as follows:</p>
<ul>
<li><p>Initialize vectors and variables</p></li>
<li><p>Run a simulation and calculate the estimate of interest</p></li>
<li><p>Save the estimate</p></li>
<li><p>Run the simulation “n” times</p></li>
<li><p>Analyze the estimates from the “n” simulations<br />
</p></li>
</ul>
<p>One function that will be particularly useful for simulation is <code>set.seed()</code>.</p>
<p><code>set.seed()</code> allows us to replicate any simulation by giving the initial seed for the simulation. The actual number that is “seeded” is not particularly important though if you want to replicate the same simulations, you will want to re-use this number.</p>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-91" class="example"><strong>Example 3.1  </strong></span>Simulate 10 overtime coin tosses with and without using <code>set.seed()</code> and compare the results</p>
</div>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="monte-carlo-simulation.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample 1</span></span>
<span id="cb157-2"><a href="monte-carlo-simulation.html#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;H&quot;</span>, <span class="st">&quot;T&quot;</span>), <span class="at">size =</span> <span class="dv">10</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>), <span class="at">replace =</span> T)</span></code></pre></div>
<pre><code>##  [1] &quot;T&quot; &quot;H&quot; &quot;T&quot; &quot;T&quot; &quot;T&quot; &quot;H&quot; &quot;H&quot; &quot;T&quot; &quot;H&quot; &quot;H&quot;</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="monte-carlo-simulation.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample 2</span></span>
<span id="cb159-2"><a href="monte-carlo-simulation.html#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;H&quot;</span>, <span class="st">&quot;T&quot;</span>), <span class="at">size =</span> <span class="dv">10</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>), <span class="at">replace =</span> T)</span></code></pre></div>
<pre><code>##  [1] &quot;H&quot; &quot;T&quot; &quot;T&quot; &quot;T&quot; &quot;H&quot; &quot;T&quot; &quot;T&quot; &quot;T&quot; &quot;T&quot; &quot;H&quot;</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="monte-carlo-simulation.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample 3</span></span>
<span id="cb161-2"><a href="monte-carlo-simulation.html#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2020</span>)</span>
<span id="cb161-3"><a href="monte-carlo-simulation.html#cb161-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;H&quot;</span>, <span class="st">&quot;T&quot;</span>), <span class="at">size =</span> <span class="dv">10</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>), <span class="at">replace =</span> T)</span></code></pre></div>
<pre><code>##  [1] &quot;H&quot; &quot;T&quot; &quot;H&quot; &quot;T&quot; &quot;T&quot; &quot;T&quot; &quot;T&quot; &quot;T&quot; &quot;T&quot; &quot;H&quot;</code></pre>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="monte-carlo-simulation.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample 4</span></span>
<span id="cb163-2"><a href="monte-carlo-simulation.html#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2020</span>)</span>
<span id="cb163-3"><a href="monte-carlo-simulation.html#cb163-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;H&quot;</span>, <span class="st">&quot;T&quot;</span>), <span class="at">size =</span> <span class="dv">10</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>), <span class="at">replace =</span> T)</span></code></pre></div>
<pre><code>##  [1] &quot;H&quot; &quot;T&quot; &quot;H&quot; &quot;T&quot; &quot;T&quot; &quot;T&quot; &quot;T&quot; &quot;T&quot; &quot;T&quot; &quot;H&quot;</code></pre>
<p>Simulation can be very helpful when you want to estimate quantities that are not easily solved using analytical methods like formulas.</p>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-92" class="example"><strong>Example 3.2  </strong></span>Shaquille O’Neal has a career free throw percentage of 52.7%. Suppose that Shaq takes 10 free throw shots. What is the probability that he makes all 10 shots?</p>
</div>
<p>In this case, we can calculate the exact probability of interest using binomial random variable.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="monte-carlo-simulation.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbinom</span>(<span class="at">x =</span> <span class="dv">10</span>, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">prob =</span> <span class="fl">0.527</span>)</span></code></pre></div>
<pre><code>## [1] 0.001652366</code></pre>
<p>In more complicated simulations, there may not be an easy formula to use to calculate the value of interest. In these situations, simulation can be very helpful in estimating quantities.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="monte-carlo-simulation.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2020</span>)</span>
<span id="cb167-2"><a href="monte-carlo-simulation.html#cb167-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-3"><a href="monte-carlo-simulation.html#cb167-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of Simulations</span></span>
<span id="cb167-4"><a href="monte-carlo-simulation.html#cb167-4" aria-hidden="true" tabindex="-1"></a>n.sims <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb167-5"><a href="monte-carlo-simulation.html#cb167-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-6"><a href="monte-carlo-simulation.html#cb167-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize FT variable with 10000 zeros</span></span>
<span id="cb167-7"><a href="monte-carlo-simulation.html#cb167-7" aria-hidden="true" tabindex="-1"></a>FT <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>, n.sims)</span>
<span id="cb167-8"><a href="monte-carlo-simulation.html#cb167-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-9"><a href="monte-carlo-simulation.html#cb167-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n.sims) {</span>
<span id="cb167-10"><a href="monte-carlo-simulation.html#cb167-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simulate 10 free throws</span></span>
<span id="cb167-11"><a href="monte-carlo-simulation.html#cb167-11" aria-hidden="true" tabindex="-1"></a>    temp <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">size =</span> <span class="dv">10</span>, <span class="at">replace =</span> T, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.473</span>, <span class="fl">0.527</span>))</span>
<span id="cb167-12"><a href="monte-carlo-simulation.html#cb167-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-13"><a href="monte-carlo-simulation.html#cb167-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Count the number of free throws made and store them in FT</span></span>
<span id="cb167-14"><a href="monte-carlo-simulation.html#cb167-14" aria-hidden="true" tabindex="-1"></a>    FT[i] <span class="ot">&lt;-</span> <span class="fu">sum</span>(temp)</span>
<span id="cb167-15"><a href="monte-carlo-simulation.html#cb167-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb167-16"><a href="monte-carlo-simulation.html#cb167-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-17"><a href="monte-carlo-simulation.html#cb167-17" aria-hidden="true" tabindex="-1"></a>FT <span class="sc">%&gt;%</span></span>
<span id="cb167-18"><a href="monte-carlo-simulation.html#cb167-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb167-19"><a href="monte-carlo-simulation.html#cb167-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> FT)) <span class="sc">+</span> <span class="fu">geom_bar</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;Number of free throws made out of 10&quot;</span>) <span class="sc">+</span></span>
<span id="cb167-20"><a href="monte-carlo-simulation.html#cb167-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>))</span></code></pre></div>
<p><img src="series_files/figure-html/unnamed-chunk-52-1.png" width="672" /></p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="monte-carlo-simulation.html#cb168-1" aria-hidden="true" tabindex="-1"></a>prob10 <span class="ot">&lt;-</span> <span class="fu">sum</span>(FT <span class="sc">==</span> <span class="dv">10</span>)<span class="sc">/</span>n.sims</span>
<span id="cb168-2"><a href="monte-carlo-simulation.html#cb168-2" aria-hidden="true" tabindex="-1"></a>prob10</span></code></pre></div>
<pre><code>## [1] 0.0023</code></pre>
<p>The estimated probability that Shaq goes 10-for-10 in free throw attempts based on his career average is 0.0023.</p>
<p>If we run the simulation again with a different seed, we will get another estimate (0.0019).</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="monte-carlo-simulation.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb170-2"><a href="monte-carlo-simulation.html#cb170-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-3"><a href="monte-carlo-simulation.html#cb170-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of Simulations</span></span>
<span id="cb170-4"><a href="monte-carlo-simulation.html#cb170-4" aria-hidden="true" tabindex="-1"></a>n.sims <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb170-5"><a href="monte-carlo-simulation.html#cb170-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-6"><a href="monte-carlo-simulation.html#cb170-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize FT variable with 10000 zeros</span></span>
<span id="cb170-7"><a href="monte-carlo-simulation.html#cb170-7" aria-hidden="true" tabindex="-1"></a>FT <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>, n.sims)</span>
<span id="cb170-8"><a href="monte-carlo-simulation.html#cb170-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-9"><a href="monte-carlo-simulation.html#cb170-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n.sims) {</span>
<span id="cb170-10"><a href="monte-carlo-simulation.html#cb170-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simulate 10 free throws</span></span>
<span id="cb170-11"><a href="monte-carlo-simulation.html#cb170-11" aria-hidden="true" tabindex="-1"></a>    temp <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">size =</span> <span class="dv">10</span>, <span class="at">replace =</span> T, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.473</span>, <span class="fl">0.527</span>))</span>
<span id="cb170-12"><a href="monte-carlo-simulation.html#cb170-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-13"><a href="monte-carlo-simulation.html#cb170-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Count the number of free throws made and store them in FT</span></span>
<span id="cb170-14"><a href="monte-carlo-simulation.html#cb170-14" aria-hidden="true" tabindex="-1"></a>    FT[i] <span class="ot">&lt;-</span> <span class="fu">sum</span>(temp)</span>
<span id="cb170-15"><a href="monte-carlo-simulation.html#cb170-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb170-16"><a href="monte-carlo-simulation.html#cb170-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-17"><a href="monte-carlo-simulation.html#cb170-17" aria-hidden="true" tabindex="-1"></a>prob10 <span class="ot">&lt;-</span> <span class="fu">sum</span>(FT <span class="sc">==</span> <span class="dv">10</span>)<span class="sc">/</span>n.sims</span>
<span id="cb170-18"><a href="monte-carlo-simulation.html#cb170-18" aria-hidden="true" tabindex="-1"></a>prob10</span></code></pre></div>
<pre><code>## [1] 0.0019</code></pre>
<p>As we increase the number of simulations, the estimate will become more accurate.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="monte-carlo-simulation.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb172-2"><a href="monte-carlo-simulation.html#cb172-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-3"><a href="monte-carlo-simulation.html#cb172-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of Simulations</span></span>
<span id="cb172-4"><a href="monte-carlo-simulation.html#cb172-4" aria-hidden="true" tabindex="-1"></a>n.sims <span class="ot">&lt;-</span> <span class="fl">1e+05</span></span>
<span id="cb172-5"><a href="monte-carlo-simulation.html#cb172-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-6"><a href="monte-carlo-simulation.html#cb172-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize FT variable with 10000 zeros</span></span>
<span id="cb172-7"><a href="monte-carlo-simulation.html#cb172-7" aria-hidden="true" tabindex="-1"></a>FT <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>, n.sims)</span>
<span id="cb172-8"><a href="monte-carlo-simulation.html#cb172-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-9"><a href="monte-carlo-simulation.html#cb172-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n.sims) {</span>
<span id="cb172-10"><a href="monte-carlo-simulation.html#cb172-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simulate 10 free throws</span></span>
<span id="cb172-11"><a href="monte-carlo-simulation.html#cb172-11" aria-hidden="true" tabindex="-1"></a>    temp <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">size =</span> <span class="dv">10</span>, <span class="at">replace =</span> T, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.473</span>, <span class="fl">0.527</span>))</span>
<span id="cb172-12"><a href="monte-carlo-simulation.html#cb172-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-13"><a href="monte-carlo-simulation.html#cb172-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Count the number of free throws made and store them in FT</span></span>
<span id="cb172-14"><a href="monte-carlo-simulation.html#cb172-14" aria-hidden="true" tabindex="-1"></a>    FT[i] <span class="ot">&lt;-</span> <span class="fu">sum</span>(temp)</span>
<span id="cb172-15"><a href="monte-carlo-simulation.html#cb172-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb172-16"><a href="monte-carlo-simulation.html#cb172-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-17"><a href="monte-carlo-simulation.html#cb172-17" aria-hidden="true" tabindex="-1"></a>prob10 <span class="ot">&lt;-</span> <span class="fu">sum</span>(FT <span class="sc">==</span> <span class="dv">10</span>)<span class="sc">/</span>n.sims</span>
<span id="cb172-18"><a href="monte-carlo-simulation.html#cb172-18" aria-hidden="true" tabindex="-1"></a>prob10</span></code></pre></div>
<pre><code>## [1] 0.00174</code></pre>
<p>One way to simulate data is to make assumptions about the distributions of the underlying data. The random variables given in the last chapter as possible candidates.</p>
<div class="example">
<p><span id="exm:unlabeled-div-93" class="example"><strong>Example 3.3  </strong></span>In 1997-1998 with the Los Angeles Lakers, Shaq attempted an average of 11.35 free throws per game with a standard deviation of 4.04. While with the Lakers, Shaq played in an average of 63.6 games per year with a standard deviation of 10.6. Create a simulation to model the season total number of free throw attempts that Shaq would have while with the Lakers.</p>
<p>Note: his actual season totals of free throws attempted while with the Lakers were: 479, 681, 498, 824, 972, 712, 725, 676</p>
</div>
<p>Let’s model the number of games that Shaq played in as a Binomial random variable. There are 82 regular sesaon games, so let <span class="math inline">\(n=82\)</span>. Shaq played in an average of 63.6 games, so let <span class="math inline">\(p=\frac{64.25}{82}=0.784\)</span>. Shaq played in about 78% of the games during his career with the Lakers.</p>
<p>For the number of free throw attempts per game, we could model this as a Poisson random variable or a Negative Binomial random variable. As noted in the previous chapter, the variance of Shaq’s FT attempts is a fair bit greater than the mean which means that it is overdispersed. Negative Binomial may be a more appropriate model than a Poisson. From last chapter, we found <span class="math inline">\(\hat{r}=25.85\)</span> and <span class="math inline">\(\hat{p}=0.305\)</span>.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="monte-carlo-simulation.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2020</span>)</span>
<span id="cb174-2"><a href="monte-carlo-simulation.html#cb174-2" aria-hidden="true" tabindex="-1"></a>n.sims <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb174-3"><a href="monte-carlo-simulation.html#cb174-3" aria-hidden="true" tabindex="-1"></a>FT <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>, n.sims)</span>
<span id="cb174-4"><a href="monte-carlo-simulation.html#cb174-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-5"><a href="monte-carlo-simulation.html#cb174-5" aria-hidden="true" tabindex="-1"></a><span class="co"># simulate the number of games played in a season, round to a whole number</span></span>
<span id="cb174-6"><a href="monte-carlo-simulation.html#cb174-6" aria-hidden="true" tabindex="-1"></a>games.sim <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(<span class="at">n =</span> n.sims, <span class="at">size =</span> <span class="dv">82</span>, <span class="at">prob =</span> <span class="fl">0.784</span>)</span>
<span id="cb174-7"><a href="monte-carlo-simulation.html#cb174-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-8"><a href="monte-carlo-simulation.html#cb174-8" aria-hidden="true" tabindex="-1"></a><span class="co"># number of games can&#39;t exceed 82 games (regular season total)</span></span>
<span id="cb174-9"><a href="monte-carlo-simulation.html#cb174-9" aria-hidden="true" tabindex="-1"></a>games.sim[games.sim <span class="sc">&gt;</span> <span class="dv">82</span>] <span class="ot">=</span> <span class="dv">82</span></span>
<span id="cb174-10"><a href="monte-carlo-simulation.html#cb174-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-11"><a href="monte-carlo-simulation.html#cb174-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n.sims) {</span>
<span id="cb174-12"><a href="monte-carlo-simulation.html#cb174-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># simulate the season total FT attempts in each simulation</span></span>
<span id="cb174-13"><a href="monte-carlo-simulation.html#cb174-13" aria-hidden="true" tabindex="-1"></a>    temp <span class="ot">&lt;-</span> <span class="fu">rnbinom</span>(<span class="at">n =</span> games.sim[i], <span class="at">size =</span> <span class="fl">25.85</span>, <span class="at">prob =</span> <span class="dv">1</span> <span class="sc">-</span> <span class="fl">0.305</span>)</span>
<span id="cb174-14"><a href="monte-carlo-simulation.html#cb174-14" aria-hidden="true" tabindex="-1"></a>    FT[i] <span class="ot">&lt;-</span> <span class="fu">sum</span>(temp)</span>
<span id="cb174-15"><a href="monte-carlo-simulation.html#cb174-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb174-16"><a href="monte-carlo-simulation.html#cb174-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-17"><a href="monte-carlo-simulation.html#cb174-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulated mean and SD of season totals of free throw attempts</span></span>
<span id="cb174-18"><a href="monte-carlo-simulation.html#cb174-18" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">mean</span>(FT), <span class="fu">sd</span>(FT))</span></code></pre></div>
<pre><code>## [1] 730.47550  53.20566</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="monte-carlo-simulation.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Actual mean and SD of season totals of free throw attempts</span></span>
<span id="cb176-2"><a href="monte-carlo-simulation.html#cb176-2" aria-hidden="true" tabindex="-1"></a>FT.actual <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">479</span>, <span class="dv">681</span>, <span class="dv">498</span>, <span class="dv">824</span>, <span class="dv">972</span>, <span class="dv">712</span>, <span class="dv">725</span>, <span class="dv">676</span>)</span>
<span id="cb176-3"><a href="monte-carlo-simulation.html#cb176-3" aria-hidden="true" tabindex="-1"></a>FT.actual.mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(FT.actual)</span>
<span id="cb176-4"><a href="monte-carlo-simulation.html#cb176-4" aria-hidden="true" tabindex="-1"></a>FT.actual.var <span class="ot">&lt;-</span> <span class="fu">var</span>(FT.actual) <span class="sc">*</span> <span class="dv">7</span><span class="sc">/</span><span class="dv">8</span>  <span class="co"># population variance</span></span>
<span id="cb176-5"><a href="monte-carlo-simulation.html#cb176-5" aria-hidden="true" tabindex="-1"></a>FT.actual.sd <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(FT.actual.var)</span>
<span id="cb176-6"><a href="monte-carlo-simulation.html#cb176-6" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(FT.actual.mean, FT.actual.sd)</span></code></pre></div>
<pre><code>## [1] 695.8750 150.2393</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="monte-carlo-simulation.html#cb178-1" aria-hidden="true" tabindex="-1"></a>FT <span class="sc">%&gt;%</span></span>
<span id="cb178-2"><a href="monte-carlo-simulation.html#cb178-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb178-3"><a href="monte-carlo-simulation.html#cb178-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> FT)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">color =</span> <span class="st">&quot;yellow&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;purple&quot;</span>) <span class="sc">+</span></span>
<span id="cb178-4"><a href="monte-carlo-simulation.html#cb178-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Simulated Season FT Attempt Totals by Shaq with Lakers&quot;</span>)</span></code></pre></div>
<p><img src="series_files/figure-html/unnamed-chunk-55-1.png" width="672" /></p>
<p>Notice that the mean of our simulation is somewhat close to Shaq’s true season average number of free throw attempts but the variance of the simulation is far too low.</p>
<p>We can also simulate data using resampling. In this case, rather than simulating random variables according to a distribution, we can use our actual data as a sampling distribution.</p>
<div class="example">
<p><span id="exm:unlabeled-div-94" class="example"><strong>Example 3.4  </strong></span>Using resampling, simulate the number of free throws Shaq would attempt while with the Lakers. Compare the mean and variance of the simulation to Shaq’s actual statistics.</p>
</div>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="monte-carlo-simulation.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2020</span>)</span>
<span id="cb179-2"><a href="monte-carlo-simulation.html#cb179-2" aria-hidden="true" tabindex="-1"></a>n.sims <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb179-3"><a href="monte-carlo-simulation.html#cb179-3" aria-hidden="true" tabindex="-1"></a>FT <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>, n.sims)</span>
<span id="cb179-4"><a href="monte-carlo-simulation.html#cb179-4" aria-hidden="true" tabindex="-1"></a>shaq.games <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">51</span>, <span class="dv">60</span>, <span class="dv">49</span>, <span class="dv">79</span>, <span class="dv">74</span>, <span class="dv">67</span>, <span class="dv">67</span>, <span class="dv">67</span>)</span>
<span id="cb179-5"><a href="monte-carlo-simulation.html#cb179-5" aria-hidden="true" tabindex="-1"></a>shaq.FTA <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/shaqFT.csv&quot;</span>, <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb179-6"><a href="monte-carlo-simulation.html#cb179-6" aria-hidden="true" tabindex="-1"></a>shaq.FTA <span class="ot">&lt;-</span> shaq.FTA<span class="sc">$</span>X1</span>
<span id="cb179-7"><a href="monte-carlo-simulation.html#cb179-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-8"><a href="monte-carlo-simulation.html#cb179-8" aria-hidden="true" tabindex="-1"></a><span class="co"># sample (with replacement) from Shaq&#39;s FTA game totals</span></span>
<span id="cb179-9"><a href="monte-carlo-simulation.html#cb179-9" aria-hidden="true" tabindex="-1"></a>games.sim <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> shaq.games, <span class="at">size =</span> n.sims, <span class="at">replace =</span> T)</span>
<span id="cb179-10"><a href="monte-carlo-simulation.html#cb179-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-11"><a href="monte-carlo-simulation.html#cb179-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n.sims) {</span>
<span id="cb179-12"><a href="monte-carlo-simulation.html#cb179-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># sample (with replacement) from Shaq&#39;s FTA game totals</span></span>
<span id="cb179-13"><a href="monte-carlo-simulation.html#cb179-13" aria-hidden="true" tabindex="-1"></a>    temp <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> shaq.FTA, <span class="at">size =</span> games.sim[i], <span class="at">replace =</span> T)</span>
<span id="cb179-14"><a href="monte-carlo-simulation.html#cb179-14" aria-hidden="true" tabindex="-1"></a>    FT[i] <span class="ot">&lt;-</span> <span class="fu">sum</span>(temp)</span>
<span id="cb179-15"><a href="monte-carlo-simulation.html#cb179-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb179-16"><a href="monte-carlo-simulation.html#cb179-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-17"><a href="monte-carlo-simulation.html#cb179-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulated mean and SD of season totals of free throw attempts</span></span>
<span id="cb179-18"><a href="monte-carlo-simulation.html#cb179-18" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">mean</span>(FT), <span class="fu">sd</span>(FT))</span></code></pre></div>
<pre><code>## [1] 695.8883 112.6666</code></pre>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="monte-carlo-simulation.html#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Actual mean and SD of season totals of free throw attempts</span></span>
<span id="cb181-2"><a href="monte-carlo-simulation.html#cb181-2" aria-hidden="true" tabindex="-1"></a>FT.actual <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">479</span>, <span class="dv">681</span>, <span class="dv">498</span>, <span class="dv">824</span>, <span class="dv">972</span>, <span class="dv">712</span>, <span class="dv">725</span>, <span class="dv">676</span>)</span>
<span id="cb181-3"><a href="monte-carlo-simulation.html#cb181-3" aria-hidden="true" tabindex="-1"></a>FT.actual.mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(FT.actual)</span>
<span id="cb181-4"><a href="monte-carlo-simulation.html#cb181-4" aria-hidden="true" tabindex="-1"></a>FT.actual.var <span class="ot">&lt;-</span> <span class="fu">var</span>(FT.actual) <span class="sc">*</span> <span class="dv">7</span><span class="sc">/</span><span class="dv">8</span>  <span class="co"># population variance</span></span>
<span id="cb181-5"><a href="monte-carlo-simulation.html#cb181-5" aria-hidden="true" tabindex="-1"></a>FT.actual.sd <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(FT.actual.var)</span>
<span id="cb181-6"><a href="monte-carlo-simulation.html#cb181-6" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(FT.actual.mean, FT.actual.sd)</span></code></pre></div>
<pre><code>## [1] 695.8750 150.2393</code></pre>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="monte-carlo-simulation.html#cb183-1" aria-hidden="true" tabindex="-1"></a>FT <span class="sc">%&gt;%</span></span>
<span id="cb183-2"><a href="monte-carlo-simulation.html#cb183-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb183-3"><a href="monte-carlo-simulation.html#cb183-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> FT)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">color =</span> <span class="st">&quot;yellow&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;purple&quot;</span>) <span class="sc">+</span></span>
<span id="cb183-4"><a href="monte-carlo-simulation.html#cb183-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Simulated Season FT Attempt Totals by Shaq with Lakers&quot;</span>)</span></code></pre></div>
<p><img src="series_files/figure-html/unnamed-chunk-56-1.png" width="672" /></p>
<p>This simulation is biased low on the variance but is better than the earlier simulation.</p>
<p>One reason that you may want to do complicated simulations like the example above is to make predictions for a player’s future seasons.</p>
</div>
<div id="estimating-probabilities" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Estimating Probabilities<a href="monte-carlo-simulation.html#estimating-probabilities" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We can use simulation to estimate probabilities of different events occurring. One way to do this is for each simulation to record a “1” if the event of interest occurs and a “0” if the event of interest does not occur.</p>
<div class="definition">
<p><span id="def:unlabeled-div-95" class="definition"><strong>Definition 3.1  </strong></span>The <strong><em>indicator function</em></strong>, <span class="math inline">\(I(A)\)</span>, is defined such that <span class="math inline">\(I(A)\)</span> is equal to 1 if <span class="math inline">\(A\)</span> occurs and is equal to 0 if <span class="math inline">\(A\)</span> does not occur.</p>
</div>
<p>For instance, suppose we roll a die and a “6” is on top. Then we have the following: <span class="math inline">\(I(6)=1, I(5)=0, I(even)=1, I(odd)=0\)</span>.</p>
<p>One way to calculate probabilities is to use the following rule: <span class="math inline">\(P(A) = E[I(A)]\)</span>. The probability that <span class="math inline">\(A\)</span> occurs is equal to the expected value of the indicator function of <span class="math inline">\(A\)</span>.</p>
<div class="example">
<p><span id="exm:unlabeled-div-96" class="example"><strong>Example 3.5  </strong></span>During the 2021 WNBA season, Kahleah Copper of the Chicago Sky had a free throw percentage of 81.8%. She played a total of 32 games and the probability mass function for number of free throw attempts per game are given in the table below. Estimate the probability that Copper did not make a free throw in a game. [Note: Copper did not make a free throw in 6 out of the 32 games for a probability of 0.1875.]</p>
</div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
0.156
</td>
<td style="text-align:left;">
0.062
</td>
<td style="text-align:left;">
0.250
</td>
<td style="text-align:left;">
0.000
</td>
<td style="text-align:left;">
0.219
</td>
<td style="text-align:left;">
0.062
</td>
<td style="text-align:left;">
0.125
</td>
<td style="text-align:left;">
0.062
</td>
<td style="text-align:left;">
0.062
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="monte-carlo-simulation.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2020</span>)</span>
<span id="cb184-2"><a href="monte-carlo-simulation.html#cb184-2" aria-hidden="true" tabindex="-1"></a>n.sims <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb184-3"><a href="monte-carlo-simulation.html#cb184-3" aria-hidden="true" tabindex="-1"></a>games <span class="ot">&lt;-</span> <span class="dv">32</span></span>
<span id="cb184-4"><a href="monte-carlo-simulation.html#cb184-4" aria-hidden="true" tabindex="-1"></a>FTprob <span class="ot">&lt;-</span> <span class="fl">0.818</span></span>
<span id="cb184-5"><a href="monte-carlo-simulation.html#cb184-5" aria-hidden="true" tabindex="-1"></a>FTA <span class="ot">&lt;-</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">8</span></span>
<span id="cb184-6"><a href="monte-carlo-simulation.html#cb184-6" aria-hidden="true" tabindex="-1"></a>nFTA <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">8</span>, <span class="dv">0</span>, <span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb184-7"><a href="monte-carlo-simulation.html#cb184-7" aria-hidden="true" tabindex="-1"></a>pFTA <span class="ot">&lt;-</span> nFTA<span class="sc">/</span><span class="dv">32</span></span>
<span id="cb184-8"><a href="monte-carlo-simulation.html#cb184-8" aria-hidden="true" tabindex="-1"></a>FT <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>, n.sims)</span>
<span id="cb184-9"><a href="monte-carlo-simulation.html#cb184-9" aria-hidden="true" tabindex="-1"></a>FT0.ind <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>, n.sims)</span>
<span id="cb184-10"><a href="monte-carlo-simulation.html#cb184-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-11"><a href="monte-carlo-simulation.html#cb184-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate the number of FTA per game</span></span>
<span id="cb184-12"><a href="monte-carlo-simulation.html#cb184-12" aria-hidden="true" tabindex="-1"></a>FTA.sim <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> FTA, <span class="at">size =</span> n.sims, <span class="at">replace =</span> T, <span class="at">prob =</span> pFTA)</span>
<span id="cb184-13"><a href="monte-carlo-simulation.html#cb184-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-14"><a href="monte-carlo-simulation.html#cb184-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate 10,000 games and record number of FT made</span></span>
<span id="cb184-15"><a href="monte-carlo-simulation.html#cb184-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n.sims) {</span>
<span id="cb184-16"><a href="monte-carlo-simulation.html#cb184-16" aria-hidden="true" tabindex="-1"></a>    FT[i] <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(<span class="at">n =</span> <span class="dv">1</span>, <span class="at">size =</span> FTA.sim[i], <span class="at">prob =</span> <span class="fl">0.818</span>)</span>
<span id="cb184-17"><a href="monte-carlo-simulation.html#cb184-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb184-18"><a href="monte-carlo-simulation.html#cb184-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-19"><a href="monte-carlo-simulation.html#cb184-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Look at the header of the simulated data</span></span>
<span id="cb184-20"><a href="monte-carlo-simulation.html#cb184-20" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(FT)</span></code></pre></div>
<pre><code>## [1] 6 3 0 0 1 1</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="monte-carlo-simulation.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create indicator function for 0 FT made</span></span>
<span id="cb186-2"><a href="monte-carlo-simulation.html#cb186-2" aria-hidden="true" tabindex="-1"></a>FT0.ind <span class="ot">=</span> FT <span class="sc">==</span> <span class="dv">0</span></span>
<span id="cb186-3"><a href="monte-carlo-simulation.html#cb186-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(FT0.ind)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="monte-carlo-simulation.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimate probability of 0 FT made</span></span>
<span id="cb188-2"><a href="monte-carlo-simulation.html#cb188-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(FT0.ind)<span class="sc">/</span>n.sims</span></code></pre></div>
<pre><code>## [1] 0.1711</code></pre>
</div>
<div id="a-few-reminderstips-for-simulation-and-a-basic-example" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> A few reminders/tips for simulation, and a basic example<a href="monte-carlo-simulation.html#a-few-reminderstips-for-simulation-and-a-basic-example" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The number of regulation goals scored in a game by Hockey Team A, <span class="math inline">\(X\)</span>, is a Poisson(4) random variable, and the same for Hockey Team B, <span class="math inline">\(Y\)</span>, is a Poisson(3.2) random variable.</p>
<p>A statistician is interested in the probability that Team A defeats Team B in regulation. This is <span class="math inline">\(P(X &gt; Y)\)</span>, which is difficult to calculate manually. However, using simulation, we can straightforwardly obtain an accurate estimation of this quantity.</p>
<p>There are many built-in functions in <code>R</code> that allow users to generate realizations from common probability distributions (<code>rnorm</code>, <code>rbinom</code>, <code>rexp</code>, etc.) Let’s use the <code>rpois</code> function to simulate the appropriate variables, remembering to set a seed so that our results are easily replicable.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="monte-carlo-simulation.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2022</span>)</span>
<span id="cb190-2"><a href="monte-carlo-simulation.html#cb190-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-3"><a href="monte-carlo-simulation.html#cb190-3" aria-hidden="true" tabindex="-1"></a>nReps <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb190-4"><a href="monte-carlo-simulation.html#cb190-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-5"><a href="monte-carlo-simulation.html#cb190-5" aria-hidden="true" tabindex="-1"></a>team_A_goals <span class="ot">&lt;-</span> <span class="fu">rpois</span>(<span class="at">n =</span> nReps, <span class="at">lambda =</span> <span class="dv">4</span>)</span>
<span id="cb190-6"><a href="monte-carlo-simulation.html#cb190-6" aria-hidden="true" tabindex="-1"></a>team_B_goals <span class="ot">&lt;-</span> <span class="fu">rpois</span>(<span class="at">n =</span> nReps, <span class="at">lambda =</span> <span class="fl">3.2</span>)</span></code></pre></div>
<p>Now, to find <span class="math inline">\(P(X &gt; Y)\)</span>, we can use the following line of code:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="monte-carlo-simulation.html#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(team_A_goals <span class="sc">&gt;</span> team_B_goals)</span></code></pre></div>
<pre><code>## [1] 0.5415</code></pre>
<p>Why does this work? First, operations to vectors are executed elementwise, meaning that <code>R</code> compares <code>team_A_goals[1]</code> to <code>team_B_goals[1]</code>, then <code>team_A_goals[2]</code> to <code>team_B_goals[2]</code>, and so on. Second, logical operators are stored as zeroes (when the condition is false) and ones (when the condition is true). The mean of a vector of zeroes and ones is the proportion of ones, which is the frequency of the logical statement being true. In our simulation, it was 0.5415. The true value is 0.5427, meaning that the simulation was quite accurate.</p>
<p>These tips will help you be more efficient when performing simulation tasks in <code>R</code>.</p>
</div>
<div id="streak-simulation---basketball" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Streak Simulation - Basketball<a href="monte-carlo-simulation.html#streak-simulation---basketball" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Suppose an NBA team is in the middle of a rebuild and has a 25% probability of winning each of its games in the following 82-game season.</p>
<p>Q: What is the probability that the team will go on at least one winning streak of four or more games over the course of the 82-game season?</p>
<p>A: We can simulate a season for the team, find the longest winning streak in that season, and store it in a vector. After repeating that process 10,000 times, we can then find the proportion of the values in that vector that are greater than or equal to 4.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="monte-carlo-simulation.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2022</span>)</span>
<span id="cb193-2"><a href="monte-carlo-simulation.html#cb193-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-3"><a href="monte-carlo-simulation.html#cb193-3" aria-hidden="true" tabindex="-1"></a>nReps <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb193-4"><a href="monte-carlo-simulation.html#cb193-4" aria-hidden="true" tabindex="-1"></a>longest_streak <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA</span>, nReps)</span>
<span id="cb193-5"><a href="monte-carlo-simulation.html#cb193-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-6"><a href="monte-carlo-simulation.html#cb193-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>nReps) {</span>
<span id="cb193-7"><a href="monte-carlo-simulation.html#cb193-7" aria-hidden="true" tabindex="-1"></a>    game_results <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">n =</span> <span class="dv">82</span>, <span class="at">prob =</span> <span class="fl">0.25</span>)  <span class="co"># 1=win, 0=loss</span></span>
<span id="cb193-8"><a href="monte-carlo-simulation.html#cb193-8" aria-hidden="true" tabindex="-1"></a>    streaks <span class="ot">&lt;-</span> <span class="fu">rle</span>(game_results)</span>
<span id="cb193-9"><a href="monte-carlo-simulation.html#cb193-9" aria-hidden="true" tabindex="-1"></a>    longest_streak[i] <span class="ot">&lt;-</span> <span class="fu">max</span>(streaks<span class="sc">$</span>lengths[streaks<span class="sc">$</span>values <span class="sc">==</span> <span class="dv">1</span>])</span>
<span id="cb193-10"><a href="monte-carlo-simulation.html#cb193-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb193-11"><a href="monte-carlo-simulation.html#cb193-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-12"><a href="monte-carlo-simulation.html#cb193-12" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(longest_streak)</span></code></pre></div>
<pre><code>## longest_streak
##    1    2    3    4    5    6    7    8    9 
##  116 3626 4233 1480  410  105   21    7    2</code></pre>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="monte-carlo-simulation.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(longest_streak <span class="sc">&gt;=</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1] 0.2025</code></pre>
<!-- https://stackoverflow.com/questions/28731582/maximum-consecutive-repeats-in-a-vector-in-r -->
<p>The team had a 4+ game winning streak in about 20% of the simulations.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="probability.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="statistical-inference.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/aaron-nielsen/SportsAnalyticsBook/edit/master/03-simulation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["series.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
