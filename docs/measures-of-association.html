<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Measures of Association | Sports Analytics</title>
  <meta name="description" content="Chapter 6 Measures of Association | Sports Analytics Notes" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Measures of Association | Sports Analytics" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://aaron-nielsen.github.io/SportsAnalyticsBook/images/csu.png" />
  <meta property="og:description" content="Chapter 6 Measures of Association | Sports Analytics Notes" />
  <meta name="github-repo" content="aaron-nielsen.github.io/SportsAnalyticsBook/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Measures of Association | Sports Analytics" />
  
  <meta name="twitter:description" content="Chapter 6 Measures of Association | Sports Analytics Notes" />
  <meta name="twitter:image" content="https://aaron-nielsen.github.io/SportsAnalyticsBook/images/csu.png" />

<meta name="author" content="Aaron Nielsen, Department of Statistics, Colorado State University" />


<meta name="date" content="2023-02-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="inferential-statistics.html"/>
<link rel="next" href="data-acquisition.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Sports Analytics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html"><i class="fa fa-check"></i>Preliminaries</a>
<ul>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#getting-started-with-r"><i class="fa fa-check"></i>Getting Started With R</a>
<ul>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#installing-r"><i class="fa fa-check"></i>Installing R</a></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#some-r-basics"><i class="fa fa-check"></i>Some R Basics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#which-sports"><i class="fa fa-check"></i>Which Sports?</a></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#challenges"><i class="fa fa-check"></i>Challenges</a></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#ethical-concerns"><i class="fa fa-check"></i>Ethical Concerns</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>1</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="1.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#descriptive-statistics"><i class="fa fa-check"></i><b>1.1</b> Descriptive Statistics</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#definitions"><i class="fa fa-check"></i><b>1.1.1</b> Definitions</a></li>
<li class="chapter" data-level="1.1.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#descriptive-statistics-1"><i class="fa fa-check"></i><b>1.1.2</b> Descriptive Statistics</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#visualizations"><i class="fa fa-check"></i><b>1.2</b> Visualizations</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#histograms"><i class="fa fa-check"></i><b>1.2.1</b> Histograms</a></li>
<li class="chapter" data-level="1.2.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#bar-plots"><i class="fa fa-check"></i><b>1.2.2</b> Bar Plots</a></li>
<li class="chapter" data-level="1.2.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#scatter-plots"><i class="fa fa-check"></i><b>1.2.3</b> Scatter Plots</a></li>
<li class="chapter" data-level="1.2.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#kable-tables"><i class="fa fa-check"></i><b>1.2.4</b> Kable Tables</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#baseball"><i class="fa fa-check"></i><b>1.3</b> Baseball</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#hitting-statistics"><i class="fa fa-check"></i><b>1.3.1</b> Hitting Statistics</a></li>
<li class="chapter" data-level="1.3.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#pitching-statistics"><i class="fa fa-check"></i><b>1.3.2</b> Pitching Statistics</a></li>
<li class="chapter" data-level="1.3.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#wins-above-replacement"><i class="fa fa-check"></i><b>1.3.3</b> Wins Above Replacement</a></li>
<li class="chapter" data-level="1.3.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#calculating-hitting-statistics"><i class="fa fa-check"></i><b>1.3.4</b> Calculating Hitting Statistics</a></li>
<li class="chapter" data-level="1.3.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#evaluating-pitching-statistics"><i class="fa fa-check"></i><b>1.3.5</b> Evaluating Pitching Statistics</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#football"><i class="fa fa-check"></i><b>1.4</b> Football</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-football-statistics"><i class="fa fa-check"></i><b>1.4.1</b> Basic Football Statistics</a></li>
<li class="chapter" data-level="1.4.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#advanced-football-statistics"><i class="fa fa-check"></i><b>1.4.2</b> Advanced Football Statistics</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basketball"><i class="fa fa-check"></i><b>1.5</b> Basketball</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-basketball-statistics"><i class="fa fa-check"></i><b>1.5.1</b> Basic Basketball Statistics</a></li>
<li class="chapter" data-level="1.5.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#advanced-basketball-statistics"><i class="fa fa-check"></i><b>1.5.2</b> Advanced Basketball Statistics</a></li>
<li class="chapter" data-level="1.5.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#four-factors"><i class="fa fa-check"></i><b>1.5.3</b> Four Factors</a></li>
<li class="chapter" data-level="1.5.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#shot-charts"><i class="fa fa-check"></i><b>1.5.4</b> Shot Charts</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#hockey"><i class="fa fa-check"></i><b>1.6</b> Hockey</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-hockey-statistics"><i class="fa fa-check"></i><b>1.6.1</b> Basic Hockey Statistics</a></li>
<li class="chapter" data-level="1.6.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#advanced-hockey-statistics"><i class="fa fa-check"></i><b>1.6.2</b> Advanced Hockey Statistics</a></li>
<li class="chapter" data-level="1.6.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#actual-vs.-expected-goals"><i class="fa fa-check"></i><b>1.6.3</b> Actual vs. Expected Goals</a></li>
<li class="chapter" data-level="1.6.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#goalie-statistics"><i class="fa fa-check"></i><b>1.6.4</b> Goalie Statistics</a></li>
<li class="chapter" data-level="1.6.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#correlation-plots"><i class="fa fa-check"></i><b>1.6.5</b> Correlation Plots</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#volleyball"><i class="fa fa-check"></i><b>1.7</b> Volleyball</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-volleyball-statistics"><i class="fa fa-check"></i><b>1.7.1</b> Basic Volleyball Statistics</a></li>
<li class="chapter" data-level="1.7.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#scatter-plot"><i class="fa fa-check"></i><b>1.7.2</b> Scatter Plot</a></li>
<li class="chapter" data-level="1.7.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#box-plot"><i class="fa fa-check"></i><b>1.7.3</b> Box Plot</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#soccer"><i class="fa fa-check"></i><b>1.8</b> Soccer</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-soccer-statistics"><i class="fa fa-check"></i><b>1.8.1</b> Basic Soccer Statistics</a></li>
<li class="chapter" data-level="1.8.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#advanced-soccer-statistics"><i class="fa fa-check"></i><b>1.8.2</b> Advanced Soccer Statistics</a></li>
<li class="chapter" data-level="1.8.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#bar-plot"><i class="fa fa-check"></i><b>1.8.3</b> Bar Plot</a></li>
<li class="chapter" data-level="1.8.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#scatter-plot-1"><i class="fa fa-check"></i><b>1.8.4</b> Scatter Plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="probability.html"><a href="probability.html"><i class="fa fa-check"></i><b>2</b> Probability</a>
<ul>
<li class="chapter" data-level="2.1" data-path="probability.html"><a href="probability.html#definitions-1"><i class="fa fa-check"></i><b>2.1</b> Definitions</a></li>
<li class="chapter" data-level="2.2" data-path="probability.html"><a href="probability.html#set-theory"><i class="fa fa-check"></i><b>2.2</b> Set Theory</a></li>
<li class="chapter" data-level="2.3" data-path="probability.html"><a href="probability.html#axioms-properties-and-laws"><i class="fa fa-check"></i><b>2.3</b> Axioms, Properties, and Laws</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="probability.html"><a href="probability.html#axioms-of-probability"><i class="fa fa-check"></i><b>2.3.1</b> Axioms of Probability</a></li>
<li class="chapter" data-level="2.3.2" data-path="probability.html"><a href="probability.html#properties-of-probability"><i class="fa fa-check"></i><b>2.3.2</b> Properties of Probability</a></li>
<li class="chapter" data-level="2.3.3" data-path="probability.html"><a href="probability.html#laws-of-probability"><i class="fa fa-check"></i><b>2.3.3</b> Laws of Probability</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="probability.html"><a href="probability.html#combinatorics"><i class="fa fa-check"></i><b>2.4</b> Combinatorics</a></li>
<li class="chapter" data-level="2.5" data-path="probability.html"><a href="probability.html#random-variables"><i class="fa fa-check"></i><b>2.5</b> Random Variables</a></li>
<li class="chapter" data-level="2.6" data-path="probability.html"><a href="probability.html#common-random-variables"><i class="fa fa-check"></i><b>2.6</b> Common Random Variables</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="probability.html"><a href="probability.html#binomial-rvs"><i class="fa fa-check"></i><b>2.6.1</b> Binomial RVs</a></li>
<li class="chapter" data-level="2.6.2" data-path="probability.html"><a href="probability.html#geometric-rvs"><i class="fa fa-check"></i><b>2.6.2</b> Geometric RVs</a></li>
<li class="chapter" data-level="2.6.3" data-path="probability.html"><a href="probability.html#poisson-rvs"><i class="fa fa-check"></i><b>2.6.3</b> Poisson RVs</a></li>
<li class="chapter" data-level="2.6.4" data-path="probability.html"><a href="probability.html#negative-binomial-rvs"><i class="fa fa-check"></i><b>2.6.4</b> Negative Binomial RVs</a></li>
<li class="chapter" data-level="2.6.5" data-path="probability.html"><a href="probability.html#normal-rvs"><i class="fa fa-check"></i><b>2.6.5</b> Normal RVs</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="probability.html"><a href="probability.html#win-probability-models"><i class="fa fa-check"></i><b>2.7</b> Win Probability Models</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="probability.html"><a href="probability.html#estimating-pregame-win-probability"><i class="fa fa-check"></i><b>2.7.1</b> Estimating Pregame Win Probability</a></li>
<li class="chapter" data-level="2.7.2" data-path="probability.html"><a href="probability.html#estimating-in-game-win-probability"><i class="fa fa-check"></i><b>2.7.2</b> Estimating In-Game Win Probability</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="odds-and-bets.html"><a href="odds-and-bets.html"><i class="fa fa-check"></i><b>3</b> Odds and Bets</a>
<ul>
<li class="chapter" data-level="3.1" data-path="odds-and-bets.html"><a href="odds-and-bets.html#odds"><i class="fa fa-check"></i><b>3.1</b> Odds</a></li>
<li class="chapter" data-level="3.2" data-path="odds-and-bets.html"><a href="odds-and-bets.html#gambling-odds"><i class="fa fa-check"></i><b>3.2</b> Gambling Odds</a></li>
<li class="chapter" data-level="3.3" data-path="odds-and-bets.html"><a href="odds-and-bets.html#types-of-bets"><i class="fa fa-check"></i><b>3.3</b> Types of Bets</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html"><i class="fa fa-check"></i><b>4</b> Monte Carlo Simulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#basics"><i class="fa fa-check"></i><b>4.1</b> Basics</a></li>
<li class="chapter" data-level="4.2" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#estimating-probabilities"><i class="fa fa-check"></i><b>4.2</b> Estimating Probabilities</a></li>
<li class="chapter" data-level="4.3" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#simulating-streaks"><i class="fa fa-check"></i><b>4.3</b> Simulating Streaks</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#winning-streak-simulation"><i class="fa fa-check"></i><b>4.3.1</b> Winning Streak Simulation</a></li>
<li class="chapter" data-level="4.3.2" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#hitting-streak-simulation"><i class="fa fa-check"></i><b>4.3.2</b> Hitting Streak Simulation</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#gambling-simulations"><i class="fa fa-check"></i><b>4.4</b> Gambling Simulations</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#martingale-system"><i class="fa fa-check"></i><b>4.4.1</b> Martingale System</a></li>
<li class="chapter" data-level="4.4.2" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#gamblers-ruin"><i class="fa fa-check"></i><b>4.4.2</b> Gambler’s Ruin</a></li>
<li class="chapter" data-level="4.4.3" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#simulating-a-winning-system"><i class="fa fa-check"></i><b>4.4.3</b> Simulating a Winning System</a></li>
<li class="chapter" data-level="4.4.4" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#using-the-kelly-growth-criterion"><i class="fa fa-check"></i><b>4.4.4</b> Using the Kelly Growth Criterion</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#simulating-censored-data"><i class="fa fa-check"></i><b>4.5</b> Simulating Censored Data</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#tony-gwynn-1994-batting-average-simulation"><i class="fa fa-check"></i><b>4.5.1</b> Tony Gwynn 1994 Batting Average Simulation</a></li>
<li class="chapter" data-level="4.5.2" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#matt-williams-1994-home-run-simulation"><i class="fa fa-check"></i><b>4.5.2</b> Matt Williams 1994 Home Run Simulation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="inferential-statistics.html"><a href="inferential-statistics.html"><i class="fa fa-check"></i><b>5</b> Inferential Statistics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#defining-a-population"><i class="fa fa-check"></i><b>5.1</b> Defining a Population</a></li>
<li class="chapter" data-level="5.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#statistical-inference"><i class="fa fa-check"></i><b>5.2</b> Statistical Inference</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#confidence-intervals"><i class="fa fa-check"></i><b>5.2.1</b> Confidence Intervals</a></li>
<li class="chapter" data-level="5.2.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#hypothesis-tests"><i class="fa fa-check"></i><b>5.2.2</b> Hypothesis Tests</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#inference-for-population-mean"><i class="fa fa-check"></i><b>5.3</b> Inference for Population Mean</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#confidence-interval-for-population-mean"><i class="fa fa-check"></i><b>5.3.1</b> Confidence Interval for Population Mean</a></li>
<li class="chapter" data-level="5.3.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#hypothesis-test-for-population-mean"><i class="fa fa-check"></i><b>5.3.2</b> Hypothesis Test for Population Mean</a></li>
<li class="chapter" data-level="5.3.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#test-for-difference-in-means"><i class="fa fa-check"></i><b>5.3.3</b> Test for Difference in Means</a></li>
<li class="chapter" data-level="5.3.4" data-path="inferential-statistics.html"><a href="inferential-statistics.html#confidence-interval-for-difference-in-means"><i class="fa fa-check"></i><b>5.3.4</b> Confidence Interval for Difference in Means</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="inferential-statistics.html"><a href="inferential-statistics.html#inference-for-population-proportion"><i class="fa fa-check"></i><b>5.4</b> Inference for Population Proportion</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#confidence-interval-for-population-proportion"><i class="fa fa-check"></i><b>5.4.1</b> Confidence Interval for Population Proportion</a></li>
<li class="chapter" data-level="5.4.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#test-for-population-proportion"><i class="fa fa-check"></i><b>5.4.2</b> Test for Population Proportion</a></li>
<li class="chapter" data-level="5.4.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#confidence-interval-for-difference-in-proportions"><i class="fa fa-check"></i><b>5.4.3</b> Confidence Interval for Difference in Proportions</a></li>
<li class="chapter" data-level="5.4.4" data-path="inferential-statistics.html"><a href="inferential-statistics.html#test-for-difference-in-proportions"><i class="fa fa-check"></i><b>5.4.4</b> Test for Difference in Proportions</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="inferential-statistics.html"><a href="inferential-statistics.html#bootstrap"><i class="fa fa-check"></i><b>5.5</b> Bootstrap</a></li>
<li class="chapter" data-level="5.6" data-path="inferential-statistics.html"><a href="inferential-statistics.html#margin-of-error-calcuations"><i class="fa fa-check"></i><b>5.6</b> Margin of Error Calcuations</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#moe-for-probabilities"><i class="fa fa-check"></i><b>5.6.1</b> MOE for Probabilities</a></li>
<li class="chapter" data-level="5.6.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#moe-for-averages"><i class="fa fa-check"></i><b>5.6.2</b> MOE for Averages</a></li>
<li class="chapter" data-level="5.6.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#moe-estimation-using-simulation"><i class="fa fa-check"></i><b>5.6.3</b> MOE estimation using simulation</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="inferential-statistics.html"><a href="inferential-statistics.html#one-sample-and-two-sample-t-tests-and-confidence-intervals"><i class="fa fa-check"></i><b>5.7</b> One Sample and Two Sample t-tests and confidence intervals</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#hockey-faceoffs"><i class="fa fa-check"></i><b>5.7.1</b> Hockey Faceoffs</a></li>
<li class="chapter" data-level="5.7.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#hockey-penalty-scoring"><i class="fa fa-check"></i><b>5.7.2</b> Hockey Penalty Scoring</a></li>
<li class="chapter" data-level="5.7.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#nfl-overtime-winners"><i class="fa fa-check"></i><b>5.7.3</b> NFL Overtime Winners</a></li>
<li class="chapter" data-level="5.7.4" data-path="inferential-statistics.html"><a href="inferential-statistics.html#icing-the-kicker"><i class="fa fa-check"></i><b>5.7.4</b> Icing the Kicker</a></li>
<li class="chapter" data-level="5.7.5" data-path="inferential-statistics.html"><a href="inferential-statistics.html#example-football-one-vs.-two-point-conversion"><i class="fa fa-check"></i><b>5.7.5</b> Example: Football One vs. Two Point Conversion</a></li>
<li class="chapter" data-level="5.7.6" data-path="inferential-statistics.html"><a href="inferential-statistics.html#two-sample-tests"><i class="fa fa-check"></i><b>5.7.6</b> Two Sample Tests</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="inferential-statistics.html"><a href="inferential-statistics.html#permutation-tests"><i class="fa fa-check"></i><b>5.8</b> Permutation Tests</a></li>
<li class="chapter" data-level="5.9" data-path="inferential-statistics.html"><a href="inferential-statistics.html#bootstrap-1"><i class="fa fa-check"></i><b>5.9</b> Bootstrap</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="measures-of-association.html"><a href="measures-of-association.html"><i class="fa fa-check"></i><b>6</b> Measures of Association</a>
<ul>
<li class="chapter" data-level="6.1" data-path="measures-of-association.html"><a href="measures-of-association.html#pearson-correlation-coefficient"><i class="fa fa-check"></i><b>6.1</b> Pearson Correlation Coefficient</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="measures-of-association.html"><a href="measures-of-association.html#partial-correlation-and-confounding-variables"><i class="fa fa-check"></i><b>6.1.1</b> Partial Correlation and Confounding Variables</a></li>
<li class="chapter" data-level="6.1.2" data-path="measures-of-association.html"><a href="measures-of-association.html#properties-of-the-linear-correlation-coefficient"><i class="fa fa-check"></i><b>6.1.2</b> Properties of the Linear Correlation Coefficient</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="measures-of-association.html"><a href="measures-of-association.html#association-of-categorical-variables"><i class="fa fa-check"></i><b>6.2</b> Association of Categorical Variables</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="measures-of-association.html"><a href="measures-of-association.html#odds-ratios"><i class="fa fa-check"></i><b>6.2.1</b> Odds Ratios</a></li>
<li class="chapter" data-level="6.2.2" data-path="measures-of-association.html"><a href="measures-of-association.html#yules-q"><i class="fa fa-check"></i><b>6.2.2</b> Yule’s Q</a></li>
<li class="chapter" data-level="6.2.3" data-path="measures-of-association.html"><a href="measures-of-association.html#chi-squared-test-of-independence"><i class="fa fa-check"></i><b>6.2.3</b> Chi-Squared Test of Independence</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="measures-of-association.html"><a href="measures-of-association.html#rank-correlation"><i class="fa fa-check"></i><b>6.3</b> Rank Correlation</a></li>
<li class="chapter" data-level="6.4" data-path="measures-of-association.html"><a href="measures-of-association.html#serial-correlation"><i class="fa fa-check"></i><b>6.4</b> Serial Correlation</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="measures-of-association.html"><a href="measures-of-association.html#autocorrelation"><i class="fa fa-check"></i><b>6.4.1</b> Autocorrelation</a></li>
<li class="chapter" data-level="6.4.2" data-path="measures-of-association.html"><a href="measures-of-association.html#run-lengths"><i class="fa fa-check"></i><b>6.4.2</b> Run Lengths</a></li>
<li class="chapter" data-level="6.4.3" data-path="measures-of-association.html"><a href="measures-of-association.html#wald-wolfowitz-runs-test"><i class="fa fa-check"></i><b>6.4.3</b> Wald-Wolfowitz Runs Test</a></li>
<li class="chapter" data-level="6.4.4" data-path="measures-of-association.html"><a href="measures-of-association.html#hot-hand"><i class="fa fa-check"></i><b>6.4.4</b> Hot Hand</a></li>
<li class="chapter" data-level="6.4.5" data-path="measures-of-association.html"><a href="measures-of-association.html#streakiness-in-sports"><i class="fa fa-check"></i><b>6.4.5</b> Streakiness in Sports</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="measures-of-association.html"><a href="measures-of-association.html#pythagorean-record"><i class="fa fa-check"></i><b>6.5</b> Pythagorean Record</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-acquisition.html"><a href="data-acquisition.html"><i class="fa fa-check"></i><b>7</b> Data Acquisition</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-acquisition.html"><a href="data-acquisition.html#tabular-data-from-sports-reference"><i class="fa fa-check"></i><b>7.1</b> Tabular Data From Sports Reference</a></li>
<li class="chapter" data-level="7.2" data-path="data-acquisition.html"><a href="data-acquisition.html#downloading-datasets-from-internet"><i class="fa fa-check"></i><b>7.2</b> Downloading Datasets From Internet</a></li>
<li class="chapter" data-level="7.3" data-path="data-acquisition.html"><a href="data-acquisition.html#importing-data-using-r-libraries"><i class="fa fa-check"></i><b>7.3</b> Importing Data Using R Libraries</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="data-acquisition.html"><a href="data-acquisition.html#baseballr-package"><i class="fa fa-check"></i><b>7.3.1</b> BaseballR package</a></li>
<li class="chapter" data-level="7.3.2" data-path="data-acquisition.html"><a href="data-acquisition.html#nflfastr-package"><i class="fa fa-check"></i><b>7.3.2</b> nflfastR package</a></li>
<li class="chapter" data-level="7.3.3" data-path="data-acquisition.html"><a href="data-acquisition.html#hoopr-package"><i class="fa fa-check"></i><b>7.3.3</b> hoopR package</a></li>
<li class="chapter" data-level="7.3.4" data-path="data-acquisition.html"><a href="data-acquisition.html#hockeyr-package"><i class="fa fa-check"></i><b>7.3.4</b> hockeyR package</a></li>
<li class="chapter" data-level="7.3.5" data-path="data-acquisition.html"><a href="data-acquisition.html#worldfootballr"><i class="fa fa-check"></i><b>7.3.5</b> worldfootballR</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="data-acquisition.html"><a href="data-acquisition.html#data-scraping"><i class="fa fa-check"></i><b>7.4</b> Data Scraping</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="data-acquisition.html"><a href="data-acquisition.html#general-tips"><i class="fa fa-check"></i><b>7.4.1</b> General Tips</a></li>
<li class="chapter" data-level="7.4.2" data-path="data-acquisition.html"><a href="data-acquisition.html#introduction-to-html"><i class="fa fa-check"></i><b>7.4.2</b> Introduction to HTML</a></li>
<li class="chapter" data-level="7.4.3" data-path="data-acquisition.html"><a href="data-acquisition.html#rvest-package"><i class="fa fa-check"></i><b>7.4.3</b> rvest Package</a></li>
<li class="chapter" data-level="7.4.4" data-path="data-acquisition.html"><a href="data-acquisition.html#css-gadget-selector"><i class="fa fa-check"></i><b>7.4.4</b> CSS Gadget Selector</a></li>
<li class="chapter" data-level="7.4.5" data-path="data-acquisition.html"><a href="data-acquisition.html#scraping-examples"><i class="fa fa-check"></i><b>7.4.5</b> Scraping Examples</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>8</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="8.1" data-path="linear-regression.html"><a href="linear-regression.html#simple-linear-regression"><i class="fa fa-check"></i><b>8.1</b> Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="linear-regression.html"><a href="linear-regression.html#pythagorean-records"><i class="fa fa-check"></i><b>8.1.1</b> Pythagorean Records</a></li>
<li class="chapter" data-level="8.1.2" data-path="linear-regression.html"><a href="linear-regression.html#regression-to-the-mean"><i class="fa fa-check"></i><b>8.1.2</b> Regression to the Mean</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="linear-regression.html"><a href="linear-regression.html#variable-transformations"><i class="fa fa-check"></i><b>8.2</b> Variable Transformations</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="linear-regression.html"><a href="linear-regression.html#draft-pick-values"><i class="fa fa-check"></i><b>8.2.1</b> Draft Pick Values</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="linear-regression.html"><a href="linear-regression.html#multiple-linear-regression"><i class="fa fa-check"></i><b>8.3</b> Multiple Linear Regression</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="linear-regression.html"><a href="linear-regression.html#four-factors-and-winning"><i class="fa fa-check"></i><b>8.3.1</b> Four Factors and Winning</a></li>
<li class="chapter" data-level="8.3.2" data-path="linear-regression.html"><a href="linear-regression.html#linear-weights-in-baseball"><i class="fa fa-check"></i><b>8.3.2</b> Linear Weights in Baseball</a></li>
<li class="chapter" data-level="8.3.3" data-path="linear-regression.html"><a href="linear-regression.html#pass-air-yards-regression"><i class="fa fa-check"></i><b>8.3.3</b> Pass Air Yards Regression</a></li>
<li class="chapter" data-level="8.3.4" data-path="linear-regression.html"><a href="linear-regression.html#epl-passing-and-scoring"><i class="fa fa-check"></i><b>8.3.4</b> EPL Passing and Scoring</a></li>
<li class="chapter" data-level="8.3.5" data-path="linear-regression.html"><a href="linear-regression.html#hockey-ppg-vs-toi"><i class="fa fa-check"></i><b>8.3.5</b> Hockey PPG vs TOI</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="linear-regression.html"><a href="linear-regression.html#issues-with-multiyear-data"><i class="fa fa-check"></i><b>8.4</b> Issues with Multiyear Data</a></li>
<li class="chapter" data-level="8.5" data-path="linear-regression.html"><a href="linear-regression.html#interaction"><i class="fa fa-check"></i><b>8.5</b> Interaction</a></li>
<li class="chapter" data-level="8.6" data-path="linear-regression.html"><a href="linear-regression.html#confounding-variables"><i class="fa fa-check"></i><b>8.6</b> Confounding Variables</a></li>
<li class="chapter" data-level="8.7" data-path="linear-regression.html"><a href="linear-regression.html#logistic-regression"><i class="fa fa-check"></i><b>8.7</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="linear-regression.html"><a href="linear-regression.html#sack-and-interception-probability-models"><i class="fa fa-check"></i><b>8.7.1</b> Sack and Interception Probability Models</a></li>
<li class="chapter" data-level="8.7.2" data-path="linear-regression.html"><a href="linear-regression.html#soccer-goal-logistic-model"><i class="fa fa-check"></i><b>8.7.2</b> Soccer Goal Logistic Model</a></li>
<li class="chapter" data-level="8.7.3" data-path="linear-regression.html"><a href="linear-regression.html#field-goal-success"><i class="fa fa-check"></i><b>8.7.3</b> Field Goal Success</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html"><i class="fa fa-check"></i><b>9</b> Principal Component Analysis</a></li>
<li class="chapter" data-level="10" data-path="clustering.html"><a href="clustering.html"><i class="fa fa-check"></i><b>10</b> Clustering</a></li>
<li class="chapter" data-level="11" data-path="classification.html"><a href="classification.html"><i class="fa fa-check"></i><b>11</b> Classification</a></li>
<li class="chapter" data-level="12" data-path="nonparametric-methods.html"><a href="nonparametric-methods.html"><i class="fa fa-check"></i><b>12</b> Nonparametric Methods</a></li>
<li class="chapter" data-level="13" data-path="sports-drafts.html"><a href="sports-drafts.html"><i class="fa fa-check"></i><b>13</b> Sports Drafts</a></li>
<li class="chapter" data-level="14" data-path="baseball-1.html"><a href="baseball-1.html"><i class="fa fa-check"></i><b>14</b> Baseball</a></li>
<li class="chapter" data-level="15" data-path="football-1.html"><a href="football-1.html"><i class="fa fa-check"></i><b>15</b> Football</a></li>
<li class="chapter" data-level="16" data-path="basketball-1.html"><a href="basketball-1.html"><i class="fa fa-check"></i><b>16</b> Basketball</a></li>
<li class="chapter" data-level="17" data-path="hockey-1.html"><a href="hockey-1.html"><i class="fa fa-check"></i><b>17</b> Hockey</a></li>
<li class="chapter" data-level="18" data-path="soccer-1.html"><a href="soccer-1.html"><i class="fa fa-check"></i><b>18</b> Soccer</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Sports Analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="measures-of-association" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Measures of Association<a href="measures-of-association.html#measures-of-association" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter will examine various measures of association betweeen two or more variables. A popular measure of association is Pearson’s Correlation Coefficient for two continuous, quantitative variables. Other measures of association are more appropriate for other types of data like qualitative data.</p>
<div id="pearson-correlation-coefficient" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Pearson Correlation Coefficient<a href="measures-of-association.html#pearson-correlation-coefficient" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="definition">
<p><span id="def:unlabeled-div-160" class="definition"><strong>Definition 6.1  </strong></span>The <strong><em>Pearson correlation coefficient</em></strong> (also known as <strong><em>Pearson’s R</em></strong> or <strong><em>correlation coefficient</em></strong>) is a measure of linear relationship between two quantitative variables.</p>
<p>For two random variables, <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>, the Pearson correlation coefficient, <span class="math inline">\(\rho\)</span>, is:</p>
<p><span class="math inline">\(\rho = \frac{Cov(X,Y)}{\sigma_X \sigma_Y}\)</span></p>
<p>For two sets of sample data, <span class="math inline">\(\{x_1,x_2,\ldots,x_n\}\)</span> and <span class="math inline">\(\{y_1,y_2,\ldots,y_n\}\)</span>, the Pearson correlation coefficient is:</p>
<p><span class="math inline">\(r_{xy} = \frac{\sum_{i=1}^n (x_i-\bar{x})(y_i-\bar{y})}{\sqrt{\sum_{i=1}^n(x_i-\bar{x})^2}\sqrt{\sum_{i=1}^n(y_i-\bar{y})^2}}\)</span></p>
</div>
<div class="example">
<p><span id="exm:unlabeled-div-161" class="example"><strong>Example 6.1  </strong></span>Download pitching data for individual pitchers in the 2022 MLB season. Investigate the correlation between common pitching statistics.</p>
</div>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="measures-of-association.html#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb315-2"><a href="measures-of-association.html#cb315-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb315-3"><a href="measures-of-association.html#cb315-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(baseballr)</span>
<span id="cb315-4"><a href="measures-of-association.html#cb315-4" aria-hidden="true" tabindex="-1"></a>mlb22_all <span class="ot">&lt;-</span> <span class="fu">bref_daily_pitcher</span>(<span class="st">&quot;2022-01-01&quot;</span>, <span class="st">&quot;2022-12-31&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb315-5"><a href="measures-of-association.html#cb315-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fip_plus</span>()</span>
<span id="cb315-6"><a href="measures-of-association.html#cb315-6" aria-hidden="true" tabindex="-1"></a>mlb22_pitch <span class="ot">&lt;-</span> mlb22_all <span class="sc">%&gt;%</span>  </span>
<span id="cb315-7"><a href="measures-of-association.html#cb315-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Name, IP, SO, uBB, HR, ERA, FIP) <span class="sc">%&gt;%</span></span>
<span id="cb315-8"><a href="measures-of-association.html#cb315-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(dplyr<span class="sc">::</span><span class="fu">desc</span>(IP))</span>
<span id="cb315-9"><a href="measures-of-association.html#cb315-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb315-10"><a href="measures-of-association.html#cb315-10" aria-hidden="true" tabindex="-1"></a>mlb22_pitch <span class="sc">%&gt;%</span> </span>
<span id="cb315-11"><a href="measures-of-association.html#cb315-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb315-12"><a href="measures-of-association.html#cb315-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Name
</th>
<th style="text-align:right;">
IP
</th>
<th style="text-align:right;">
SO
</th>
<th style="text-align:right;">
uBB
</th>
<th style="text-align:right;">
HR
</th>
<th style="text-align:right;">
ERA
</th>
<th style="text-align:right;">
FIP
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Sandy Alcantara
</td>
<td style="text-align:right;">
228.2
</td>
<td style="text-align:right;">
207
</td>
<td style="text-align:right;">
49
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
2.28
</td>
<td style="text-align:right;">
2.97
</td>
</tr>
<tr>
<td style="text-align:left;">
Aaron Nola
</td>
<td style="text-align:right;">
205.0
</td>
<td style="text-align:right;">
235
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
3.25
</td>
<td style="text-align:right;">
2.57
</td>
</tr>
<tr>
<td style="text-align:left;">
Miles Mikolas
</td>
<td style="text-align:right;">
202.1
</td>
<td style="text-align:right;">
153
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
3.29
</td>
<td style="text-align:right;">
3.87
</td>
</tr>
<tr>
<td style="text-align:left;">
Corbin Burnes
</td>
<td style="text-align:right;">
202.0
</td>
<td style="text-align:right;">
243
</td>
<td style="text-align:right;">
51
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
2.94
</td>
<td style="text-align:right;">
3.14
</td>
</tr>
<tr>
<td style="text-align:left;">
Framber Valdez
</td>
<td style="text-align:right;">
201.1
</td>
<td style="text-align:right;">
194
</td>
<td style="text-align:right;">
67
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
2.82
</td>
<td style="text-align:right;">
3.06
</td>
</tr>
<tr>
<td style="text-align:left;">
Gerrit Cole
</td>
<td style="text-align:right;">
200.2
</td>
<td style="text-align:right;">
257
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
3.50
</td>
<td style="text-align:right;">
3.47
</td>
</tr>
<tr>
<td style="text-align:left;">
Merrill Kelly
</td>
<td style="text-align:right;">
200.1
</td>
<td style="text-align:right;">
177
</td>
<td style="text-align:right;">
59
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
3.37
</td>
<td style="text-align:right;">
3.62
</td>
</tr>
<tr>
<td style="text-align:left;">
Shane Bieber
</td>
<td style="text-align:right;">
200.0
</td>
<td style="text-align:right;">
198
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
2.88
</td>
<td style="text-align:right;">
2.87
</td>
</tr>
<tr>
<td style="text-align:left;">
Alek Manoah
</td>
<td style="text-align:right;">
196.2
</td>
<td style="text-align:right;">
180
</td>
<td style="text-align:right;">
51
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
2.24
</td>
<td style="text-align:right;">
3.35
</td>
</tr>
<tr>
<td style="text-align:left;">
MartÃ­n PÃ©rez
</td>
<td style="text-align:right;">
196.1
</td>
<td style="text-align:right;">
169
</td>
<td style="text-align:right;">
69
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
2.89
</td>
<td style="text-align:right;">
3.26
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="measures-of-association.html#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb316-2"><a href="measures-of-association.html#cb316-2" aria-hidden="true" tabindex="-1"></a>mlb22_pitch <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Name) <span class="sc">%&gt;%</span> <span class="fu">ggpairs</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-133-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="measures-of-association.html#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ellipse)</span>
<span id="cb317-2"><a href="measures-of-association.html#cb317-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb317-3"><a href="measures-of-association.html#cb317-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-4"><a href="measures-of-association.html#cb317-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Use of the mtcars data proposed by R</span></span>
<span id="cb317-5"><a href="measures-of-association.html#cb317-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> mlb22_pitch <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Name) <span class="sc">%&gt;%</span> <span class="fu">cor</span>()</span>
<span id="cb317-6"><a href="measures-of-association.html#cb317-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-7"><a href="measures-of-association.html#cb317-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Build a Pannel of 100 colors with Rcolor Brewer</span></span>
<span id="cb317-8"><a href="measures-of-association.html#cb317-8" aria-hidden="true" tabindex="-1"></a>my_colors <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="dv">5</span>, <span class="st">&quot;Spectral&quot;</span>)</span>
<span id="cb317-9"><a href="measures-of-association.html#cb317-9" aria-hidden="true" tabindex="-1"></a>my_colors <span class="ot">&lt;-</span> <span class="fu">colorRampPalette</span>(my_colors)(<span class="dv">100</span>)</span>
<span id="cb317-10"><a href="measures-of-association.html#cb317-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-11"><a href="measures-of-association.html#cb317-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Order the correlation matrix</span></span>
<span id="cb317-12"><a href="measures-of-association.html#cb317-12" aria-hidden="true" tabindex="-1"></a>ord <span class="ot">&lt;-</span> <span class="fu">order</span>(data[<span class="dv">1</span>, ])</span>
<span id="cb317-13"><a href="measures-of-association.html#cb317-13" aria-hidden="true" tabindex="-1"></a>data_ord <span class="ot">&lt;-</span> data[ord, ord]</span>
<span id="cb317-14"><a href="measures-of-association.html#cb317-14" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcorr</span>(data_ord, <span class="at">col=</span>my_colors[data_ord<span class="sc">*</span><span class="dv">50</span><span class="sc">+</span><span class="dv">50</span>], <span class="at">mar=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-134-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="measures-of-association.html#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example adapted from: </span></span>
<span id="cb318-2"><a href="measures-of-association.html#cb318-2" aria-hidden="true" tabindex="-1"></a><span class="co"># https://r-graph-gallery.com/273-custom-your-scatterplot-ggplot2.html</span></span>
<span id="cb318-3"><a href="measures-of-association.html#cb318-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb318-4"><a href="measures-of-association.html#cb318-4" aria-hidden="true" tabindex="-1"></a>mlb22_pitch <span class="sc">%&gt;%</span></span>
<span id="cb318-5"><a href="measures-of-association.html#cb318-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>IP,<span class="at">y=</span>SO)) <span class="sc">+</span></span>
<span id="cb318-6"><a href="measures-of-association.html#cb318-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb318-7"><a href="measures-of-association.html#cb318-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">color=</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb318-8"><a href="measures-of-association.html#cb318-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill=</span><span class="st">&quot;#69b3a2&quot;</span>,</span>
<span id="cb318-9"><a href="measures-of-association.html#cb318-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape=</span><span class="dv">22</span>,</span>
<span id="cb318-10"><a href="measures-of-association.html#cb318-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha=</span><span class="fl">0.5</span>,</span>
<span id="cb318-11"><a href="measures-of-association.html#cb318-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">size=</span><span class="dv">2</span></span>
<span id="cb318-12"><a href="measures-of-association.html#cb318-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb318-13"><a href="measures-of-association.html#cb318-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span>lm,<span class="at">se=</span>F,<span class="at">color=</span><span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb318-14"><a href="measures-of-association.html#cb318-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Innings Pitched vs. Strikeouts&quot;</span>,</span>
<span id="cb318-15"><a href="measures-of-association.html#cb318-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;2022 MLB Season | Individual Pitchers&quot;</span>,</span>
<span id="cb318-16"><a href="measures-of-association.html#cb318-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Data: Baseball Reference via baseballr&quot;</span>, </span>
<span id="cb318-17"><a href="measures-of-association.html#cb318-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Innings Pitched (IP)&quot;</span>,</span>
<span id="cb318-18"><a href="measures-of-association.html#cb318-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Strikeouts (SO)&quot;</span>) <span class="sc">+</span></span>
<span id="cb318-19"><a href="measures-of-association.html#cb318-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_cor</span>(<span class="at">method =</span> <span class="st">&quot;pearson&quot;</span>, <span class="at">label.x =</span> <span class="dv">155</span>, <span class="at">label.y =</span> <span class="dv">70</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-135-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="measures-of-association.html#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggExtra)</span>
<span id="cb319-2"><a href="measures-of-association.html#cb319-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> mlb22_pitch <span class="sc">%&gt;%</span></span>
<span id="cb319-3"><a href="measures-of-association.html#cb319-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>SO,<span class="at">y=</span>ERA)) <span class="sc">+</span></span>
<span id="cb319-4"><a href="measures-of-association.html#cb319-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb319-5"><a href="measures-of-association.html#cb319-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggMarginal</span>(p, <span class="at">type=</span><span class="st">&quot;histogram&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-136-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="measures-of-association.html#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb320-2"><a href="measures-of-association.html#cb320-2" aria-hidden="true" tabindex="-1"></a>color_pal <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="at">n =</span> <span class="dv">8</span>, <span class="at">name =</span> <span class="st">&quot;Dark2&quot;</span>)</span>
<span id="cb320-3"><a href="measures-of-association.html#cb320-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> mlb22_pitch <span class="sc">%&gt;%</span> <span class="fu">filter</span>(ERA <span class="sc">&lt;=</span> <span class="fl">10.00</span>) <span class="sc">%&gt;%</span></span>
<span id="cb320-4"><a href="measures-of-association.html#cb320-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>SO,<span class="at">y=</span>ERA)) <span class="sc">+</span></span>
<span id="cb320-5"><a href="measures-of-association.html#cb320-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.5</span>,<span class="at">color=</span>color_pal[<span class="dv">1</span>]) <span class="sc">+</span></span>
<span id="cb320-6"><a href="measures-of-association.html#cb320-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>,<span class="at">color=</span>color_pal[<span class="dv">2</span>]) <span class="sc">+</span></span>
<span id="cb320-7"><a href="measures-of-association.html#cb320-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_cor</span>(<span class="at">method =</span> <span class="st">&quot;pearson&quot;</span>, <span class="at">label.x =</span> <span class="dv">185</span>, <span class="at">label.y =</span> <span class="fl">5.8</span>) <span class="sc">+</span></span>
<span id="cb320-8"><a href="measures-of-association.html#cb320-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Strikeouts (SO) vs. Earned Run Average (ERA)&quot;</span>,</span>
<span id="cb320-9"><a href="measures-of-association.html#cb320-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;2022 MLB Season | Individual Pitchers&quot;</span>,</span>
<span id="cb320-10"><a href="measures-of-association.html#cb320-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Data: Baseball Reference via baseballr&quot;</span>, </span>
<span id="cb320-11"><a href="measures-of-association.html#cb320-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Innings Pitched (IP)&quot;</span>,</span>
<span id="cb320-12"><a href="measures-of-association.html#cb320-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Earned Run Average (ERA)&quot;</span>)</span>
<span id="cb320-13"><a href="measures-of-association.html#cb320-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggMarginal</span>(p, <span class="at">type=</span><span class="st">&quot;histogram&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;
## `geom_smooth()` using formula = &#39;y ~ x&#39;
## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="textbook_files/figure-html/unnamed-chunk-137-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="measures-of-association.html#cb322-1" aria-hidden="true" tabindex="-1"></a>mlb22_pitch <span class="sc">%&gt;%</span> </span>
<span id="cb322-2"><a href="measures-of-association.html#cb322-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>ERA,<span class="at">y=</span>FIP)) <span class="sc">+</span></span>
<span id="cb322-3"><a href="measures-of-association.html#cb322-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.5</span>,<span class="at">color=</span>color_pal[<span class="dv">1</span>]) <span class="sc">+</span></span>
<span id="cb322-4"><a href="measures-of-association.html#cb322-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">5</span>)) <span class="sc">+</span></span>
<span id="cb322-5"><a href="measures-of-association.html#cb322-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">5</span>)) <span class="sc">+</span></span>
<span id="cb322-6"><a href="measures-of-association.html#cb322-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb322-7"><a href="measures-of-association.html#cb322-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Earned Run Average (ERA) vs. Fielding Independent Pitching (FIP)&quot;</span>,</span>
<span id="cb322-8"><a href="measures-of-association.html#cb322-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;2022 MLB Season | Individual Pitchers&quot;</span>,</span>
<span id="cb322-9"><a href="measures-of-association.html#cb322-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Data: Baseball Reference via baseballr&quot;</span>, </span>
<span id="cb322-10"><a href="measures-of-association.html#cb322-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Earned Run Average (ERA)&quot;</span>,</span>
<span id="cb322-11"><a href="measures-of-association.html#cb322-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Fielding Independent Pitching (FIP)&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-138-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="measures-of-association.html#cb323-1" aria-hidden="true" tabindex="-1"></a>rox22_pitch <span class="ot">&lt;-</span> mlb22_all <span class="sc">%&gt;%</span> </span>
<span id="cb323-2"><a href="measures-of-association.html#cb323-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Name,Team,IP,H,uBB,ERA,FIP) <span class="sc">%&gt;%</span> </span>
<span id="cb323-3"><a href="measures-of-association.html#cb323-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Team<span class="sc">==</span><span class="st">&quot;Colorado&quot;</span>)</span>
<span id="cb323-4"><a href="measures-of-association.html#cb323-4" aria-hidden="true" tabindex="-1"></a>rox22_pitch <span class="sc">%&gt;%</span> </span>
<span id="cb323-5"><a href="measures-of-association.html#cb323-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(IP)) <span class="sc">%&gt;%</span> </span>
<span id="cb323-6"><a href="measures-of-association.html#cb323-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Name
</th>
<th style="text-align:left;">
Team
</th>
<th style="text-align:right;">
IP
</th>
<th style="text-align:right;">
H
</th>
<th style="text-align:right;">
uBB
</th>
<th style="text-align:right;">
ERA
</th>
<th style="text-align:right;">
FIP
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
GermÃ¡n MÃ¡rquez
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
181.2
</td>
<td style="text-align:right;">
185
</td>
<td style="text-align:right;">
63
</td>
<td style="text-align:right;">
4.95
</td>
<td style="text-align:right;">
4.72
</td>
</tr>
<tr>
<td style="text-align:left;">
Kyle Freeland
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
174.2
</td>
<td style="text-align:right;">
193
</td>
<td style="text-align:right;">
53
</td>
<td style="text-align:right;">
4.53
</td>
<td style="text-align:right;">
4.21
</td>
</tr>
<tr>
<td style="text-align:left;">
Chad Kuhl
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
137.0
</td>
<td style="text-align:right;">
155
</td>
<td style="text-align:right;">
57
</td>
<td style="text-align:right;">
5.72
</td>
<td style="text-align:right;">
5.24
</td>
</tr>
<tr>
<td style="text-align:left;">
Austin Gomber
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
124.2
</td>
<td style="text-align:right;">
137
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
5.56
</td>
<td style="text-align:right;">
4.52
</td>
</tr>
<tr>
<td style="text-align:left;">
Ryan Feltner
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
97.1
</td>
<td style="text-align:right;">
102
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
5.83
</td>
<td style="text-align:right;">
4.76
</td>
</tr>
<tr>
<td style="text-align:left;">
Antonio Senzatela
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
92.1
</td>
<td style="text-align:right;">
133
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
5.07
</td>
<td style="text-align:right;">
4.06
</td>
</tr>
<tr>
<td style="text-align:left;">
Daniel Bard
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
60.1
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
1.79
</td>
<td style="text-align:right;">
2.81
</td>
</tr>
<tr>
<td style="text-align:left;">
Carlos EstÃ©vez
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
57.0
</td>
<td style="text-align:right;">
44
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
3.47
</td>
<td style="text-align:right;">
4.02
</td>
</tr>
<tr>
<td style="text-align:left;">
Jake Bird
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
47.2
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
4.91
</td>
<td style="text-align:right;">
4.79
</td>
</tr>
<tr>
<td style="text-align:left;">
Jhoulys ChacÃ­n
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
47.1
</td>
<td style="text-align:right;">
55
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
7.61
</td>
<td style="text-align:right;">
4.94
</td>
</tr>
<tr>
<td style="text-align:left;">
Alex ColomÃ©
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
47.0
</td>
<td style="text-align:right;">
57
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
5.74
</td>
<td style="text-align:right;">
4.41
</td>
</tr>
<tr>
<td style="text-align:left;">
Ty Blach
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
44.1
</td>
<td style="text-align:right;">
51
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
5.89
</td>
<td style="text-align:right;">
3.72
</td>
</tr>
<tr>
<td style="text-align:left;">
Lucas Gilbreath
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
43.0
</td>
<td style="text-align:right;">
37
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
4.19
</td>
<td style="text-align:right;">
3.53
</td>
</tr>
<tr>
<td style="text-align:left;">
Justin Lawrence
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
42.2
</td>
<td style="text-align:right;">
44
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
5.70
</td>
<td style="text-align:right;">
3.40
</td>
</tr>
<tr>
<td style="text-align:left;">
Tyler Kinley
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
24.0
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0.75
</td>
<td style="text-align:right;">
1.74
</td>
</tr>
<tr>
<td style="text-align:left;">
Ashton Goudeau
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
20.1
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
7.08
</td>
<td style="text-align:right;">
4.95
</td>
</tr>
<tr>
<td style="text-align:left;">
Chad Smith
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
18.0
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
7.50
</td>
<td style="text-align:right;">
4.83
</td>
</tr>
<tr>
<td style="text-align:left;">
Gavin Hollowell
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
7.0
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
7.71
</td>
<td style="text-align:right;">
4.40
</td>
</tr>
<tr>
<td style="text-align:left;">
Jordan Sheffield
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
5.11
</td>
</tr>
<tr>
<td style="text-align:left;">
Noah Davis
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
18.00
</td>
<td style="text-align:right;">
15.11
</td>
</tr>
<tr>
<td style="text-align:left;">
Brian Serven
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
6.11
</td>
</tr>
<tr>
<td style="text-align:left;">
Randal Grichuk
</td>
<td style="text-align:left;">
Colorado
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
3.11
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="measures-of-association.html#cb324-1" aria-hidden="true" tabindex="-1"></a>rox22_pitch <span class="sc">%&gt;%</span> </span>
<span id="cb324-2"><a href="measures-of-association.html#cb324-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>H,<span class="at">y=</span>uBB,<span class="at">size=</span>IP)) <span class="sc">+</span></span>
<span id="cb324-3"><a href="measures-of-association.html#cb324-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.5</span>,<span class="at">color=</span>color_pal[<span class="dv">1</span>]) <span class="sc">+</span></span>
<span id="cb324-4"><a href="measures-of-association.html#cb324-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Colorado Rockies Pitchers: Hits Allowed vs. Unintentional Walks&quot;</span>,</span>
<span id="cb324-5"><a href="measures-of-association.html#cb324-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;2022 MLB Season | Individual Pitchers&quot;</span>,</span>
<span id="cb324-6"><a href="measures-of-association.html#cb324-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Data: Baseball Reference via baseballr&quot;</span>, </span>
<span id="cb324-7"><a href="measures-of-association.html#cb324-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Hits Allowed (H)&quot;</span>,</span>
<span id="cb324-8"><a href="measures-of-association.html#cb324-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Unintentional Walks (uBB)&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-140-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<div id="partial-correlation-and-confounding-variables" class="section level3 hasAnchor" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Partial Correlation and Confounding Variables<a href="measures-of-association.html#partial-correlation-and-confounding-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As seen in the previous example, counting statistics are often highly correlated. In particular, we may want to speculate that pitchers with poor control (high walks) tend to give up lots of hits due to poor control. This is only due to the presence of a <strong><em>lurking variable</em></strong> (innings pitched). To account for a lurking variable, one can calculate partial correlation coefficient in such situations.</p>
<div class="example">
<p><span id="exm:unlabeled-div-162" class="example"><strong>Example 6.2  </strong></span>Let <span class="math inline">\(X,Y,Z\)</span> be random variables and let <span class="math inline">\(r_{XY}\)</span> be the (standard) correlation coefficient between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>. The <strong><em>partial correlation coefficient</em></strong> of <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>, controlling for <span class="math inline">\(Z\)</span> is:</p>
<p><span class="math inline">\(r_{XY \bullet Z} = \frac{r_{XY}-r_{XZ}r_{YZ}}{\sqrt{1-r_{XZ}^2}\sqrt{1-r_{YZ}^2}}\)</span></p>
</div>
<div class="example">
<p><span id="exm:unlabeled-div-163" class="example"><strong>Example 6.3  </strong></span>Calculate the correlation between strikeouts and (unintentional) walks for pitchers with at least 20 IP during the 2022 season, with and without controlling for innings pitched.</p>
</div>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="measures-of-association.html#cb325-1" aria-hidden="true" tabindex="-1"></a>( cor_matrix <span class="ot">&lt;-</span> mlb22_all <span class="sc">%&gt;%</span> <span class="fu">select</span>(H,uBB,IP) <span class="sc">%&gt;%</span> <span class="fu">cor</span>() )</span></code></pre></div>
<pre><code>##             H       uBB        IP
## H   1.0000000 0.8766316 0.9698289
## uBB 0.8766316 1.0000000 0.8927844
## IP  0.9698289 0.8927844 1.0000000</code></pre>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="measures-of-association.html#cb327-1" aria-hidden="true" tabindex="-1"></a>( cor_without <span class="ot">&lt;-</span> cor_matrix[<span class="dv">1</span>,<span class="dv">2</span>] )</span></code></pre></div>
<pre><code>## [1] 0.8766316</code></pre>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="measures-of-association.html#cb329-1" aria-hidden="true" tabindex="-1"></a>( cor_with <span class="ot">&lt;-</span> (cor_matrix[<span class="dv">1</span>,<span class="dv">2</span>] <span class="sc">-</span> cor_matrix[<span class="dv">1</span>,<span class="dv">3</span>]<span class="sc">*</span>cor_matrix[<span class="dv">2</span>,<span class="dv">3</span>]) <span class="sc">/</span></span>
<span id="cb329-2"><a href="measures-of-association.html#cb329-2" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">sqrt</span>(<span class="dv">1</span><span class="sc">-</span>cor_matrix[<span class="dv">1</span>,<span class="dv">3</span>]<span class="sc">^</span><span class="dv">2</span>)<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">1</span><span class="sc">-</span>cor_matrix[<span class="dv">2</span>,<span class="dv">3</span>]<span class="sc">^</span><span class="dv">2</span>)) )</span></code></pre></div>
<pre><code>## [1] 0.09819068</code></pre>
<div style="page-break-after: always;"></div>
</div>
<div id="properties-of-the-linear-correlation-coefficient" class="section level3 hasAnchor" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Properties of the Linear Correlation Coefficient<a href="measures-of-association.html#properties-of-the-linear-correlation-coefficient" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pearson’s correlation coefficient is unaffected by changes in location (adding a constant) or scale (multiplying by a constant) of data. To illustrate this concept, let’s consider the correlation between the number of points scored by the winning team of the Super Bowl and 1) the number of the Super Bowl {1, 2, 3, … , 56} and 2) the year of the Super Bowl {1967, 1968, 1969, … , 2022}.</p>
<p><img src="textbook_files/figure-html/correlation%20properties%202-1.png" width="672" /></p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="measures-of-association.html#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(Super_Bowl_Number, Winning_Team_Points)</span></code></pre></div>
<pre><code>## [1] 0.1063479</code></pre>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="measures-of-association.html#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(Super_Bowl_Year, Winning_Team_Points)</span></code></pre></div>
<pre><code>## [1] 0.1063479</code></pre>
<p>The only difference between the two plots is that the x-axis is shifted. Since the change is essentially a linear (location) transformation, the correlations are identical.</p>
<p>Note: The correlations were equal only because there has been a one-to-one relationship between Super Bowl number and year since 1967. Major League Baseball has had years in which no World Series was held (1904 - boycott, 1994 - players’ strike); thus, the same example applied to the MLB would produce slightly different correlation coefficients.</p>
<!-- Q: The correlation coefficient is positive. What does this mean in terms of the trend of number of points scored by Super Bowl winners over time? -->
<!-- A: Winners of more recent Super Bowls are more likely to have scored more points than winners of older Super Bowls. -->
<!-- In a similar way to the example above, the correlation between a basketball player's career field goal attempts and three-pointers made and the correlation between the same player's career FGA and points scored from three-point field goals are exactly the same, due to the scale invariance property of correlation. -->
<!-- Note to Aaron: This could be a good homework exercise. Find data or simulate career FGA and 3PM for basketball players, then show that the two correlations described above are equal. -->
<div style="page-break-after: always;"></div>
</div>
</div>
<div id="association-of-categorical-variables" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Association of Categorical Variables<a href="measures-of-association.html#association-of-categorical-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>While Pearson’s correlations can be used to find associations between categorical variables, there are better measures to be used.</p>
<div class="example">
<p><span id="exm:unlabeled-div-164" class="example"><strong>Example 6.4  </strong></span>(From <em>Analytic Methods in Sports</em>) Suppose we are given the following partial contingency table that tabulates the number of “complete games” for a starting pitcher by league.</p>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
Yes
</th>
<th style="text-align:left;">
No
</th>
<th style="text-align:right;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
NL
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:right;">
2592
</td>
</tr>
<tr>
<td style="text-align:left;">
AL
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:right;">
2268
</td>
</tr>
<tr>
<td style="text-align:left;">
Total
</td>
<td style="text-align:left;">
128
</td>
<td style="text-align:left;">
4732
</td>
<td style="text-align:right;">
4860
</td>
</tr>
</tbody>
</table>
<p>Choose values to give the largest and smallest correlations.</p>
</div>
<p><strong><em>Example 1: Small correlation</em></strong><br />
</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="measures-of-association.html#cb335-1" aria-hidden="true" tabindex="-1"></a>League <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">2592</span>),<span class="fu">rep</span>(<span class="dv">1</span>,<span class="dv">2268</span>))</span>
<span id="cb335-2"><a href="measures-of-association.html#cb335-2" aria-hidden="true" tabindex="-1"></a>Complete <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">4860</span>)</span>
<span id="cb335-3"><a href="measures-of-association.html#cb335-3" aria-hidden="true" tabindex="-1"></a>Complete[<span class="dv">1</span><span class="sc">:</span><span class="dv">68</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb335-4"><a href="measures-of-association.html#cb335-4" aria-hidden="true" tabindex="-1"></a>Complete[<span class="dv">2593</span><span class="sc">:</span>(<span class="dv">2593</span><span class="sc">+</span><span class="dv">59</span>)]<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb335-5"><a href="measures-of-association.html#cb335-5" aria-hidden="true" tabindex="-1"></a>small_corr <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(League,Complete)</span>
<span id="cb335-6"><a href="measures-of-association.html#cb335-6" aria-hidden="true" tabindex="-1"></a>small_corr_table <span class="ot">&lt;-</span> <span class="fu">table</span>(small_corr)</span>
<span id="cb335-7"><a href="measures-of-association.html#cb335-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(small_corr_table) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;NL&quot;</span>,<span class="st">&quot;AL&quot;</span>)</span>
<span id="cb335-8"><a href="measures-of-association.html#cb335-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(small_corr_table) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;No&quot;</span>,<span class="st">&quot;Yes&quot;</span>)</span>
<span id="cb335-9"><a href="measures-of-association.html#cb335-9" aria-hidden="true" tabindex="-1"></a>small_corr_table <span class="ot">&lt;-</span> small_corr_table[,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>)]</span>
<span id="cb335-10"><a href="measures-of-association.html#cb335-10" aria-hidden="true" tabindex="-1"></a>small_corr_table <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T,<span class="at">digits =</span> <span class="dv">3</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Yes
</th>
<th style="text-align:right;">
No
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
NL
</td>
<td style="text-align:right;">
68
</td>
<td style="text-align:right;">
2524
</td>
</tr>
<tr>
<td style="text-align:left;">
AL
</td>
<td style="text-align:right;">
60
</td>
<td style="text-align:right;">
2208
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="measures-of-association.html#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(small_corr) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T,<span class="at">digits =</span> <span class="dv">3</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
League
</th>
<th style="text-align:right;">
Complete
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
League
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
0.001
</td>
</tr>
<tr>
<td style="text-align:left;">
Complete
</td>
<td style="text-align:right;">
0.001
</td>
<td style="text-align:right;">
1.000
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<p><strong><em>Example 2: Large correlation (1)</em></strong><br />
</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="measures-of-association.html#cb337-1" aria-hidden="true" tabindex="-1"></a>Complete <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">4860</span>)</span>
<span id="cb337-2"><a href="measures-of-association.html#cb337-2" aria-hidden="true" tabindex="-1"></a>Complete[<span class="dv">1</span><span class="sc">:</span><span class="dv">128</span>] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb337-3"><a href="measures-of-association.html#cb337-3" aria-hidden="true" tabindex="-1"></a>large_corr1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(League,Complete)</span>
<span id="cb337-4"><a href="measures-of-association.html#cb337-4" aria-hidden="true" tabindex="-1"></a>large_corr1_table <span class="ot">&lt;-</span> <span class="fu">table</span>(large_corr1)</span>
<span id="cb337-5"><a href="measures-of-association.html#cb337-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(large_corr1_table) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;NL&quot;</span>,<span class="st">&quot;AL&quot;</span>)</span>
<span id="cb337-6"><a href="measures-of-association.html#cb337-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(large_corr1_table) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;No&quot;</span>,<span class="st">&quot;Yes&quot;</span>)</span>
<span id="cb337-7"><a href="measures-of-association.html#cb337-7" aria-hidden="true" tabindex="-1"></a>large_corr1_table <span class="ot">&lt;-</span> large_corr1_table[,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>)]</span>
<span id="cb337-8"><a href="measures-of-association.html#cb337-8" aria-hidden="true" tabindex="-1"></a>large_corr1_table <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T,<span class="at">digits =</span> <span class="dv">3</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Yes
</th>
<th style="text-align:right;">
No
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
NL
</td>
<td style="text-align:right;">
128
</td>
<td style="text-align:right;">
2464
</td>
</tr>
<tr>
<td style="text-align:left;">
AL
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2268
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="measures-of-association.html#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(large_corr1) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T,<span class="at">digits =</span> <span class="dv">3</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
League
</th>
<th style="text-align:right;">
Complete
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
League
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
-0.154
</td>
</tr>
<tr>
<td style="text-align:left;">
Complete
</td>
<td style="text-align:right;">
-0.154
</td>
<td style="text-align:right;">
1.000
</td>
</tr>
</tbody>
</table>
<p><strong><em>Example 3: Large correlation (2)</em></strong><br />
</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="measures-of-association.html#cb339-1" aria-hidden="true" tabindex="-1"></a>Complete <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="dv">4860</span>)</span>
<span id="cb339-2"><a href="measures-of-association.html#cb339-2" aria-hidden="true" tabindex="-1"></a>Complete[<span class="dv">2593</span><span class="sc">:</span>(<span class="dv">2593</span><span class="sc">+</span><span class="dv">127</span>)] <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb339-3"><a href="measures-of-association.html#cb339-3" aria-hidden="true" tabindex="-1"></a>large_corr2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(League,Complete)</span>
<span id="cb339-4"><a href="measures-of-association.html#cb339-4" aria-hidden="true" tabindex="-1"></a>large_corr2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(League,Complete)</span>
<span id="cb339-5"><a href="measures-of-association.html#cb339-5" aria-hidden="true" tabindex="-1"></a>large_corr2_table <span class="ot">&lt;-</span> <span class="fu">table</span>(large_corr2)</span>
<span id="cb339-6"><a href="measures-of-association.html#cb339-6" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(large_corr2_table) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;NL&quot;</span>,<span class="st">&quot;AL&quot;</span>)</span>
<span id="cb339-7"><a href="measures-of-association.html#cb339-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(large_corr2_table) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;No&quot;</span>,<span class="st">&quot;Yes&quot;</span>)</span>
<span id="cb339-8"><a href="measures-of-association.html#cb339-8" aria-hidden="true" tabindex="-1"></a>large_corr2_table <span class="ot">&lt;-</span> large_corr2_table[,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>)]</span>
<span id="cb339-9"><a href="measures-of-association.html#cb339-9" aria-hidden="true" tabindex="-1"></a>large_corr2_table <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T,<span class="at">digits =</span> <span class="dv">3</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Yes
</th>
<th style="text-align:right;">
No
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
NL
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2592
</td>
</tr>
<tr>
<td style="text-align:left;">
AL
</td>
<td style="text-align:right;">
128
</td>
<td style="text-align:right;">
2140
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="measures-of-association.html#cb340-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(large_corr2) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T,<span class="at">digits =</span> <span class="dv">3</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
League
</th>
<th style="text-align:right;">
Complete
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
League
</td>
<td style="text-align:right;">
1.000
</td>
<td style="text-align:right;">
0.176
</td>
</tr>
<tr>
<td style="text-align:left;">
Complete
</td>
<td style="text-align:right;">
0.176
</td>
<td style="text-align:right;">
1.000
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div id="odds-ratios" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Odds Ratios<a href="measures-of-association.html#odds-ratios" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> be two binary, categorical variables with the following contingency table.</p>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
Yes
</th>
<th style="text-align:left;">
No
</th>
<th style="text-align:left;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
a
</td>
<td style="text-align:left;">
b
</td>
<td style="text-align:left;">
a+b
</td>
</tr>
<tr>
<td style="text-align:left;">
No
</td>
<td style="text-align:left;">
c
</td>
<td style="text-align:left;">
d
</td>
<td style="text-align:left;">
c+d
</td>
</tr>
<tr>
<td style="text-align:left;">
Total
</td>
<td style="text-align:left;">
a+c
</td>
<td style="text-align:left;">
b+d
</td>
<td style="text-align:left;">
a+b+c+d
</td>
</tr>
</tbody>
</table>
<p>One possible way to measure the association between two binary variables is to look at the odds ratio.</p>
<div class="definition">
<p><span id="def:unlabeled-div-165" class="definition"><strong>Definition 6.2  </strong></span>The odds ratio (OR) is a measure of association between two categorical variables of <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> and is:</p>
<p><span class="math inline">\(OR = \frac{ad}{bc}\)</span></p>
<p><span class="math inline">\(OR &gt; 1\)</span> means that <span class="math inline">\(Y=1\)</span> is more likely when <span class="math inline">\(X=1\)</span> than when <span class="math inline">\(X=0\)</span>.<br />
<span class="math inline">\(OR &lt; 1\)</span> means that <span class="math inline">\(Y=1\)</span> is less likely when <span class="math inline">\(X=1\)</span> than when <span class="math inline">\(X=0\)</span>.<br />
<span class="math inline">\(OR = 1\)</span> means that <span class="math inline">\(Y=1\)</span> is equally likely when <span class="math inline">\(X=1\)</span> than when <span class="math inline">\(X=0\)</span>.</p>
<p><span class="math inline">\(OR\)</span> ranges from 0 to <span class="math inline">\(\infty\)</span></p>
</div>
<p>The odds ratio allows one to compare the relative likelihoods of <span class="math inline">\(Y=1\)</span> given <span class="math inline">\(X=1\)</span> vs. <span class="math inline">\(X=0\)</span>.</p>
<p><span class="math inline">\(\text{Ratio of OR} = \frac{P(Y=1|X=1)/P(Y=0|X=1)}{P(Y=1|X=0)/P(Y=0|X=0)}\)</span></p>
<div class="example">
<p><span id="exm:unlabeled-div-166" class="example"><strong>Example 6.5  </strong></span>The following contingency table summarizes complete games by league during the 2012 MLB season.<br />
</p>
</div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Yes
</th>
<th style="text-align:right;">
No
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
NL
</td>
<td style="text-align:right;">
59
</td>
<td style="text-align:right;">
2533
</td>
</tr>
<tr>
<td style="text-align:left;">
AL
</td>
<td style="text-align:right;">
69
</td>
<td style="text-align:right;">
2199
</td>
</tr>
</tbody>
</table>
<p>Calculate the following:<br />
(a) <span class="math inline">\(P(CG|AL)\)</span><br />
(b) <span class="math inline">\(P(CG|NL)\)</span><br />
(c) <span class="math inline">\(OR(CG)\)</span><br />
</p>
<div style="page-break-after: always;"></div>
</div>
<div id="yules-q" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Yule’s Q<a href="measures-of-association.html#yules-q" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="definition">
<p><span id="def:unlabeled-div-167" class="definition"><strong>Definition 6.3  </strong></span>Yule’s Q is a measure of association between two categorical variables and is defined by:</p>
<p><span class="math inline">\(Q = \frac{OR-1}{OR+1} = \frac{ad-bc}{ad+bc}\)</span></p>
<p><span class="math inline">\(Q\)</span> ranges from -1 to 1, where <span class="math inline">\(Q=0\)</span> implies no relationship between the variables.</p>
<p>Some general guidelines:<br />
<span class="math inline">\(Q=0\)</span>: No association<br />
<span class="math inline">\(|Q| &lt; 0.3\)</span>: Weak association<br />
<span class="math inline">\(0.3 \leq |Q| &lt; 0.5\)</span>: Moderate association<br />
<span class="math inline">\(0.5 \leq |Q| &lt; 1\)</span>: Strong assocation<br />
<span class="math inline">\(|Q|=1\)</span>: Perfect association</p>
</div>
<div class="example">
<p><span id="exm:unlabeled-div-168" class="example"><strong>Example 6.6  </strong></span>Calculate Yule’s Q for the four examples (Examples 1-3 and Actual) and determine if there appears to be an association between and complete games for each of these examples</p>
</div>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-169" class="example"><strong>Example 6.7  </strong></span>(From <em>Analytic Methods in Sports</em>) Rafael Nadal is often considered to be the best clay-court tennis player of all-time. Assess this belief by calculating Yule’s Q for the Nadal’s performances between 2008–2012.</p>
</div>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="measures-of-association.html#cb341-1" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1660</span>,<span class="dv">3658</span>,<span class="dv">5318</span>,<span class="dv">863</span>,<span class="dv">2715</span>,<span class="dv">3578</span>,<span class="dv">2523</span>,<span class="dv">6373</span>,<span class="dv">8896</span>),<span class="at">ncol=</span><span class="dv">3</span>))</span>
<span id="cb341-2"><a href="measures-of-association.html#cb341-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Clay&quot;</span>,<span class="st">&quot;Nonclay&quot;</span>,<span class="st">&quot;Total&quot;</span>)</span>
<span id="cb341-3"><a href="measures-of-association.html#cb341-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Win&quot;</span>,<span class="st">&quot;Loss&quot;</span>,<span class="st">&quot;Total&quot;</span>)</span>
<span id="cb341-4"><a href="measures-of-association.html#cb341-4" aria-hidden="true" tabindex="-1"></a>mat <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Win
</th>
<th style="text-align:right;">
Loss
</th>
<th style="text-align:right;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Clay
</td>
<td style="text-align:right;">
1660
</td>
<td style="text-align:right;">
863
</td>
<td style="text-align:right;">
2523
</td>
</tr>
<tr>
<td style="text-align:left;">
Nonclay
</td>
<td style="text-align:right;">
3658
</td>
<td style="text-align:right;">
2715
</td>
<td style="text-align:right;">
6373
</td>
</tr>
<tr>
<td style="text-align:left;">
Total
</td>
<td style="text-align:right;">
5318
</td>
<td style="text-align:right;">
3578
</td>
<td style="text-align:right;">
8896
</td>
</tr>
</tbody>
</table>
<div class="example">
<p><span id="exm:unlabeled-div-170" class="example"><strong>Example 6.8  </strong></span>(From <em>Analytic Methods in Sports</em>) Does the pass rush have an effect on Tom Brady’s performance? We can turn numerical variables into categories and calculate Yule’s Q to help us answer this question. Use the following table to calculate Yule’s Q and assess the belief that the pass rush affects Brady’s performance. Data is given for the 2009–2012 seasons</p>
</div>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="measures-of-association.html#cb342-1" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">29</span>,<span class="dv">18</span>,<span class="dv">47</span>,<span class="dv">22</span>,<span class="dv">2</span>,<span class="dv">24</span>,<span class="dv">51</span>,<span class="dv">20</span>,<span class="dv">71</span>),<span class="at">ncol=</span><span class="dv">3</span>))</span>
<span id="cb342-2"><a href="measures-of-association.html#cb342-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;0-2 sacks&quot;</span>,<span class="st">&quot;3+ sacks&quot;</span>,<span class="st">&quot;Total&quot;</span>)</span>
<span id="cb342-3"><a href="measures-of-association.html#cb342-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;0-2 TDs&quot;</span>,<span class="st">&quot;3+ TDs&quot;</span>,<span class="st">&quot;Total&quot;</span>)</span>
<span id="cb342-4"><a href="measures-of-association.html#cb342-4" aria-hidden="true" tabindex="-1"></a>mat <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
0-2 TDs
</th>
<th style="text-align:right;">
3+ TDs
</th>
<th style="text-align:right;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
0-2 sacks
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
51
</td>
</tr>
<tr>
<td style="text-align:left;">
3+ sacks
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
20
</td>
</tr>
<tr>
<td style="text-align:left;">
Total
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
71
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
<div id="chi-squared-test-of-independence" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Chi-Squared Test of Independence<a href="measures-of-association.html#chi-squared-test-of-independence" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can formally test whether two categorical variables are related to each other by use of the Chi-Squared Test of Independence.</p>
<div class="theorem">
<p><span id="thm:unlabeled-div-171" class="theorem"><strong>Theorem 6.1  </strong></span>A Chi-Squared Test of Independence (<span class="math inline">\(\chi^2-test\)</span>) between two categorical variables has the test statistic <span class="math inline">\(X^2\)</span> which follows a <span class="math inline">\(\chi^2(df=(r-1)(c-1))\)</span>, where:</p>
<p><span class="math inline">\(X^2 = \sum_{i=1}^r\sum_{j=1}^c\frac{(E_{ij}-O_{ij})^2}{E_{ij}}\)</span></p>
<p><span class="math inline">\(O_{ij}\)</span> is the <span class="math inline">\(i^{th}\)</span> row and <span class="math inline">\(j^{th}\)</span> column observation count and <span class="math inline">\(E_{ij} = \frac{R_i \cdot C_j}{N}\)</span></p>
<p>Note: Sometimes, a Yate’s chi-squared test (or Yate’s correction of continuity) used for 2x2 contingency tables with cell counts under 5. Under this test, the test statistic is:</p>
<p><span class="math inline">\(X^2_{Yates} = \sum_{i=1}^r\sum_{j=1}^c\frac{(|E_{ij}-O_{ij}|-0.5)^2}{E_{ij}}\)</span></p>
</div>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-172" class="example"><strong>Example 6.9  </strong></span>Complete a Chi-Squared Test of Independence for the Tom Brady TDs/Sacks example. Is there evidence of dependence between Touchdowns and Sacks? Explain.</p>
</div>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="measures-of-association.html#cb343-1" aria-hidden="true" tabindex="-1"></a>a1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">TDs=</span><span class="fu">rep</span>(<span class="st">&quot;0-2&quot;</span>,<span class="dv">29</span>),<span class="at">Sacks=</span><span class="fu">rep</span>(<span class="st">&quot;0-2&quot;</span>,<span class="dv">29</span>))</span>
<span id="cb343-2"><a href="measures-of-association.html#cb343-2" aria-hidden="true" tabindex="-1"></a>a2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">TDs=</span><span class="fu">rep</span>(<span class="st">&quot;0-2&quot;</span>,<span class="dv">18</span>),<span class="at">Sacks=</span><span class="fu">rep</span>(<span class="st">&quot;3+&quot;</span>,<span class="dv">18</span>))</span>
<span id="cb343-3"><a href="measures-of-association.html#cb343-3" aria-hidden="true" tabindex="-1"></a>a3 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">TDs=</span><span class="fu">rep</span>(<span class="st">&quot;3+&quot;</span>,<span class="dv">22</span>),<span class="at">Sacks=</span><span class="fu">rep</span>(<span class="st">&quot;0-2&quot;</span>,<span class="dv">22</span>))</span>
<span id="cb343-4"><a href="measures-of-association.html#cb343-4" aria-hidden="true" tabindex="-1"></a>a4 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">TDs=</span><span class="fu">rep</span>(<span class="st">&quot;3+&quot;</span>,<span class="dv">2</span>),<span class="at">Sacks=</span><span class="fu">rep</span>(<span class="st">&quot;3+&quot;</span>,<span class="dv">2</span>))</span>
<span id="cb343-5"><a href="measures-of-association.html#cb343-5" aria-hidden="true" tabindex="-1"></a>brady_data <span class="ot">=</span> <span class="fu">rbind</span>(a1,a2,a3,a4)</span>
<span id="cb343-6"><a href="measures-of-association.html#cb343-6" aria-hidden="true" tabindex="-1"></a><span class="fu">chisq.test</span>(<span class="fu">table</span>(brady_data<span class="sc">$</span>TDs,brady_data<span class="sc">$</span>Sacks))</span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s Chi-squared test with Yates&#39; continuity correction
## 
## data:  table(brady_data$TDs, brady_data$Sacks)
## X-squared = 5.6468, df = 1, p-value = 0.01749</code></pre>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="measures-of-association.html#cb345-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chisq.test</span>(<span class="fu">table</span>(brady_data<span class="sc">$</span>TDs,brady_data<span class="sc">$</span>Sacks),<span class="at">correct =</span> F)</span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s Chi-squared test
## 
## data:  table(brady_data$TDs, brady_data$Sacks)
## X-squared = 7.0499, df = 1, p-value = 0.007927</code></pre>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-173" class="example"><strong>Example 6.10  </strong></span>Complete a Chi-Squared Test of Independence for the AL/NL complete game example. Is there evidence of dependence between League and Complete Games? Explain.</p>
</div>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="measures-of-association.html#cb347-1" aria-hidden="true" tabindex="-1"></a>a1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Complete=</span><span class="fu">rep</span>(<span class="st">&quot;No&quot;</span>,<span class="dv">2533</span>),<span class="at">League=</span><span class="fu">rep</span>(<span class="st">&quot;NL&quot;</span>,<span class="dv">2533</span>))</span>
<span id="cb347-2"><a href="measures-of-association.html#cb347-2" aria-hidden="true" tabindex="-1"></a>a2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Complete=</span><span class="fu">rep</span>(<span class="st">&quot;No&quot;</span>,<span class="dv">2199</span>),<span class="at">League=</span><span class="fu">rep</span>(<span class="st">&quot;AL&quot;</span>,<span class="dv">2199</span>))</span>
<span id="cb347-3"><a href="measures-of-association.html#cb347-3" aria-hidden="true" tabindex="-1"></a>a3 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Complete=</span><span class="fu">rep</span>(<span class="st">&quot;Yes&quot;</span>,<span class="dv">59</span>),<span class="at">League=</span><span class="fu">rep</span>(<span class="st">&quot;NL&quot;</span>,<span class="dv">59</span>))</span>
<span id="cb347-4"><a href="measures-of-association.html#cb347-4" aria-hidden="true" tabindex="-1"></a>a4 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Complete=</span><span class="fu">rep</span>(<span class="st">&quot;Yes&quot;</span>,<span class="dv">69</span>),<span class="at">League=</span><span class="fu">rep</span>(<span class="st">&quot;AL&quot;</span>,<span class="dv">69</span>))</span>
<span id="cb347-5"><a href="measures-of-association.html#cb347-5" aria-hidden="true" tabindex="-1"></a>mlb_data <span class="ot">=</span> <span class="fu">rbind</span>(a1,a2,a3,a4)</span>
<span id="cb347-6"><a href="measures-of-association.html#cb347-6" aria-hidden="true" tabindex="-1"></a><span class="fu">chisq.test</span>(<span class="fu">table</span>(mlb_data<span class="sc">$</span>Complete,mlb_data<span class="sc">$</span>League))</span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s Chi-squared test with Yates&#39; continuity correction
## 
## data:  table(mlb_data$Complete, mlb_data$League)
## X-squared = 2.4777, df = 1, p-value = 0.1155</code></pre>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="measures-of-association.html#cb349-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chisq.test</span>(<span class="fu">table</span>(mlb_data<span class="sc">$</span>Complete,mlb_data<span class="sc">$</span>League),<span class="at">correct=</span>F)</span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s Chi-squared test
## 
## data:  table(mlb_data$Complete, mlb_data$League)
## X-squared = 2.7684, df = 1, p-value = 0.09614</code></pre>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="measures-of-association.html#cb351-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">table</span>(mlb_data<span class="sc">$</span>Complete,mlb_data<span class="sc">$</span>League))</span></code></pre></div>
<pre><code>## Number of cases in table: 4860 
## Number of factors: 2 
## Test for independence of all factors:
##  Chisq = 2.7684, df = 1, p-value = 0.09614</code></pre>
<div style="page-break-after: always;"></div>
</div>
</div>
<div id="rank-correlation" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Rank Correlation<a href="measures-of-association.html#rank-correlation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Rank correlation is a nonparametric method to measure the ordinal association between two different variables. Rank correlation can investigate non-linear relationships between variables and thus measure monotonicity.</p>
<div class="definition">
<p><span id="def:unlabeled-div-174" class="definition"><strong>Definition 6.4  </strong></span><strong><em>Spearman’s rank correlation coefficient</em></strong> or <strong><em>Spearman’s <span class="math inline">\(\rho\)</span></em></strong> is a nonparametric measure of rank correlation and is calculated by:</p>
<p><span class="math inline">\(r_s = \frac{Cov(R(X),R(Y))}{\sigma_{R(X)}\sigma_{R(Y)}}\)</span></p>
<p>That is, the Spearman’s rank correlation coefficient is Pearson’s correlation between the rank values of the two variables.</p>
</div>
<div class="example">
<p><span id="exm:unlabeled-div-175" class="example"><strong>Example 6.11  </strong></span><code>nfl22.csv</code> contains NFL team offense statistics for the 2022 season. Investigate the relationship between PF (points scored for) and RPCT (percentage of offensive plays that were rushes). Calculate the ranks for PF and RPCT and use these values to calculate the Spearman correlation coefficient.</p>
</div>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="measures-of-association.html#cb353-1" aria-hidden="true" tabindex="-1"></a>nfl22 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/nfl22.csv&quot;</span>,<span class="at">show_col_types =</span> F)</span>
<span id="cb353-2"><a href="measures-of-association.html#cb353-2" aria-hidden="true" tabindex="-1"></a>nfl22 <span class="ot">&lt;-</span> nfl22 <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">32</span>)</span>
<span id="cb353-3"><a href="measures-of-association.html#cb353-3" aria-hidden="true" tabindex="-1"></a>nfl22 <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
Rk
</th>
<th style="text-align:left;">
Tm
</th>
<th style="text-align:right;">
G
</th>
<th style="text-align:right;">
PF
</th>
<th style="text-align:right;">
Yds
</th>
<th style="text-align:right;">
Plays
</th>
<th style="text-align:right;">
Pass_Att
</th>
<th style="text-align:right;">
Pass_Yds
</th>
<th style="text-align:right;">
Rush_Att
</th>
<th style="text-align:right;">
Rush_Yds
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Kansas City Chiefs
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
496
</td>
<td style="text-align:right;">
7032
</td>
<td style="text-align:right;">
1094
</td>
<td style="text-align:right;">
651
</td>
<td style="text-align:right;">
5062
</td>
<td style="text-align:right;">
417
</td>
<td style="text-align:right;">
1970
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Philadelphia Eagles
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
477
</td>
<td style="text-align:right;">
6614
</td>
<td style="text-align:right;">
1124
</td>
<td style="text-align:right;">
536
</td>
<td style="text-align:right;">
4105
</td>
<td style="text-align:right;">
544
</td>
<td style="text-align:right;">
2509
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Dallas Cowboys
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
467
</td>
<td style="text-align:right;">
6034
</td>
<td style="text-align:right;">
1114
</td>
<td style="text-align:right;">
556
</td>
<td style="text-align:right;">
3736
</td>
<td style="text-align:right;">
531
</td>
<td style="text-align:right;">
2298
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Buffalo Bills
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
455
</td>
<td style="text-align:right;">
6361
</td>
<td style="text-align:right;">
1037
</td>
<td style="text-align:right;">
574
</td>
<td style="text-align:right;">
4129
</td>
<td style="text-align:right;">
430
</td>
<td style="text-align:right;">
2232
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Detroit Lions
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
453
</td>
<td style="text-align:right;">
6460
</td>
<td style="text-align:right;">
1092
</td>
<td style="text-align:right;">
588
</td>
<td style="text-align:right;">
4281
</td>
<td style="text-align:right;">
480
</td>
<td style="text-align:right;">
2179
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
San Francisco 49ers
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
450
</td>
<td style="text-align:right;">
6216
</td>
<td style="text-align:right;">
1047
</td>
<td style="text-align:right;">
512
</td>
<td style="text-align:right;">
3856
</td>
<td style="text-align:right;">
504
</td>
<td style="text-align:right;">
2360
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
Minnesota Vikings
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
424
</td>
<td style="text-align:right;">
6145
</td>
<td style="text-align:right;">
1123
</td>
<td style="text-align:right;">
672
</td>
<td style="text-align:right;">
4484
</td>
<td style="text-align:right;">
404
</td>
<td style="text-align:right;">
1661
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
Cincinnati Bengals
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
418
</td>
<td style="text-align:right;">
5768
</td>
<td style="text-align:right;">
1053
</td>
<td style="text-align:right;">
610
</td>
<td style="text-align:right;">
4240
</td>
<td style="text-align:right;">
399
</td>
<td style="text-align:right;">
1528
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Seattle Seahawks
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
407
</td>
<td style="text-align:right;">
5976
</td>
<td style="text-align:right;">
1044
</td>
<td style="text-align:right;">
573
</td>
<td style="text-align:right;">
3934
</td>
<td style="text-align:right;">
425
</td>
<td style="text-align:right;">
2042
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
Jacksonville Jaguars
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
404
</td>
<td style="text-align:right;">
6075
</td>
<td style="text-align:right;">
1072
</td>
<td style="text-align:right;">
596
</td>
<td style="text-align:right;">
3959
</td>
<td style="text-align:right;">
448
</td>
<td style="text-align:right;">
2116
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="measures-of-association.html#cb354-1" aria-hidden="true" tabindex="-1"></a>nfl22 <span class="ot">&lt;-</span> nfl22 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="st">`</span><span class="at">RPCT</span><span class="st">`</span><span class="ot">=</span><span class="dv">100</span><span class="sc">*</span>Rush_Att<span class="sc">/</span>Plays)</span>
<span id="cb354-2"><a href="measures-of-association.html#cb354-2" aria-hidden="true" tabindex="-1"></a>nfl22 <span class="ot">&lt;-</span> nfl22 <span class="sc">%&gt;%</span> </span>
<span id="cb354-3"><a href="measures-of-association.html#cb354-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PF_Rank =</span> <span class="fu">rank</span>(PF),</span>
<span id="cb354-4"><a href="measures-of-association.html#cb354-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">RPCT_Rank =</span> <span class="fu">rank</span>(RPCT))</span></code></pre></div>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="measures-of-association.html#cb355-1" aria-hidden="true" tabindex="-1"></a>nfl22 <span class="sc">%&gt;%</span> <span class="fu">select</span>(Tm,PF,PF_Rank,RPCT,RPCT_Rank) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T,<span class="at">digits=</span><span class="dv">1</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Tm
</th>
<th style="text-align:right;">
PF
</th>
<th style="text-align:right;">
PF_Rank
</th>
<th style="text-align:right;">
RPCT
</th>
<th style="text-align:right;">
RPCT_Rank
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Kansas City Chiefs
</td>
<td style="text-align:right;">
496
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
38.1
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
Philadelphia Eagles
</td>
<td style="text-align:right;">
477
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
48.4
</td>
<td style="text-align:right;">
27
</td>
</tr>
<tr>
<td style="text-align:left;">
Dallas Cowboys
</td>
<td style="text-align:right;">
467
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
47.7
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
Buffalo Bills
</td>
<td style="text-align:right;">
455
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
41.5
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
Detroit Lions
</td>
<td style="text-align:right;">
453
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
44.0
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
San Francisco 49ers
</td>
<td style="text-align:right;">
450
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
48.1
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
Minnesota Vikings
</td>
<td style="text-align:right;">
424
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
36.0
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
Cincinnati Bengals
</td>
<td style="text-align:right;">
418
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
37.9
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
Seattle Seahawks
</td>
<td style="text-align:right;">
407
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
40.7
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
Jacksonville Jaguars
</td>
<td style="text-align:right;">
404
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
41.8
</td>
<td style="text-align:right;">
16
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="measures-of-association.html#cb356-1" aria-hidden="true" tabindex="-1"></a>nfl22 <span class="sc">%&gt;%</span> <span class="fu">select</span>(PF,PF_Rank,RPCT,RPCT_Rank) <span class="sc">%&gt;%</span> <span class="fu">cor</span>(<span class="at">method =</span> <span class="st">&quot;pearson&quot;</span>)</span></code></pre></div>
<pre><code>##                      PF      PF_Rank        RPCT    RPCT_Rank
## PF         1.0000000000  0.988409408 -0.02501179 0.0008416183
## PF_Rank    0.9884094078  1.000000000 -0.01187428 0.0097158572
## RPCT      -0.0250117927 -0.011874280  1.00000000 0.9759711461
## RPCT_Rank  0.0008416183  0.009715857  0.97597115 1.0000000000</code></pre>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="measures-of-association.html#cb358-1" aria-hidden="true" tabindex="-1"></a>nfl22 <span class="sc">%&gt;%</span> <span class="fu">select</span>(PF,PF_Rank,RPCT,RPCT_Rank) <span class="sc">%&gt;%</span> <span class="fu">cor</span>(<span class="at">method =</span> <span class="st">&quot;spearman&quot;</span>)</span></code></pre></div>
<pre><code>##                    PF     PF_Rank        RPCT   RPCT_Rank
## PF        1.000000000 1.000000000 0.009715857 0.009715857
## PF_Rank   1.000000000 1.000000000 0.009715857 0.009715857
## RPCT      0.009715857 0.009715857 1.000000000 1.000000000
## RPCT_Rank 0.009715857 0.009715857 1.000000000 1.000000000</code></pre>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-176" class="example"><strong>Example 6.12  </strong></span>Investigate the relationship between PPG (points per game), RYPG (rushing yards per game), and PYPG (passing yards per game) using Spearman’s rank correlation coefficient.</p>
</div>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="measures-of-association.html#cb360-1" aria-hidden="true" tabindex="-1"></a>nfl22 <span class="ot">&lt;-</span> nfl22 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">PPG=</span>PF<span class="sc">/</span>G,<span class="at">RYPG=</span>Rush_Yds<span class="sc">/</span>G,<span class="at">PYPG=</span>Pass_Yds<span class="sc">/</span>G)</span>
<span id="cb360-2"><a href="measures-of-association.html#cb360-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb360-3"><a href="measures-of-association.html#cb360-3" aria-hidden="true" tabindex="-1"></a>nfl22 <span class="sc">%&gt;%</span> <span class="fu">select</span>(PPG,RYPG,PYPG) <span class="sc">%&gt;%</span> <span class="fu">cor</span>(<span class="at">method =</span> <span class="st">&quot;spearman&quot;</span>)</span></code></pre></div>
<pre><code>##            PPG       RYPG       PYPG
## PPG  1.0000000  0.2640264  0.6237052
## RYPG 0.2640264  1.0000000 -0.4310203
## PYPG 0.6237052 -0.4310203  1.0000000</code></pre>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="measures-of-association.html#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb362-2"><a href="measures-of-association.html#cb362-2" aria-hidden="true" tabindex="-1"></a>nfl22 <span class="sc">%&gt;%</span> <span class="fu">select</span>(PPG,RYPG,PYPG) <span class="sc">%&gt;%</span> <span class="fu">ggpairs</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-158-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="serial-correlation" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Serial Correlation<a href="measures-of-association.html#serial-correlation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Another type of correlation that we can utilize to look for patterns in sports data is serial correlation.</p>
<div id="autocorrelation" class="section level3 hasAnchor" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> Autocorrelation<a href="measures-of-association.html#autocorrelation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="definition">
<p><span id="def:unlabeled-div-177" class="definition"><strong>Definition 6.5  </strong></span>The <strong><em>autocorrelation</em></strong> (or <strong><em>serial correlation</em></strong>) of a sequence of outcomes is the Pearson correlation coefficient between successive outcomes or the correlation between outcomes and lag delayed outcomes.</p>
</div>
<div class="example">
<p><span id="exm:unlabeled-div-178" class="example"><strong>Example 6.13  </strong></span>Simulate three sets of Bernoulli trials (zeros and ones) of length 10000. One dataset should exhibit no serial correlation, one should exhibit positive serial correlation, and one should exhibit negative serial correlation.</p>
</div>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="measures-of-association.html#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2023</span>)</span>
<span id="cb363-2"><a href="measures-of-association.html#cb363-2" aria-hidden="true" tabindex="-1"></a>len <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb363-3"><a href="measures-of-association.html#cb363-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Easy to simulate independent Bernoulli trials</span></span>
<span id="cb363-4"><a href="measures-of-association.html#cb363-4" aria-hidden="true" tabindex="-1"></a>corr_none <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),<span class="at">size=</span>len,<span class="at">prob=</span><span class="fu">c</span>(<span class="fl">0.5</span>,<span class="fl">0.5</span>),<span class="at">replace=</span>T)</span>
<span id="cb363-5"><a href="measures-of-association.html#cb363-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb363-6"><a href="measures-of-association.html#cb363-6" aria-hidden="true" tabindex="-1"></a><span class="co"># initialize vectors for other two examples</span></span>
<span id="cb363-7"><a href="measures-of-association.html#cb363-7" aria-hidden="true" tabindex="-1"></a>corr_pos <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,len)</span>
<span id="cb363-8"><a href="measures-of-association.html#cb363-8" aria-hidden="true" tabindex="-1"></a>corr_neg <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span>,len)</span>
<span id="cb363-9"><a href="measures-of-association.html#cb363-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb363-10"><a href="measures-of-association.html#cb363-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Positive serial correlation</span></span>
<span id="cb363-11"><a href="measures-of-association.html#cb363-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Notice that the probability of switching is less than 0.5</span></span>
<span id="cb363-12"><a href="measures-of-association.html#cb363-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10000</span>){</span>
<span id="cb363-13"><a href="measures-of-association.html#cb363-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(i <span class="sc">==</span> <span class="dv">1</span>){</span>
<span id="cb363-14"><a href="measures-of-association.html#cb363-14" aria-hidden="true" tabindex="-1"></a>    corr_pos[i] <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),<span class="at">size=</span><span class="dv">1</span>,<span class="at">prob=</span><span class="fu">c</span>(<span class="fl">0.5</span>,<span class="fl">0.5</span>),<span class="at">replace=</span>T)</span>
<span id="cb363-15"><a href="measures-of-association.html#cb363-15" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb363-16"><a href="measures-of-association.html#cb363-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">runif</span>(<span class="dv">1</span>)<span class="sc">&lt;</span><span class="fl">0.8</span>){</span>
<span id="cb363-17"><a href="measures-of-association.html#cb363-17" aria-hidden="true" tabindex="-1"></a>      corr_pos[i] <span class="ot">&lt;-</span> corr_pos[i<span class="dv">-1</span>]</span>
<span id="cb363-18"><a href="measures-of-association.html#cb363-18" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb363-19"><a href="measures-of-association.html#cb363-19" aria-hidden="true" tabindex="-1"></a>      corr_pos[i] <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">-</span>corr_pos[i<span class="dv">-1</span>]</span>
<span id="cb363-20"><a href="measures-of-association.html#cb363-20" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb363-21"><a href="measures-of-association.html#cb363-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb363-22"><a href="measures-of-association.html#cb363-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb363-23"><a href="measures-of-association.html#cb363-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Negative serial correlation</span></span>
<span id="cb363-24"><a href="measures-of-association.html#cb363-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Notice that the probability of switching is greater than 0.5</span></span>
<span id="cb363-25"><a href="measures-of-association.html#cb363-25" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10000</span>){</span>
<span id="cb363-26"><a href="measures-of-association.html#cb363-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(i <span class="sc">==</span> <span class="dv">1</span>){</span>
<span id="cb363-27"><a href="measures-of-association.html#cb363-27" aria-hidden="true" tabindex="-1"></a>    corr_neg[i] <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),<span class="at">size=</span><span class="dv">1</span>,<span class="at">prob=</span><span class="fu">c</span>(<span class="fl">0.5</span>,<span class="fl">0.5</span>),<span class="at">replace=</span>T)</span>
<span id="cb363-28"><a href="measures-of-association.html#cb363-28" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb363-29"><a href="measures-of-association.html#cb363-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">runif</span>(<span class="dv">1</span>)<span class="sc">&lt;</span><span class="fl">0.2</span>){</span>
<span id="cb363-30"><a href="measures-of-association.html#cb363-30" aria-hidden="true" tabindex="-1"></a>      corr_neg[i] <span class="ot">&lt;-</span> corr_neg[i<span class="dv">-1</span>]</span>
<span id="cb363-31"><a href="measures-of-association.html#cb363-31" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb363-32"><a href="measures-of-association.html#cb363-32" aria-hidden="true" tabindex="-1"></a>      corr_neg[i] <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">-</span>corr_neg[i<span class="dv">-1</span>]</span>
<span id="cb363-33"><a href="measures-of-association.html#cb363-33" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb363-34"><a href="measures-of-association.html#cb363-34" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb363-35"><a href="measures-of-association.html#cb363-35" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="measures-of-association.html#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Look at first 20 values of each sequence</span></span>
<span id="cb364-2"><a href="measures-of-association.html#cb364-2" aria-hidden="true" tabindex="-1"></a>corr_none[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 1 1 0 1 1 0 1 1 0 0 1 1 0 1 0</code></pre>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="measures-of-association.html#cb366-1" aria-hidden="true" tabindex="-1"></a>corr_pos[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]</span></code></pre></div>
<pre><code>##  [1] 0 0 0 0 1 0 0 0 0 0 0 1 1 1 0 0 0 0 0 0</code></pre>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="measures-of-association.html#cb368-1" aria-hidden="true" tabindex="-1"></a>corr_neg[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]</span></code></pre></div>
<pre><code>##  [1] 0 1 0 1 1 1 0 0 1 0 1 0 1 0 1 1 0 1 0 1</code></pre>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="measures-of-association.html#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate mean of each sequence</span></span>
<span id="cb370-2"><a href="measures-of-association.html#cb370-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">mean</span>(corr_none),<span class="fu">mean</span>(corr_pos),<span class="fu">mean</span>(corr_neg))</span></code></pre></div>
<pre><code>## [1] 0.5068 0.5001 0.5006</code></pre>
<p>Note that all three sequences have approximately equal probability of 1 and 0, however, the serial correlation differs between them.</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="measures-of-association.html#cb372-1" aria-hidden="true" tabindex="-1"></a>corr_none <span class="sc">%&gt;%</span> <span class="fu">acf</span>(<span class="at">lag.max =</span> <span class="dv">30</span>,<span class="at">main=</span><span class="st">&quot;Autocorrelation of Sequence 1 (No Corr.)&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-161-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="measures-of-association.html#cb373-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb373-2"><a href="measures-of-association.html#cb373-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb373-3"><a href="measures-of-association.html#cb373-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)</span></code></pre></div>
<pre><code>## Registered S3 method overwritten by &#39;quantmod&#39;:
##   method            from
##   as.zoo.data.frame zoo</code></pre>
<pre><code>## 
## Attaching package: &#39;forecast&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:ggpubr&#39;:
## 
##     gghistogram</code></pre>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="measures-of-association.html#cb377-1" aria-hidden="true" tabindex="-1"></a>corr_none <span class="sc">%&gt;%</span> <span class="fu">ggAcf</span>(<span class="at">lag.max =</span> <span class="dv">10</span>,<span class="at">main=</span><span class="st">&#39;Autocorrelation of Sequence 1 (No Corr.)&#39;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-162-1.png" width="672" /></p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="measures-of-association.html#cb378-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(corr_none,<span class="at">lag.max=</span><span class="dv">10</span>,<span class="at">plot=</span>F)</span></code></pre></div>
<pre><code>## 
## Autocorrelations of series &#39;corr_none&#39;, by lag
## 
##      0      1      2      3      4      5      6      7      8      9     10 
##  1.000  0.007  0.011  0.008  0.009  0.010  0.012  0.011 -0.015  0.000  0.009</code></pre>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="measures-of-association.html#cb380-1" aria-hidden="true" tabindex="-1"></a>corr_pos <span class="sc">%&gt;%</span> <span class="fu">ggAcf</span>(<span class="at">lag.max =</span> <span class="dv">10</span>,<span class="at">main=</span><span class="st">&#39;Autocorrelation of Sequence 2 (Positive Corr.)&#39;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-163-1.png" width="672" /></p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="measures-of-association.html#cb381-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(corr_pos,<span class="at">lag.max=</span><span class="dv">10</span>,<span class="at">plot=</span>F)</span></code></pre></div>
<pre><code>## 
## Autocorrelations of series &#39;corr_pos&#39;, by lag
## 
##      0      1      2      3      4      5      6      7      8      9     10 
##  1.000  0.608  0.375  0.237  0.156  0.104  0.062  0.037  0.023  0.012 -0.008</code></pre>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="measures-of-association.html#cb383-1" aria-hidden="true" tabindex="-1"></a>corr_neg <span class="sc">%&gt;%</span> <span class="fu">ggAcf</span>(<span class="at">lag.max =</span> <span class="dv">10</span>,<span class="at">main=</span><span class="st">&#39;Autocorrelation of Sequence 3 (Negative Corr.)&#39;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-164-1.png" width="672" /></p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="measures-of-association.html#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(corr_neg,<span class="at">lag.max=</span><span class="dv">10</span>,<span class="at">plot=</span>F)</span></code></pre></div>
<pre><code>## 
## Autocorrelations of series &#39;corr_neg&#39;, by lag
## 
##      0      1      2      3      4      5      6      7      8      9     10 
##  1.000 -0.598  0.348 -0.209  0.134 -0.084  0.060 -0.045  0.027 -0.012  0.002</code></pre>
<div style="page-break-after: always;"></div>
</div>
<div id="run-lengths" class="section level3 hasAnchor" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> Run Lengths<a href="measures-of-association.html#run-lengths" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another way to investigate serial correlation is to look at the lengths of “streaks” using the <code>rle</code> function.</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="measures-of-association.html#cb386-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(<span class="fu">table</span>(<span class="fu">rle</span>(corr_none)))</span></code></pre></div>
<pre><code>##       lengths
## values    1    2    3    4    5    6    7    8    9   10   11   12
##      0 1276  604  289  157   66   45   27    9    9    0    1    0
##      1 1219  622  308  150  101   46   20    9    5    2    1    1</code></pre>
<div class="example">
<p><span id="exm:unlabeled-div-179" class="example"><strong>Example 6.14  </strong></span>Which of the three examples has the most “streaks”? How about fewest streaks?</p>
</div>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="measures-of-association.html#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use rle to calculate run lengths</span></span>
<span id="cb388-2"><a href="measures-of-association.html#cb388-2" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(<span class="fu">table</span>(<span class="fu">rle</span>(corr_none)))</span></code></pre></div>
<pre><code>##       lengths
## values    1    2    3    4    5    6    7    8    9   10   11   12
##      0 1276  604  289  157   66   45   27    9    9    0    1    0
##      1 1219  622  308  150  101   46   20    9    5    2    1    1</code></pre>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="measures-of-association.html#cb390-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(<span class="fu">table</span>(<span class="fu">rle</span>(corr_pos)))</span></code></pre></div>
<pre><code>##       lengths
## values   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18
##      0 201 153 119  91  77  69  54  51  27  32  15  19  14   9   9   5   3   6
##      1 193 174 123  99  77  51  50  35  29  33  26  24   9   2   3   7  10   7
##       lengths
## values  19  20  21  22  23  24  25  26  27  29  30  36
##      0   7   2   4   5   1   2   1   1   0   1   1   0
##      1   6   5   3   1   5   2   0   1   1   0   2   1</code></pre>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="measures-of-association.html#cb392-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(<span class="fu">table</span>(<span class="fu">rle</span>(corr_neg)))</span></code></pre></div>
<pre><code>##       lengths
## values    1    2    3    4    5    6    7
##      0 3189  643  137   18    6    1    0
##      1 3169  665  138   19    2    0    1</code></pre>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-180" class="example"><strong>Example 6.15  </strong></span>Examine the autocorrelation function for Joe DiMaggio’s 1941 and 1942 seasons. Also, calculate the length of his streaks that season.</p>
</div>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="measures-of-association.html#cb394-1" aria-hidden="true" tabindex="-1"></a>dimaggio41 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/dimaggio41.csv&quot;</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb394-2"><a href="measures-of-association.html#cb394-2" aria-hidden="true" tabindex="-1"></a>dimaggio41 <span class="ot">&lt;-</span> dimaggio41 <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">139</span>)</span>
<span id="cb394-3"><a href="measures-of-association.html#cb394-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb394-4"><a href="measures-of-association.html#cb394-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create indicator variable for a hit</span></span>
<span id="cb394-5"><a href="measures-of-association.html#cb394-5" aria-hidden="true" tabindex="-1"></a>hit.game41 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(dimaggio41<span class="sc">$</span>H <span class="sc">&gt;</span> <span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb394-6"><a href="measures-of-association.html#cb394-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb394-7"><a href="measures-of-association.html#cb394-7" aria-hidden="true" tabindex="-1"></a>hit.game41 <span class="sc">%&gt;%</span> <span class="fu">ggAcf</span>(<span class="at">lag.max =</span> <span class="dv">10</span>,<span class="at">main=</span><span class="st">&#39;Autocorrelation of DiMaggio 1941 season&#39;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-167-1.png" width="672" /></p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="measures-of-association.html#cb395-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(hit.game41,<span class="at">lag.max=</span><span class="dv">10</span>,<span class="at">plot=</span>F)</span></code></pre></div>
<pre><code>## 
## Autocorrelations of series &#39;hit.game41&#39;, by lag
## 
##      0      1      2      3      4      5      6      7      8      9     10 
##  1.000  0.364  0.070 -0.020  0.125  0.172  0.268  0.120  0.167  0.134  0.190</code></pre>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="measures-of-association.html#cb397-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(<span class="fu">table</span>(<span class="fu">rle</span>(hit.game)))</span></code></pre></div>
<pre><code>##       lengths
## values 1 2 3 4 5 7 8 16 56
##      0 5 4 4 0 0 0 0  0  0
##      1 2 3 2 2 1 1 1  1  1</code></pre>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="measures-of-association.html#cb399-1" aria-hidden="true" tabindex="-1"></a>dimaggio42 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/dimaggio42.csv&quot;</span>)</span>
<span id="cb399-2"><a href="measures-of-association.html#cb399-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-3"><a href="measures-of-association.html#cb399-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create indicator variable for a hit</span></span>
<span id="cb399-4"><a href="measures-of-association.html#cb399-4" aria-hidden="true" tabindex="-1"></a>hit.game42 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(dimaggio42<span class="sc">$</span>H <span class="sc">&gt;</span> <span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb399-5"><a href="measures-of-association.html#cb399-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-6"><a href="measures-of-association.html#cb399-6" aria-hidden="true" tabindex="-1"></a>hit.game42 <span class="sc">%&gt;%</span> <span class="fu">ggAcf</span>(<span class="at">lag.max =</span> <span class="dv">10</span>,<span class="at">main=</span><span class="st">&#39;Autocorrelation of DiMaggio 1942 season&#39;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-168-1.png" width="672" /></p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="measures-of-association.html#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(hit.game42,<span class="at">lag.max=</span><span class="dv">10</span>,<span class="at">plot=</span>F)</span></code></pre></div>
<pre><code>## 
## Autocorrelations of series &#39;hit.game42&#39;, by lag
## 
##      0      1      2      3      4      5      6      7      8      9     10 
##  1.000  0.055 -0.009 -0.098  0.013 -0.007 -0.035 -0.003  0.030 -0.077  0.000</code></pre>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="measures-of-association.html#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(<span class="fu">table</span>(<span class="fu">rle</span>(hit.game)))</span></code></pre></div>
<pre><code>##       lengths
## values 1 2 3 4 5 7 8 16 56
##      0 5 4 4 0 0 0 0  0  0
##      1 2 3 2 2 1 1 1  1  1</code></pre>
<div style="page-break-after: always;"></div>
</div>
<div id="wald-wolfowitz-runs-test" class="section level3 hasAnchor" number="6.4.3">
<h3><span class="header-section-number">6.4.3</span> Wald-Wolfowitz Runs Test<a href="measures-of-association.html#wald-wolfowitz-runs-test" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="theorem">
<p><span id="thm:unlabeled-div-181" class="theorem"><strong>Theorem 6.2  </strong></span>The Wald-Wolfowitz runs test is a nonparametric statistical method for testing the hypothesis of an independent sequence of binary data.</p>
<p><span class="math inline">\(H_0:\)</span> Elements of sequence are mutually independent<br />
<span class="math inline">\(H_a:\)</span> Elements of the sequence are mutually dependent</p>
<p>Let <span class="math inline">\(N_+\)</span> be the number of runs of the indicator/positive values and let <span class="math inline">\(N_-\)</span> be the number of runs of the negative values.</p>
<p>The number of runs, <span class="math inline">\(N = N_+ + N_-\)</span>, is approximately normally distributed with:</p>
<p>Mean: <span class="math inline">\(\mu=\frac{2N_+N_-}{N}+1\)</span><br />
Variance: <span class="math inline">\(\sigma^2 = \frac{2N_+N_-(2N_+N_- - N)}{N^2(N-1)}\)</span></p>
</div>
<div class="example">
<p><span id="exm:unlabeled-div-182" class="example"><strong>Example 6.16  </strong></span>Complete a WW runs test for the three simulated sequences. State the conclusion of the WW hypothesis test.</p>
</div>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="measures-of-association.html#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DescTools)</span>
<span id="cb404-2"><a href="measures-of-association.html#cb404-2" aria-hidden="true" tabindex="-1"></a><span class="fu">RunsTest</span>(corr_none)</span></code></pre></div>
<pre><code>## 
##  Runs Test for Randomness
## 
## data:  corr_none
## z = -0.65166, runs = 4967, m = 4932, n = 5068, p-value = 0.5146
## alternative hypothesis: true number of runs is not equal the expected number</code></pre>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="measures-of-association.html#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="fu">RunsTest</span>(corr_pos)</span></code></pre></div>
<pre><code>## 
##  Runs Test for Randomness
## 
## data:  corr_pos
## z = -60.853, runs = 1958, m = 4999, n = 5001, p-value &lt; 2.2e-16
## alternative hypothesis: true number of runs is not equal the expected number</code></pre>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="measures-of-association.html#cb408-1" aria-hidden="true" tabindex="-1"></a><span class="fu">RunsTest</span>(corr_neg)</span></code></pre></div>
<pre><code>## 
##  Runs Test for Randomness
## 
## data:  corr_neg
## z = 59.733, runs = 7988, m = 4994, n = 5006, p-value &lt; 2.2e-16
## alternative hypothesis: true number of runs is not equal the expected number</code></pre>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-183" class="example"><strong>Example 6.17  </strong></span>Complete a WW runs test for DiMaggio’s 1941 and 1942 seasons. State the conclusion of the WW hypothesis test.</p>
</div>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="measures-of-association.html#cb410-1" aria-hidden="true" tabindex="-1"></a><span class="fu">RunsTest</span>(hit.game41)</span></code></pre></div>
<pre><code>## 
##  Runs Test for Randomness
## 
## data:  hit.game41
## z = -4.2075, runs = 27, m = 25, n = 114, p-value = 2.582e-05
## alternative hypothesis: true number of runs is not equal the expected number</code></pre>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="measures-of-association.html#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="fu">RunsTest</span>(hit.game42)</span></code></pre></div>
<pre><code>## 
##  Runs Test for Randomness
## 
## data:  hit.game42
## z = -0.59874, runs = 55, m = 38, n = 116, p-value = 0.5493
## alternative hypothesis: true number of runs is not equal the expected number</code></pre>
<div style="page-break-after: always;"></div>
</div>
<div id="hot-hand" class="section level3 hasAnchor" number="6.4.4">
<h3><span class="header-section-number">6.4.4</span> Hot Hand<a href="measures-of-association.html#hot-hand" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>(Scorecasting, page 215)</p>
</div>
<div id="streakiness-in-sports" class="section level3 hasAnchor" number="6.4.5">
<h3><span class="header-section-number">6.4.5</span> Streakiness in Sports<a href="measures-of-association.html#streakiness-in-sports" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>(Mathletics, chapter 11, page 105)</p>
<div style="page-break-after: always;"></div>
</div>
</div>
<div id="pythagorean-record" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> Pythagorean Record<a href="measures-of-association.html#pythagorean-record" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Baseball statistican (sabermetrican) Bill James proposed <strong>Pythagorean expectation</strong> to estimate the percentage (or number) of games that a team is expected to win based on the number of runs they score and the number of runs they allow.</p>
<div class="definition">
<p><span id="def:unlabeled-div-184" class="definition"><strong>Definition 6.6  </strong></span>The (basic) <strong><em>Pythagorean expectation</em></strong> for a team’s win percentage and win total are given by the following:</p>
<p><span class="math display">\[\text{Pythagorean Win Pct} = PythWin\% = 100 * \frac{RS^2}{RS^2 + RA^2}\]</span></p>
<p><span class="math display">\[\text{Pythagorean Win Total} = PythWin = N \cdot \frac{RS^2}{RS^2 + RA^2}\]</span></p>
<p>where for a given team, <span class="math inline">\(N\)</span> is the number of games, <span class="math inline">\(RS\)</span> is the number of runs scored, and <span class="math inline">\(RA\)</span> is the number of runs allowed.</p>
<p>Note that <span class="math inline">\(RS\)</span> and <span class="math inline">\(RA\)</span> can be based on season totals or per game averages.</p>
</div>
<div class="example">
<p><span id="exm:unlabeled-div-185" class="example"><strong>Example 6.18  </strong></span>In 2022, the Colorado Rockies baseball team scored an average of 4.3 runs per game and allowed an average of 5.4 runs per game. The Rockies’ record in 2022 was 69-94 (0.420 win pct). Calculate the Pythagorean win percentage and win total. Did the Rockies underperform or overperform based on these results?</p>
</div>
<p><span class="math inline">\(PythWin\% = 100 * \frac{RS^2}{RS^2+RA^2} = \frac{4.3^2}{4.3^2+5.4^2} = 38.8\%\)</span></p>
<p><span class="math inline">\(PythWin\% = N \cdot \frac{RS^2}{RS^2+RA^2} = 162 * \frac{4.3^2}{4.3^2+5.4^2} = 63\)</span></p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="measures-of-association.html#cb414-1" aria-hidden="true" tabindex="-1"></a>( <span class="at">pythwinpct =</span> <span class="dv">100</span><span class="sc">*</span>(<span class="fl">4.3</span><span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span>(<span class="fl">4.3</span><span class="sc">^</span><span class="dv">2</span><span class="fl">+5.4</span><span class="sc">^</span><span class="dv">2</span>) )</span></code></pre></div>
<pre><code>## [1] 38.80378</code></pre>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="measures-of-association.html#cb416-1" aria-hidden="true" tabindex="-1"></a>( <span class="at">pythwins =</span> <span class="dv">162</span><span class="sc">*</span>(<span class="fl">4.3</span><span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span>(<span class="fl">4.3</span><span class="sc">^</span><span class="dv">2</span><span class="fl">+5.4</span><span class="sc">^</span><span class="dv">2</span>) )</span></code></pre></div>
<pre><code>## [1] 62.86212</code></pre>
<div style="page-break-after: always;"></div>
<p>It turns out that we can find a more optimal estimate of Pythagorean wins by using an exponent different from 2.</p>
<p>For example, Baseball Reference <a href="https://www.sports-reference.com/blog/baseball-reference-faqs/">(https://www.sports-reference.com/blog/baseball-reference-faqs/)</a> uses an exponent of 1.83.</p>
<div class="definition">
<p><span id="def:unlabeled-div-186" class="definition"><strong>Definition 6.7  </strong></span>The (general) <strong><em>Pythagorean expectation</em></strong> for a team’s win percentage and win total are given by the following:</p>
<p><span class="math display">\[\text{Pythagorean Win Pct} = PythWin\% = 100 * \frac{RS^n}{RS^2 + RA^n}\]</span></p>
<p><span class="math display">\[\text{Pythagorean Win Total} = PythWin = N \cdot \frac{RS^n}{RS^n + RA^n}\]</span></p>
<p>where for a given team, <span class="math inline">\(N\)</span> is the number of games, <span class="math inline">\(RS\)</span> is the number of runs scored, and <span class="math inline">\(RA\)</span> is the number of runs allowed. <span class="math inline">\(n\)</span> is optimized for predictive accuracy over a large dataset.</p>
</div>
<p>It will be helpful to have a function to find the optimal Pythagorean exponent. Such a function called <code>pyth_opt</code> is given below that minimizes mean squared error. Use <code>plot_flag=1</code> to generate a plot.</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="measures-of-association.html#cb418-1" aria-hidden="true" tabindex="-1"></a>pyth_opt <span class="ot">=</span> <span class="cf">function</span>(RS,RA,WinPct,digits,plot_flag){</span>
<span id="cb418-2"><a href="measures-of-association.html#cb418-2" aria-hidden="true" tabindex="-1"></a>  exps <span class="ot">=</span> <span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">15</span>,<span class="at">by=</span><span class="dv">10</span><span class="sc">^</span>(<span class="sc">-</span>digits))</span>
<span id="cb418-3"><a href="measures-of-association.html#cb418-3" aria-hidden="true" tabindex="-1"></a>  n_exps <span class="ot">=</span> <span class="fu">length</span>(exps)</span>
<span id="cb418-4"><a href="measures-of-association.html#cb418-4" aria-hidden="true" tabindex="-1"></a>  MSE <span class="ot">=</span> <span class="fu">rep</span>(<span class="cn">NA</span>,n_exps)</span>
<span id="cb418-5"><a href="measures-of-association.html#cb418-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n_exps){</span>
<span id="cb418-6"><a href="measures-of-association.html#cb418-6" aria-hidden="true" tabindex="-1"></a>    temp_exp <span class="ot">=</span> exps[i]</span>
<span id="cb418-7"><a href="measures-of-association.html#cb418-7" aria-hidden="true" tabindex="-1"></a>    PyWinPct <span class="ot">=</span> RS<span class="sc">^</span>temp_exp<span class="sc">/</span>(RS<span class="sc">^</span>temp_exp <span class="sc">+</span> RA<span class="sc">^</span>temp_exp)</span>
<span id="cb418-8"><a href="measures-of-association.html#cb418-8" aria-hidden="true" tabindex="-1"></a>    MSE[i] <span class="ot">=</span> <span class="fu">mean</span>((PyWinPct<span class="sc">-</span>WinPct)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb418-9"><a href="measures-of-association.html#cb418-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb418-10"><a href="measures-of-association.html#cb418-10" aria-hidden="true" tabindex="-1"></a>  min_idx <span class="ot">=</span> <span class="fu">which</span>(MSE<span class="sc">==</span><span class="fu">min</span>(MSE))</span>
<span id="cb418-11"><a href="measures-of-association.html#cb418-11" aria-hidden="true" tabindex="-1"></a>  pyth_opt <span class="ot">=</span> exps[min_idx]</span>
<span id="cb418-12"><a href="measures-of-association.html#cb418-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb418-13"><a href="measures-of-association.html#cb418-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(plot_flag){</span>
<span id="cb418-14"><a href="measures-of-association.html#cb418-14" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">Exponent=</span>exps,<span class="at">MSE=</span>MSE)</span>
<span id="cb418-15"><a href="measures-of-association.html#cb418-15" aria-hidden="true" tabindex="-1"></a>    df <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Exponent,<span class="at">y=</span>MSE)) <span class="sc">+</span> </span>
<span id="cb418-16"><a href="measures-of-association.html#cb418-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb418-17"><a href="measures-of-association.html#cb418-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>(<span class="at">data=</span>df[min_idx,],<span class="at">color=</span><span class="st">&quot;blue&quot;</span>)  <span class="sc">+</span></span>
<span id="cb418-18"><a href="measures-of-association.html#cb418-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_label</span>(<span class="at">data =</span> df[min_idx,],</span>
<span id="cb418-19"><a href="measures-of-association.html#cb418-19" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">aes</span>(<span class="at">x =</span> Exponent, <span class="at">y =</span> MSE, <span class="at">label =</span> Exponent),<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.5</span>)</span>
<span id="cb418-20"><a href="measures-of-association.html#cb418-20" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb418-21"><a href="measures-of-association.html#cb418-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(pyth_opt)</span>
<span id="cb418-22"><a href="measures-of-association.html#cb418-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb418-23"><a href="measures-of-association.html#cb418-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb418-24"><a href="measures-of-association.html#cb418-24" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-187" class="example"><strong>Example 6.19  </strong></span>Final season MLB standings and related statistics are given in <code>mlb_2022.csv</code>. Find the optimal value of <span class="math inline">\(n\)</span> that minimizes mean squared error between actual wins and Pythagorean wins.</p>
</div>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="measures-of-association.html#cb419-1" aria-hidden="true" tabindex="-1"></a>mlb_2022 <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/mlb_2022.csv&quot;</span>)</span>
<span id="cb419-2"><a href="measures-of-association.html#cb419-2" aria-hidden="true" tabindex="-1"></a>mlb_2022 <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T,<span class="at">digits =</span> <span class="dv">4</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Team
</th>
<th style="text-align:right;">
W
</th>
<th style="text-align:right;">
L
</th>
<th style="text-align:right;">
W-L%
</th>
<th style="text-align:right;">
R
</th>
<th style="text-align:right;">
RA
</th>
<th style="text-align:right;">
Rdiff
</th>
<th style="text-align:left;">
pythWL
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Los Angeles Dodgers
</td>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
51
</td>
<td style="text-align:right;">
0.685
</td>
<td style="text-align:right;">
5.2
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
2.1
</td>
<td style="text-align:left;">
116-46
</td>
</tr>
<tr>
<td style="text-align:left;">
Houston Astros
</td>
<td style="text-align:right;">
106
</td>
<td style="text-align:right;">
56
</td>
<td style="text-align:right;">
0.654
</td>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:left;">
106-56
</td>
</tr>
<tr>
<td style="text-align:left;">
Atlanta Braves
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:right;">
61
</td>
<td style="text-align:right;">
0.623
</td>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
3.8
</td>
<td style="text-align:right;">
1.1
</td>
<td style="text-align:left;">
100-62
</td>
</tr>
<tr>
<td style="text-align:left;">
New York Mets
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:right;">
61
</td>
<td style="text-align:right;">
0.623
</td>
<td style="text-align:right;">
4.8
</td>
<td style="text-align:right;">
3.7
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:left;">
99-63
</td>
</tr>
<tr>
<td style="text-align:left;">
New York Yankees
</td>
<td style="text-align:right;">
99
</td>
<td style="text-align:right;">
63
</td>
<td style="text-align:right;">
0.611
</td>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
3.5
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:left;">
106-56
</td>
</tr>
<tr>
<td style="text-align:left;">
St. Louis Cardinals
</td>
<td style="text-align:right;">
93
</td>
<td style="text-align:right;">
69
</td>
<td style="text-align:right;">
0.574
</td>
<td style="text-align:right;">
4.8
</td>
<td style="text-align:right;">
3.9
</td>
<td style="text-align:right;">
0.8
</td>
<td style="text-align:left;">
95-67
</td>
</tr>
<tr>
<td style="text-align:left;">
Cleveland Guardians
</td>
<td style="text-align:right;">
92
</td>
<td style="text-align:right;">
70
</td>
<td style="text-align:right;">
0.568
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
3.9
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:left;">
88-74
</td>
</tr>
<tr>
<td style="text-align:left;">
Toronto Blue Jays
</td>
<td style="text-align:right;">
92
</td>
<td style="text-align:right;">
70
</td>
<td style="text-align:right;">
0.568
</td>
<td style="text-align:right;">
4.8
</td>
<td style="text-align:right;">
4.2
</td>
<td style="text-align:right;">
0.6
</td>
<td style="text-align:left;">
91-71
</td>
</tr>
<tr>
<td style="text-align:left;">
Seattle Mariners
</td>
<td style="text-align:right;">
90
</td>
<td style="text-align:right;">
72
</td>
<td style="text-align:right;">
0.556
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
3.8
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:left;">
89-73
</td>
</tr>
<tr>
<td style="text-align:left;">
San Diego Padres
</td>
<td style="text-align:right;">
89
</td>
<td style="text-align:right;">
73
</td>
<td style="text-align:right;">
0.549
</td>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
4.1
</td>
<td style="text-align:right;">
0.3
</td>
<td style="text-align:left;">
86-76
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="measures-of-association.html#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pyth_opt</span>(mlb_2022<span class="sc">$</span>R,mlb_2022<span class="sc">$</span>RA,mlb_2022<span class="sc">$</span><span class="st">`</span><span class="at">W-L%</span><span class="st">`</span>,<span class="dv">2</span>,<span class="dv">1</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-177-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-188" class="example"><strong>Example 6.20  </strong></span>For a more accurate estimate of the optimal Pythagorean exponent, use all MLB final standings data from 2000–2017. This is contained in <code>mlb_standings_long.csv</code>.</p>
</div>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="measures-of-association.html#cb421-1" aria-hidden="true" tabindex="-1"></a>mlb_long <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/mlb_standings_long.csv&quot;</span>)</span>
<span id="cb421-2"><a href="measures-of-association.html#cb421-2" aria-hidden="true" tabindex="-1"></a>mlb_long <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T,<span class="at">digits =</span> <span class="dv">4</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
yearID
</th>
<th style="text-align:left;">
lgID
</th>
<th style="text-align:left;">
teamID
</th>
<th style="text-align:right;">
G
</th>
<th style="text-align:right;">
W
</th>
<th style="text-align:right;">
L
</th>
<th style="text-align:right;">
R
</th>
<th style="text-align:right;">
RA
</th>
<th style="text-align:right;">
RD
</th>
<th style="text-align:right;">
Wpct
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
2000
</td>
<td style="text-align:left;">
AL
</td>
<td style="text-align:left;">
ANA
</td>
<td style="text-align:right;">
162
</td>
<td style="text-align:right;">
82
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
864
</td>
<td style="text-align:right;">
869
</td>
<td style="text-align:right;">
-5
</td>
<td style="text-align:right;">
0.5062
</td>
</tr>
<tr>
<td style="text-align:right;">
2000
</td>
<td style="text-align:left;">
NL
</td>
<td style="text-align:left;">
ARI
</td>
<td style="text-align:right;">
162
</td>
<td style="text-align:right;">
85
</td>
<td style="text-align:right;">
77
</td>
<td style="text-align:right;">
792
</td>
<td style="text-align:right;">
754
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
0.5247
</td>
</tr>
<tr>
<td style="text-align:right;">
2000
</td>
<td style="text-align:left;">
NL
</td>
<td style="text-align:left;">
ATL
</td>
<td style="text-align:right;">
162
</td>
<td style="text-align:right;">
95
</td>
<td style="text-align:right;">
67
</td>
<td style="text-align:right;">
810
</td>
<td style="text-align:right;">
714
</td>
<td style="text-align:right;">
96
</td>
<td style="text-align:right;">
0.5864
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="measures-of-association.html#cb422-1" aria-hidden="true" tabindex="-1"></a>mlb_long <span class="sc">%&gt;%</span> <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T,<span class="at">digits =</span> <span class="dv">4</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
yearID
</th>
<th style="text-align:left;">
lgID
</th>
<th style="text-align:left;">
teamID
</th>
<th style="text-align:right;">
G
</th>
<th style="text-align:right;">
W
</th>
<th style="text-align:right;">
L
</th>
<th style="text-align:right;">
R
</th>
<th style="text-align:right;">
RA
</th>
<th style="text-align:right;">
RD
</th>
<th style="text-align:right;">
Wpct
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
2017
</td>
<td style="text-align:left;">
AL
</td>
<td style="text-align:left;">
TEX
</td>
<td style="text-align:right;">
162
</td>
<td style="text-align:right;">
78
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:right;">
799
</td>
<td style="text-align:right;">
816
</td>
<td style="text-align:right;">
-17
</td>
<td style="text-align:right;">
0.4815
</td>
</tr>
<tr>
<td style="text-align:right;">
2017
</td>
<td style="text-align:left;">
AL
</td>
<td style="text-align:left;">
TOR
</td>
<td style="text-align:right;">
162
</td>
<td style="text-align:right;">
76
</td>
<td style="text-align:right;">
86
</td>
<td style="text-align:right;">
693
</td>
<td style="text-align:right;">
784
</td>
<td style="text-align:right;">
-91
</td>
<td style="text-align:right;">
0.4691
</td>
</tr>
<tr>
<td style="text-align:right;">
2017
</td>
<td style="text-align:left;">
NL
</td>
<td style="text-align:left;">
WAS
</td>
<td style="text-align:right;">
162
</td>
<td style="text-align:right;">
97
</td>
<td style="text-align:right;">
65
</td>
<td style="text-align:right;">
819
</td>
<td style="text-align:right;">
672
</td>
<td style="text-align:right;">
147
</td>
<td style="text-align:right;">
0.5988
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="measures-of-association.html#cb423-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pyth_opt</span>(mlb_long<span class="sc">$</span>R,mlb_long<span class="sc">$</span>RA,mlb_long<span class="sc">$</span>Wpct,<span class="dv">2</span>,<span class="dv">1</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-178-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<p>As previously mentioned, sabermetricans tend to use <strong>PyExp = 1.83 for MLB</strong>.</p>
<div class="example">
<p><span id="exm:unlabeled-div-189" class="example"><strong>Example 6.21  </strong></span>Create a scatterplot to compare Team Wins and Team Pythagorean Wins in 2022 and calculate the correlation.</p>
</div>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="measures-of-association.html#cb424-1" aria-hidden="true" tabindex="-1"></a>mlb_2022 <span class="ot">=</span> mlb_2022 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">PyWins=</span><span class="dv">162</span><span class="sc">*</span>R<span class="sc">^</span><span class="fl">1.83</span><span class="sc">/</span>(R<span class="sc">^</span><span class="fl">1.83</span><span class="sc">+</span>RA<span class="sc">^</span><span class="fl">1.83</span>))</span>
<span id="cb424-2"><a href="measures-of-association.html#cb424-2" aria-hidden="true" tabindex="-1"></a>mlb_2022 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>W,<span class="at">y=</span>PyWins)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Wins&quot;</span>) <span class="sc">+</span> </span>
<span id="cb424-3"><a href="measures-of-association.html#cb424-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept=</span><span class="dv">0</span>, <span class="at">slope=</span><span class="dv">1</span>, <span class="at">color=</span><span class="st">&quot;blue&quot;</span>, <span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-179-1.png" width="672" /></p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="measures-of-association.html#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(mlb_2022<span class="sc">$</span>W,mlb_2022<span class="sc">$</span>PyWins)</span></code></pre></div>
<pre><code>## [1] 0.9764977</code></pre>
<div class="example">
<p><span id="exm:unlabeled-div-190" class="example"><strong>Example 6.22  </strong></span>The Rockies scored 4.31 runs per game and allowed 5.4 runs per game in 2022. Did the Rockies underperform or overperform based on their Pythagorean record?</p>
</div>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="measures-of-association.html#cb427-1" aria-hidden="true" tabindex="-1"></a>mlb_2022 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Team<span class="sc">==</span><span class="st">&quot;Colorado Rockies&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb427-2"><a href="measures-of-association.html#cb427-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PyWins =</span> <span class="dv">162</span><span class="sc">*</span><span class="fl">4.31</span><span class="sc">^</span><span class="fl">1.83</span><span class="sc">/</span>(<span class="fl">4.31</span><span class="sc">^</span><span class="fl">1.83+5.39</span><span class="sc">^</span><span class="fl">1.83</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb427-3"><a href="measures-of-association.html#cb427-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T,<span class="at">digits =</span> <span class="dv">4</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Team
</th>
<th style="text-align:right;">
W
</th>
<th style="text-align:right;">
L
</th>
<th style="text-align:right;">
W-L%
</th>
<th style="text-align:right;">
R
</th>
<th style="text-align:right;">
RA
</th>
<th style="text-align:right;">
Rdiff
</th>
<th style="text-align:left;">
pythWL
</th>
<th style="text-align:right;">
PyWins
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Colorado Rockies
</td>
<td style="text-align:right;">
68
</td>
<td style="text-align:right;">
94
</td>
<td style="text-align:right;">
0.42
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
5.4
</td>
<td style="text-align:right;">
-1.1
</td>
<td style="text-align:left;">
65-97
</td>
<td style="text-align:right;">
64.6548
</td>
</tr>
</tbody>
</table>
<p>The Rockies won 68 games and were expected to win 65 games based on their Pythagorean record. The Rockies outperformed their Pythagorean record.</p>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-191" class="example"><strong>Example 6.23  </strong></span>Calculate the Pythagorean exponent for NFL using 2022 season totals. This data is contained in <code>nfl_2022.csv</code>.</p>
</div>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="measures-of-association.html#cb428-1" aria-hidden="true" tabindex="-1"></a>nfl_2022 <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/nfl_2022.csv&quot;</span>)</span>
<span id="cb428-2"><a href="measures-of-association.html#cb428-2" aria-hidden="true" tabindex="-1"></a>nfl_2022 <span class="sc">%&gt;%</span> </span>
<span id="cb428-3"><a href="measures-of-association.html#cb428-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb428-4"><a href="measures-of-association.html#cb428-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T,<span class="at">digits =</span> <span class="dv">4</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Team
</th>
<th style="text-align:right;">
W
</th>
<th style="text-align:right;">
L
</th>
<th style="text-align:right;">
T
</th>
<th style="text-align:right;">
W-L%
</th>
<th style="text-align:right;">
PF
</th>
<th style="text-align:right;">
PA
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Buffalo Bills*
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.813
</td>
<td style="text-align:right;">
455
</td>
<td style="text-align:right;">
286
</td>
</tr>
<tr>
<td style="text-align:left;">
Miami Dolphins+
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.529
</td>
<td style="text-align:right;">
397
</td>
<td style="text-align:right;">
399
</td>
</tr>
<tr>
<td style="text-align:left;">
New England Patriots
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.471
</td>
<td style="text-align:right;">
364
</td>
<td style="text-align:right;">
347
</td>
</tr>
<tr>
<td style="text-align:left;">
New York Jets
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.412
</td>
<td style="text-align:right;">
296
</td>
<td style="text-align:right;">
316
</td>
</tr>
<tr>
<td style="text-align:left;">
Cincinnati Bengals*
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.750
</td>
<td style="text-align:right;">
418
</td>
<td style="text-align:right;">
322
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="measures-of-association.html#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pyth_opt</span>(nfl_2022<span class="sc">$</span>PF,nfl_2022<span class="sc">$</span>PA,nfl_2022<span class="sc">$</span><span class="st">`</span><span class="at">W-L%</span><span class="st">`</span>,<span class="dv">2</span>,<span class="dv">1</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-182-1.png" width="672" /></p>
<p>For 2022, there is an optimal Pythagorean exponent of 3.38. Using a larger dataset of more seasons will give a better estimate.</p>
<p>Football Outsiders <a href="https://www.footballoutsiders.com/stat-analysis/2017/presenting-adjusted-pythagorean-theorem">(https://www.footballoutsiders.com/stat-analysis/2017/presenting-adjusted-pythagorean-theorem)</a> uses <strong>PyExp = 2.37 for NFL</strong>.</p>
<p>Similar analyses can be done for other sports as well. <strong>PyExp = 13.91 is often used for NBA and PyExp = 2.15 for NHL.</strong></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="inferential-statistics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-acquisition.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/aaron-nielsen/SportsAnalyticsBook/edit/master/06-correlation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["textbook.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
