<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Data Acquisition | Sports Analytics</title>
  <meta name="description" content="Chapter 7 Data Acquisition | Sports Analytics Notes" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Data Acquisition | Sports Analytics" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://aaron-nielsen.github.io/SportsAnalyticsBook/images/csu.png" />
  <meta property="og:description" content="Chapter 7 Data Acquisition | Sports Analytics Notes" />
  <meta name="github-repo" content="aaron-nielsen.github.io/SportsAnalyticsBook/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Data Acquisition | Sports Analytics" />
  
  <meta name="twitter:description" content="Chapter 7 Data Acquisition | Sports Analytics Notes" />
  <meta name="twitter:image" content="https://aaron-nielsen.github.io/SportsAnalyticsBook/images/csu.png" />

<meta name="author" content="Aaron Nielsen, Department of Statistics, Colorado State University" />


<meta name="date" content="2023-01-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="correlation.html"/>
<link rel="next" href="linear-regression.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Sports Analytics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html"><i class="fa fa-check"></i>Preliminaries</a>
<ul>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#getting-started-with-r"><i class="fa fa-check"></i>Getting Started With R</a>
<ul>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#installing-r"><i class="fa fa-check"></i>Installing R</a></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#some-r-basics"><i class="fa fa-check"></i>Some R Basics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#which-sports"><i class="fa fa-check"></i>Which Sports?</a></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#challenges"><i class="fa fa-check"></i>Challenges</a></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#ethical-concerns"><i class="fa fa-check"></i>Ethical Concerns</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>1</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="1.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#descriptive-statistics"><i class="fa fa-check"></i><b>1.1</b> Descriptive Statistics</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#definitions"><i class="fa fa-check"></i><b>1.1.1</b> Definitions</a></li>
<li class="chapter" data-level="1.1.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#descriptive-statistics-1"><i class="fa fa-check"></i><b>1.1.2</b> Descriptive Statistics</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#visualizations"><i class="fa fa-check"></i><b>1.2</b> Visualizations</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#histograms"><i class="fa fa-check"></i><b>1.2.1</b> Histograms</a></li>
<li class="chapter" data-level="1.2.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#bar-plots"><i class="fa fa-check"></i><b>1.2.2</b> Bar Plots</a></li>
<li class="chapter" data-level="1.2.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#scatter-plots"><i class="fa fa-check"></i><b>1.2.3</b> Scatter Plots</a></li>
<li class="chapter" data-level="1.2.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#kable-tables"><i class="fa fa-check"></i><b>1.2.4</b> Kable Tables</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#baseball"><i class="fa fa-check"></i><b>1.3</b> Baseball</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#hitting-statistics"><i class="fa fa-check"></i><b>1.3.1</b> Hitting Statistics</a></li>
<li class="chapter" data-level="1.3.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#pitching-statistics"><i class="fa fa-check"></i><b>1.3.2</b> Pitching Statistics</a></li>
<li class="chapter" data-level="1.3.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#wins-above-replacement"><i class="fa fa-check"></i><b>1.3.3</b> Wins Above Replacement</a></li>
<li class="chapter" data-level="1.3.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#calculating-hitting-statistics"><i class="fa fa-check"></i><b>1.3.4</b> Calculating Hitting Statistics</a></li>
<li class="chapter" data-level="1.3.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#evaluating-pitching-statistics"><i class="fa fa-check"></i><b>1.3.5</b> Evaluating Pitching Statistics</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#football"><i class="fa fa-check"></i><b>1.4</b> Football</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-football-statistics"><i class="fa fa-check"></i><b>1.4.1</b> Basic Football Statistics</a></li>
<li class="chapter" data-level="1.4.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#advanced-football-statistics"><i class="fa fa-check"></i><b>1.4.2</b> Advanced Football Statistics</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basketball"><i class="fa fa-check"></i><b>1.5</b> Basketball</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-basketball-statistics"><i class="fa fa-check"></i><b>1.5.1</b> Basic Basketball Statistics</a></li>
<li class="chapter" data-level="1.5.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#advanced-basketball-statistics"><i class="fa fa-check"></i><b>1.5.2</b> Advanced Basketball Statistics</a></li>
<li class="chapter" data-level="1.5.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#four-factors"><i class="fa fa-check"></i><b>1.5.3</b> Four Factors</a></li>
<li class="chapter" data-level="1.5.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#shot-charts"><i class="fa fa-check"></i><b>1.5.4</b> Shot Charts</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#hockey"><i class="fa fa-check"></i><b>1.6</b> Hockey</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-hockey-statistics"><i class="fa fa-check"></i><b>1.6.1</b> Basic Hockey Statistics</a></li>
<li class="chapter" data-level="1.6.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#advanced-hockey-statistics"><i class="fa fa-check"></i><b>1.6.2</b> Advanced Hockey Statistics</a></li>
<li class="chapter" data-level="1.6.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#actual-vs.-expected-goals"><i class="fa fa-check"></i><b>1.6.3</b> Actual vs. Expected Goals</a></li>
<li class="chapter" data-level="1.6.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#goalie-statistics"><i class="fa fa-check"></i><b>1.6.4</b> Goalie Statistics</a></li>
<li class="chapter" data-level="1.6.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#correlation-plots"><i class="fa fa-check"></i><b>1.6.5</b> Correlation Plots</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#volleyball"><i class="fa fa-check"></i><b>1.7</b> Volleyball</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-volleyball-statistics"><i class="fa fa-check"></i><b>1.7.1</b> Basic Volleyball Statistics</a></li>
<li class="chapter" data-level="1.7.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#scatter-plot"><i class="fa fa-check"></i><b>1.7.2</b> Scatter Plot</a></li>
<li class="chapter" data-level="1.7.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#box-plot"><i class="fa fa-check"></i><b>1.7.3</b> Box Plot</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#soccer"><i class="fa fa-check"></i><b>1.8</b> Soccer</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-soccer-statistics"><i class="fa fa-check"></i><b>1.8.1</b> Basic Soccer Statistics</a></li>
<li class="chapter" data-level="1.8.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#advanced-soccer-statistics"><i class="fa fa-check"></i><b>1.8.2</b> Advanced Soccer Statistics</a></li>
<li class="chapter" data-level="1.8.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#bar-plot"><i class="fa fa-check"></i><b>1.8.3</b> Bar Plot</a></li>
<li class="chapter" data-level="1.8.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#scatter-plot-1"><i class="fa fa-check"></i><b>1.8.4</b> Scatter Plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="probability.html"><a href="probability.html"><i class="fa fa-check"></i><b>2</b> Probability</a>
<ul>
<li class="chapter" data-level="2.1" data-path="probability.html"><a href="probability.html#definitions-1"><i class="fa fa-check"></i><b>2.1</b> Definitions</a></li>
<li class="chapter" data-level="2.2" data-path="probability.html"><a href="probability.html#set-theory"><i class="fa fa-check"></i><b>2.2</b> Set Theory</a></li>
<li class="chapter" data-level="2.3" data-path="probability.html"><a href="probability.html#axioms-properties-and-laws"><i class="fa fa-check"></i><b>2.3</b> Axioms, Properties, and Laws</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="probability.html"><a href="probability.html#axioms-of-probability"><i class="fa fa-check"></i><b>2.3.1</b> Axioms of Probability</a></li>
<li class="chapter" data-level="2.3.2" data-path="probability.html"><a href="probability.html#properties-of-probability"><i class="fa fa-check"></i><b>2.3.2</b> Properties of Probability</a></li>
<li class="chapter" data-level="2.3.3" data-path="probability.html"><a href="probability.html#laws-of-probability"><i class="fa fa-check"></i><b>2.3.3</b> Laws of Probability</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="probability.html"><a href="probability.html#combinatorics"><i class="fa fa-check"></i><b>2.4</b> Combinatorics</a></li>
<li class="chapter" data-level="2.5" data-path="probability.html"><a href="probability.html#random-variables"><i class="fa fa-check"></i><b>2.5</b> Random Variables</a></li>
<li class="chapter" data-level="2.6" data-path="probability.html"><a href="probability.html#common-random-variables"><i class="fa fa-check"></i><b>2.6</b> Common Random Variables</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="probability.html"><a href="probability.html#binomial-rvs"><i class="fa fa-check"></i><b>2.6.1</b> Binomial RVs</a></li>
<li class="chapter" data-level="2.6.2" data-path="probability.html"><a href="probability.html#geometric-rvs"><i class="fa fa-check"></i><b>2.6.2</b> Geometric RVs</a></li>
<li class="chapter" data-level="2.6.3" data-path="probability.html"><a href="probability.html#poisson-rvs"><i class="fa fa-check"></i><b>2.6.3</b> Poisson RVs</a></li>
<li class="chapter" data-level="2.6.4" data-path="probability.html"><a href="probability.html#negative-binomial-rvs"><i class="fa fa-check"></i><b>2.6.4</b> Negative Binomial RVs</a></li>
<li class="chapter" data-level="2.6.5" data-path="probability.html"><a href="probability.html#normal-rvs"><i class="fa fa-check"></i><b>2.6.5</b> Normal RVs</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="probability.html"><a href="probability.html#win-probability-models"><i class="fa fa-check"></i><b>2.7</b> Win Probability Models</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="probability.html"><a href="probability.html#estimating-pregame-win-probability"><i class="fa fa-check"></i><b>2.7.1</b> Estimating Pregame Win Probability</a></li>
<li class="chapter" data-level="2.7.2" data-path="probability.html"><a href="probability.html#estimating-in-game-win-probability"><i class="fa fa-check"></i><b>2.7.2</b> Estimating In-Game Win Probability</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="odds-and-bets.html"><a href="odds-and-bets.html"><i class="fa fa-check"></i><b>3</b> Odds and Bets</a>
<ul>
<li class="chapter" data-level="3.1" data-path="odds-and-bets.html"><a href="odds-and-bets.html#odds"><i class="fa fa-check"></i><b>3.1</b> Odds</a></li>
<li class="chapter" data-level="3.2" data-path="odds-and-bets.html"><a href="odds-and-bets.html#gambling-odds"><i class="fa fa-check"></i><b>3.2</b> Gambling Odds</a></li>
<li class="chapter" data-level="3.3" data-path="odds-and-bets.html"><a href="odds-and-bets.html#types-of-bets"><i class="fa fa-check"></i><b>3.3</b> Types of Bets</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html"><i class="fa fa-check"></i><b>4</b> Monte Carlo Simulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#basics"><i class="fa fa-check"></i><b>4.1</b> Basics</a></li>
<li class="chapter" data-level="4.2" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#estimating-probabilities"><i class="fa fa-check"></i><b>4.2</b> Estimating Probabilities</a></li>
<li class="chapter" data-level="4.3" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#simulating-streaks"><i class="fa fa-check"></i><b>4.3</b> Simulating Streaks</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#winning-streak-simulation"><i class="fa fa-check"></i><b>4.3.1</b> Winning Streak Simulation</a></li>
<li class="chapter" data-level="4.3.2" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#hitting-streak-simulation"><i class="fa fa-check"></i><b>4.3.2</b> Hitting Streak Simulation</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#gambling-simulations"><i class="fa fa-check"></i><b>4.4</b> Gambling Simulations</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#martingale-system"><i class="fa fa-check"></i><b>4.4.1</b> Martingale System</a></li>
<li class="chapter" data-level="4.4.2" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#gamblers-ruin"><i class="fa fa-check"></i><b>4.4.2</b> Gambler’s Ruin</a></li>
<li class="chapter" data-level="4.4.3" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#simulating-a-winning-system"><i class="fa fa-check"></i><b>4.4.3</b> Simulating a Winning System</a></li>
<li class="chapter" data-level="4.4.4" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#using-the-kelly-growth-criterion"><i class="fa fa-check"></i><b>4.4.4</b> Using the Kelly Growth Criterion</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#simulating-censored-data"><i class="fa fa-check"></i><b>4.5</b> Simulating Censored Data</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#tony-gwynn-1994-batting-average-simulation"><i class="fa fa-check"></i><b>4.5.1</b> Tony Gwynn 1994 Batting Average Simulation</a></li>
<li class="chapter" data-level="4.5.2" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#matt-williams-1994-home-run-simulation"><i class="fa fa-check"></i><b>4.5.2</b> Matt Williams 1994 Home Run Simulation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="inferential-statistics.html"><a href="inferential-statistics.html"><i class="fa fa-check"></i><b>5</b> Inferential Statistics</a>
<ul>
<li class="chapter" data-level="5.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#defining-a-population"><i class="fa fa-check"></i><b>5.1</b> Defining a Population</a></li>
<li class="chapter" data-level="5.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#statistical-inference"><i class="fa fa-check"></i><b>5.2</b> Statistical Inference</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#confidence-intervals"><i class="fa fa-check"></i><b>5.2.1</b> Confidence Intervals</a></li>
<li class="chapter" data-level="5.2.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#hypothesis-tests"><i class="fa fa-check"></i><b>5.2.2</b> Hypothesis Tests</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#inference-for-population-mean"><i class="fa fa-check"></i><b>5.3</b> Inference for Population Mean</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#confidence-interval-for-population-mean"><i class="fa fa-check"></i><b>5.3.1</b> Confidence Interval for Population Mean</a></li>
<li class="chapter" data-level="5.3.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#hypothesis-test-for-population-mean"><i class="fa fa-check"></i><b>5.3.2</b> Hypothesis Test for Population Mean</a></li>
<li class="chapter" data-level="5.3.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#test-for-difference-in-means"><i class="fa fa-check"></i><b>5.3.3</b> Test for Difference in Means</a></li>
<li class="chapter" data-level="5.3.4" data-path="inferential-statistics.html"><a href="inferential-statistics.html#confidence-interval-for-difference-in-means"><i class="fa fa-check"></i><b>5.3.4</b> Confidence Interval for Difference in Means</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="inferential-statistics.html"><a href="inferential-statistics.html#inference-for-population-proportion"><i class="fa fa-check"></i><b>5.4</b> Inference for Population Proportion</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#confidence-interval-for-population-proportion"><i class="fa fa-check"></i><b>5.4.1</b> Confidence Interval for Population Proportion</a></li>
<li class="chapter" data-level="5.4.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#test-for-population-proportion"><i class="fa fa-check"></i><b>5.4.2</b> Test for Population Proportion</a></li>
<li class="chapter" data-level="5.4.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#confidence-interval-for-difference-in-proportions"><i class="fa fa-check"></i><b>5.4.3</b> Confidence Interval for Difference in Proportions</a></li>
<li class="chapter" data-level="5.4.4" data-path="inferential-statistics.html"><a href="inferential-statistics.html#test-for-difference-in-proportions"><i class="fa fa-check"></i><b>5.4.4</b> Test for Difference in Proportions</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="inferential-statistics.html"><a href="inferential-statistics.html#bootstrap"><i class="fa fa-check"></i><b>5.5</b> Bootstrap</a></li>
<li class="chapter" data-level="5.6" data-path="inferential-statistics.html"><a href="inferential-statistics.html#margin-of-error-calcuations"><i class="fa fa-check"></i><b>5.6</b> Margin of Error Calcuations</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#moe-for-probabilities"><i class="fa fa-check"></i><b>5.6.1</b> MOE for Probabilities</a></li>
<li class="chapter" data-level="5.6.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#moe-for-averages"><i class="fa fa-check"></i><b>5.6.2</b> MOE for Averages</a></li>
<li class="chapter" data-level="5.6.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#moe-estimation-using-simulation"><i class="fa fa-check"></i><b>5.6.3</b> MOE estimation using simulation</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="inferential-statistics.html"><a href="inferential-statistics.html#one-sample-and-two-sample-t-tests-and-confidence-intervals"><i class="fa fa-check"></i><b>5.7</b> One Sample and Two Sample t-tests and confidence intervals</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="inferential-statistics.html"><a href="inferential-statistics.html#hockey-faceoffs"><i class="fa fa-check"></i><b>5.7.1</b> Hockey Faceoffs</a></li>
<li class="chapter" data-level="5.7.2" data-path="inferential-statistics.html"><a href="inferential-statistics.html#hockey-penalty-scoring"><i class="fa fa-check"></i><b>5.7.2</b> Hockey Penalty Scoring</a></li>
<li class="chapter" data-level="5.7.3" data-path="inferential-statistics.html"><a href="inferential-statistics.html#nfl-overtime-winners"><i class="fa fa-check"></i><b>5.7.3</b> NFL Overtime Winners</a></li>
<li class="chapter" data-level="5.7.4" data-path="inferential-statistics.html"><a href="inferential-statistics.html#icing-the-kicker"><i class="fa fa-check"></i><b>5.7.4</b> Icing the Kicker</a></li>
<li class="chapter" data-level="5.7.5" data-path="inferential-statistics.html"><a href="inferential-statistics.html#example-football-one-vs.-two-point-conversion"><i class="fa fa-check"></i><b>5.7.5</b> Example: Football One vs. Two Point Conversion</a></li>
<li class="chapter" data-level="5.7.6" data-path="inferential-statistics.html"><a href="inferential-statistics.html#two-sample-tests"><i class="fa fa-check"></i><b>5.7.6</b> Two Sample Tests</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="inferential-statistics.html"><a href="inferential-statistics.html#permutation-tests"><i class="fa fa-check"></i><b>5.8</b> Permutation Tests</a></li>
<li class="chapter" data-level="5.9" data-path="inferential-statistics.html"><a href="inferential-statistics.html#bootstrap-1"><i class="fa fa-check"></i><b>5.9</b> Bootstrap</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="correlation.html"><a href="correlation.html"><i class="fa fa-check"></i><b>6</b> Correlation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="correlation.html"><a href="correlation.html#pearsons-correlation-coefficient"><i class="fa fa-check"></i><b>6.1</b> Pearson’s Correlation Coefficient</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="correlation.html"><a href="correlation.html#partial-correlation-and-confounding-variables"><i class="fa fa-check"></i><b>6.1.1</b> Partial Correlation and Confounding Variables</a></li>
<li class="chapter" data-level="6.1.2" data-path="correlation.html"><a href="correlation.html#properties-of-the-linear-correlation-coefficient"><i class="fa fa-check"></i><b>6.1.2</b> Properties of the Linear Correlation Coefficient</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="correlation.html"><a href="correlation.html#rank-correlation"><i class="fa fa-check"></i><b>6.2</b> Rank Correlation</a></li>
<li class="chapter" data-level="6.3" data-path="correlation.html"><a href="correlation.html#autocorrelation"><i class="fa fa-check"></i><b>6.3</b> Autocorrelation</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="correlation.html"><a href="correlation.html#hot-hand"><i class="fa fa-check"></i><b>6.3.1</b> Hot Hand</a></li>
<li class="chapter" data-level="6.3.2" data-path="correlation.html"><a href="correlation.html#streakiness-in-sports"><i class="fa fa-check"></i><b>6.3.2</b> Streakiness in Sports</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="correlation.html"><a href="correlation.html#association-of-categorical-variables"><i class="fa fa-check"></i><b>6.4</b> Association of Categorical Variables</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="correlation.html"><a href="correlation.html#yules-q"><i class="fa fa-check"></i><b>6.4.1</b> Yule’s Q</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-acquisition.html"><a href="data-acquisition.html"><i class="fa fa-check"></i><b>7</b> Data Acquisition</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-acquisition.html"><a href="data-acquisition.html#tabular-data-from-sports-reference"><i class="fa fa-check"></i><b>7.1</b> Tabular Data From Sports Reference</a></li>
<li class="chapter" data-level="7.2" data-path="data-acquisition.html"><a href="data-acquisition.html#downloading-datasets-from-internet"><i class="fa fa-check"></i><b>7.2</b> Downloading Datasets From Internet</a></li>
<li class="chapter" data-level="7.3" data-path="data-acquisition.html"><a href="data-acquisition.html#importing-data-using-r-libraries"><i class="fa fa-check"></i><b>7.3</b> Importing Data Using R Libraries</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="data-acquisition.html"><a href="data-acquisition.html#baseballr-package"><i class="fa fa-check"></i><b>7.3.1</b> BaseballR package</a></li>
<li class="chapter" data-level="7.3.2" data-path="data-acquisition.html"><a href="data-acquisition.html#nflfastr-package"><i class="fa fa-check"></i><b>7.3.2</b> nflfastR package</a></li>
<li class="chapter" data-level="7.3.3" data-path="data-acquisition.html"><a href="data-acquisition.html#hoopr-package"><i class="fa fa-check"></i><b>7.3.3</b> hoopR package</a></li>
<li class="chapter" data-level="7.3.4" data-path="data-acquisition.html"><a href="data-acquisition.html#hockeyr-package"><i class="fa fa-check"></i><b>7.3.4</b> hockeyR package</a></li>
<li class="chapter" data-level="7.3.5" data-path="data-acquisition.html"><a href="data-acquisition.html#worldfootballr"><i class="fa fa-check"></i><b>7.3.5</b> worldfootballR</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>8</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="8.1" data-path="linear-regression.html"><a href="linear-regression.html#simple-linear-regression"><i class="fa fa-check"></i><b>8.1</b> Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="linear-regression.html"><a href="linear-regression.html#pythagorean-records"><i class="fa fa-check"></i><b>8.1.1</b> Pythagorean Records</a></li>
<li class="chapter" data-level="8.1.2" data-path="linear-regression.html"><a href="linear-regression.html#regression-to-the-mean"><i class="fa fa-check"></i><b>8.1.2</b> Regression to the Mean</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="linear-regression.html"><a href="linear-regression.html#variable-transformations"><i class="fa fa-check"></i><b>8.2</b> Variable Transformations</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="linear-regression.html"><a href="linear-regression.html#draft-pick-values"><i class="fa fa-check"></i><b>8.2.1</b> Draft Pick Values</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="linear-regression.html"><a href="linear-regression.html#multiple-linear-regression"><i class="fa fa-check"></i><b>8.3</b> Multiple Linear Regression</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="linear-regression.html"><a href="linear-regression.html#four-factors-and-winning"><i class="fa fa-check"></i><b>8.3.1</b> Four Factors and Winning</a></li>
<li class="chapter" data-level="8.3.2" data-path="linear-regression.html"><a href="linear-regression.html#linear-weights-in-baseball"><i class="fa fa-check"></i><b>8.3.2</b> Linear Weights in Baseball</a></li>
<li class="chapter" data-level="8.3.3" data-path="linear-regression.html"><a href="linear-regression.html#pass-air-yards-regression"><i class="fa fa-check"></i><b>8.3.3</b> Pass Air Yards Regression</a></li>
<li class="chapter" data-level="8.3.4" data-path="linear-regression.html"><a href="linear-regression.html#epl-passing-and-scoring"><i class="fa fa-check"></i><b>8.3.4</b> EPL Passing and Scoring</a></li>
<li class="chapter" data-level="8.3.5" data-path="linear-regression.html"><a href="linear-regression.html#hockey-ppg-vs-toi"><i class="fa fa-check"></i><b>8.3.5</b> Hockey PPG vs TOI</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="linear-regression.html"><a href="linear-regression.html#issues-with-multiyear-data"><i class="fa fa-check"></i><b>8.4</b> Issues with Multiyear Data</a></li>
<li class="chapter" data-level="8.5" data-path="linear-regression.html"><a href="linear-regression.html#interaction"><i class="fa fa-check"></i><b>8.5</b> Interaction</a></li>
<li class="chapter" data-level="8.6" data-path="linear-regression.html"><a href="linear-regression.html#confounding-variables"><i class="fa fa-check"></i><b>8.6</b> Confounding Variables</a></li>
<li class="chapter" data-level="8.7" data-path="linear-regression.html"><a href="linear-regression.html#logistic-regression"><i class="fa fa-check"></i><b>8.7</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="linear-regression.html"><a href="linear-regression.html#sack-and-interception-probability-models"><i class="fa fa-check"></i><b>8.7.1</b> Sack and Interception Probability Models</a></li>
<li class="chapter" data-level="8.7.2" data-path="linear-regression.html"><a href="linear-regression.html#soccer-goal-logistic-model"><i class="fa fa-check"></i><b>8.7.2</b> Soccer Goal Logistic Model</a></li>
<li class="chapter" data-level="8.7.3" data-path="linear-regression.html"><a href="linear-regression.html#field-goal-success"><i class="fa fa-check"></i><b>8.7.3</b> Field Goal Success</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Sports Analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-acquisition" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> Data Acquisition<a href="data-acquisition.html#data-acquisition" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>There are many ways to acquire sports data to analyze in R. These include:</p>
<ul>
<li>Manually typing data into a spreadsheet</li>
<li>Downloading pre-formatted tabular data from <a href="https://www.sports-reference.com/">(https://www.sports-reference.com/)</a></li>
<li>Downloading datasets from various internet sources</li>
<li>Importing data using R libraries</li>
<li>Scraping data from internet websites</li>
</ul>
<p>This chapter will explore these various methods of acquiring data and will also review data visualization and summaries. We will typically use <code>ggplot</code> for visualization and <code>kable</code> for data tables. <a href="http://r-graph-gallery.com/">The R Graph Gallery (http://r-graph-gallery.com/)</a> is a nice resource for visualizations using <code>ggplot</code>.</p>
<div id="tabular-data-from-sports-reference" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Tabular Data From Sports Reference<a href="data-acquisition.html#tabular-data-from-sports-reference" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>All tabular data on <a href="https://www.sports-reference.com/">Sports Reference (https://www.sports-reference.com/)</a> can be easily downloaded though a little bit of data wrangling and cleaning is required to prepare the data.</p>
<p>Once you have navigated to the page that you want to download data from, click <strong>Share &amp; Export</strong>, and select <strong>Get table as CSV (for Excel)</strong>. This will generate comma-separated data that you can copy and paste into your favorite text editor.</p>
<div class="figure">
<img src="images/sports-ref-csv.png" style="width:40.0%" alt="" />
<p class="caption">Get table in CSV format</p>
</div>
<div class="figure">
<img src="images/sports-ref-csv2.png" style="width:80.0%" alt="" />
<p class="caption">Copy data and save as .csv</p>
</div>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-1" class="example"><strong>Example 7.1  </strong></span>Acquire the <strong>Scoring Regular Season</strong> dataset for the Colorado Avalanche 2021–2022 season.</p>
<p>This data is located on this webpage:
<a href="https://www.hockey-reference.com/teams/COL/2022.html">https://www.hockey-reference.com/teams/COL/2022.html</a>.</p>
<p>Once the data has been collected, using data wrangling and cleaning methods to transform the dataset into an easier to use format. Use this dataset to explore the relationship between goals, assists, OPS (offensive point shares), and DPS (defensive point shares).</p>
</div>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-acquisition.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data after collection</span></span>
<span id="cb1-2"><a href="data-acquisition.html#cb1-2" aria-hidden="true" tabindex="-1"></a>avs21 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/avs21.csv&quot;</span>)</span>
<span id="cb1-3"><a href="data-acquisition.html#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="data-acquisition.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Take a look at the first five rows and first five columns</span></span>
<span id="cb1-5"><a href="data-acquisition.html#cb1-5" aria-hidden="true" tabindex="-1"></a>avs21 <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
…1
</th>
<th style="text-align:left;">
…2
</th>
<th style="text-align:left;">
…3
</th>
<th style="text-align:left;">
…4
</th>
<th style="text-align:left;">
…5
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Rk
</td>
<td style="text-align:left;">
Player
</td>
<td style="text-align:left;">
Age
</td>
<td style="text-align:left;">
Pos
</td>
<td style="text-align:left;">
GP
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
Mikko Rantanen
</td>
<td style="text-align:left;">
25
</td>
<td style="text-align:left;">
RW
</td>
<td style="text-align:left;">
75
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
Nathan MacKinnon
</td>
<td style="text-align:left;">
26
</td>
<td style="text-align:left;">
C
</td>
<td style="text-align:left;">
65
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
Nazem Kadri
</td>
<td style="text-align:left;">
31
</td>
<td style="text-align:left;">
C
</td>
<td style="text-align:left;">
71
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
Cale Makar
</td>
<td style="text-align:left;">
23
</td>
<td style="text-align:left;">
D
</td>
<td style="text-align:left;">
77
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data-acquisition.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove unnecessary first row during loading</span></span>
<span id="cb2-2"><a href="data-acquisition.html#cb2-2" aria-hidden="true" tabindex="-1"></a>avs21 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/avs21.csv&quot;</span>,<span class="at">skip =</span> <span class="dv">1</span>)</span>
<span id="cb2-3"><a href="data-acquisition.html#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="data-acquisition.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Select columns of interest</span></span>
<span id="cb2-5"><a href="data-acquisition.html#cb2-5" aria-hidden="true" tabindex="-1"></a>avs21 <span class="ot">&lt;-</span> avs21 <span class="sc">%&gt;%</span> <span class="fu">select</span>(Player,G,A,OPS)</span>
<span id="cb2-6"><a href="data-acquisition.html#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="data-acquisition.html#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Take a look at the first five rows</span></span>
<span id="cb2-8"><a href="data-acquisition.html#cb2-8" aria-hidden="true" tabindex="-1"></a>avs21 <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Player
</th>
<th style="text-align:right;">
G
</th>
<th style="text-align:right;">
A
</th>
<th style="text-align:right;">
OPS
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Mikko Rantanen
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
56
</td>
<td style="text-align:right;">
7.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Nathan MacKinnon
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
56
</td>
<td style="text-align:right;">
7.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Nazem Kadri
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
59
</td>
<td style="text-align:right;">
7.2
</td>
</tr>
<tr>
<td style="text-align:left;">
Cale Makar
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
58
</td>
<td style="text-align:right;">
8.5
</td>
</tr>
<tr>
<td style="text-align:left;">
Andre Burakovsky
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
4.3
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-acquisition.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure to eliminate any extra rows like &quot;Team Totals&quot;</span></span>
<span id="cb3-2"><a href="data-acquisition.html#cb3-2" aria-hidden="true" tabindex="-1"></a>avs21 <span class="ot">&lt;-</span> avs21 <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>()<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb3-3"><a href="data-acquisition.html#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="data-acquisition.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s also remove all players that did not have a goal and an assist</span></span>
<span id="cb3-5"><a href="data-acquisition.html#cb3-5" aria-hidden="true" tabindex="-1"></a>avs21 <span class="ot">&lt;-</span> avs21 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(G<span class="sc">&gt;</span><span class="dv">0</span> <span class="sc">&amp;</span> A <span class="sc">&gt;</span><span class="dv">0</span>)</span></code></pre></div>
<p><strong><em>Histogram</em></strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data-acquisition.html#cb4-1" aria-hidden="true" tabindex="-1"></a>avs21 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>G)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">2</span>,<span class="at">color=</span><span class="st">&quot;white&quot;</span>,<span class="at">fill=</span><span class="st">&quot;steelblue&quot;</span>) <span class="sc">+</span> </span>
<span id="cb4-2"><a href="data-acquisition.html#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Goals&quot;</span>,<span class="at">y=</span><span class="st">&quot;Count&quot;</span>,<span class="at">title=</span><span class="st">&quot;Colorado Avalanche Player Goal Counts, 2021-2022 season&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<p><strong><em>Density plot</em></strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="data-acquisition.html#cb5-1" aria-hidden="true" tabindex="-1"></a>avs21 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>OPS)) <span class="sc">+</span> <span class="fu">geom_density</span>(<span class="at">fill=</span><span class="st">&quot;#6F263D&quot;</span>) <span class="sc">+</span> </span>
<span id="cb5-2"><a href="data-acquisition.html#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Offensive Point Shares (OPS)&quot;</span>,<span class="at">y=</span><span class="st">&quot;Density&quot;</span>,<span class="at">title=</span><span class="st">&quot;Colorado Avalanche Player OPS Density, 2021-2022 season&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<p><strong><em>Scatterplot with Linear Fit</em></strong></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data-acquisition.html#cb6-1" aria-hidden="true" tabindex="-1"></a>avs21 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>G,<span class="at">y=</span>OPS)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb6-2"><a href="data-acquisition.html#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span>lm , <span class="at">fill=</span><span class="st">&quot;steelblue&quot;</span>, <span class="at">color=</span><span class="st">&quot;#6F263D&quot;</span>, <span class="at">se=</span><span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb6-3"><a href="data-acquisition.html#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Goals&quot;</span>,<span class="at">y=</span><span class="st">&quot;Offensive Point Shares (OPS)&quot;</span>,<span class="at">title=</span><span class="st">&quot;Colorado Avalanche Player Goals and OPS, 2021-2022 season&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<p><strong><em>Scatterplot with LOESS Smoother</em></strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="data-acquisition.html#cb7-1" aria-hidden="true" tabindex="-1"></a>avs21 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>A,<span class="at">y=</span>OPS)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.8</span>,<span class="at">color=</span><span class="st">&quot;steelblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-2"><a href="data-acquisition.html#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span>loess, <span class="at">color=</span><span class="st">&quot;#6F263D&quot;</span>, <span class="at">se=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb7-3"><a href="data-acquisition.html#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Assists&quot;</span>,<span class="at">y=</span><span class="st">&quot;Offensive Point Shares (DPS)&quot;</span>,<span class="at">title=</span><span class="st">&quot;Colorado Avalanche Player OPS and DPS, 2021-2022 season&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<p><strong><em>Correlation Matrix Plot</em></strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data-acquisition.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span></code></pre></div>
<pre><code>## Registered S3 method overwritten by &#39;GGally&#39;:
##   method from   
##   +.gg   ggplot2</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-acquisition.html#cb10-1" aria-hidden="true" tabindex="-1"></a>avs21 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Player) <span class="sc">%&gt;%</span> <span class="fu">ggpairs</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="downloading-datasets-from-internet" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Downloading Datasets From Internet<a href="data-acquisition.html#downloading-datasets-from-internet" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We can directly download datasets from the internet if we have a valid url to the datset.</p>
<div class="example">
<p><span id="exm:unlabeled-div-2" class="example"><strong>Example 7.2  </strong></span>Game-by-game data for the CSU volleyball team is available at: <a href="https://aaron-nielsen.github.io/csu_volleyball.csv">https://aaron-nielsen.github.io/csu_volleyball.csv</a></p>
<p>Download this data and create some visualizations.</p>
</div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data-acquisition.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data from URL</span></span>
<span id="cb11-2"><a href="data-acquisition.html#cb11-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://aaron-nielsen.github.io/csu_volleyball.csv&quot;</span></span>
<span id="cb11-3"><a href="data-acquisition.html#cb11-3" aria-hidden="true" tabindex="-1"></a>csu_vb <span class="ot">=</span> <span class="fu">read_csv</span>(url,<span class="at">show_col_types =</span> F)</span>
<span id="cb11-4"><a href="data-acquisition.html#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="data-acquisition.html#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Look at first ten rows and columns</span></span>
<span id="cb11-6"><a href="data-acquisition.html#cb11-6" aria-hidden="true" tabindex="-1"></a>csu_vb <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Date
</th>
<th style="text-align:left;">
Opponent
</th>
<th style="text-align:left;">
W/L
</th>
<th style="text-align:right;">
SP
</th>
<th style="text-align:right;">
K
</th>
<th style="text-align:right;">
E
</th>
<th style="text-align:right;">
TA
</th>
<th style="text-align:right;">
PCT
</th>
<th style="text-align:right;">
AST
</th>
<th style="text-align:right;">
SA
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
8/25/17
</td>
<td style="text-align:left;">
Duke
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
66
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
179
</td>
<td style="text-align:right;">
0.212
</td>
<td style="text-align:right;">
64
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
8/26/17
</td>
<td style="text-align:left;">
Central Florida
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
56
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
126
</td>
<td style="text-align:right;">
0.302
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
8/29/17
</td>
<td style="text-align:left;">
Northern Colorado
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
77
</td>
<td style="text-align:right;">
0.403
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
9/1/17
</td>
<td style="text-align:left;">
vs TCU
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
149
</td>
<td style="text-align:right;">
0.282
</td>
<td style="text-align:right;">
59
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
9/1/17
</td>
<td style="text-align:left;">
vs UNC Asheville
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
0.425
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
9/2/17
</td>
<td style="text-align:left;">
at Florida State
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
48
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
95
</td>
<td style="text-align:right;">
0.379
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
9/8/17
</td>
<td style="text-align:left;">
Ball State
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
59
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
145
</td>
<td style="text-align:right;">
0.241
</td>
<td style="text-align:right;">
56
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
9/8/17
</td>
<td style="text-align:left;">
Michigan
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
48
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:right;">
0.396
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
9/10/17
</td>
<td style="text-align:left;">
Idaho State
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
92
</td>
<td style="text-align:right;">
0.380
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
9/15/17
</td>
<td style="text-align:left;">
UAlbany
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
73
</td>
<td style="text-align:right;">
0.466
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
5
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<p><strong><em>Correlogram</em></strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data-acquisition.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example adapted from: http://r-graph-gallery.com/97-correlation-ellipses.html</span></span>
<span id="cb12-2"><a href="data-acquisition.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb12-3"><a href="data-acquisition.html#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ellipse)</span>
<span id="cb12-4"><a href="data-acquisition.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb12-5"><a href="data-acquisition.html#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="data-acquisition.html#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Use of the mtcars data proposed by R</span></span>
<span id="cb12-7"><a href="data-acquisition.html#cb12-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> csu_vb <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)) <span class="sc">%&gt;%</span> <span class="fu">cor</span>()</span>
<span id="cb12-8"><a href="data-acquisition.html#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="data-acquisition.html#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Build a Pannel of 100 colors with Rcolor Brewer</span></span>
<span id="cb12-10"><a href="data-acquisition.html#cb12-10" aria-hidden="true" tabindex="-1"></a>my_colors <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="dv">5</span>, <span class="st">&quot;Spectral&quot;</span>)</span>
<span id="cb12-11"><a href="data-acquisition.html#cb12-11" aria-hidden="true" tabindex="-1"></a>my_colors <span class="ot">&lt;-</span> <span class="fu">colorRampPalette</span>(my_colors)(<span class="dv">100</span>)</span>
<span id="cb12-12"><a href="data-acquisition.html#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="data-acquisition.html#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Order the correlation matrix</span></span>
<span id="cb12-14"><a href="data-acquisition.html#cb12-14" aria-hidden="true" tabindex="-1"></a>ord <span class="ot">&lt;-</span> <span class="fu">order</span>(data[<span class="dv">1</span>, ])</span>
<span id="cb12-15"><a href="data-acquisition.html#cb12-15" aria-hidden="true" tabindex="-1"></a>data_ord <span class="ot">&lt;-</span> data[ord, ord]</span>
<span id="cb12-16"><a href="data-acquisition.html#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="fu">plotcorr</span>(data_ord, <span class="at">col=</span>my_colors[data_ord<span class="sc">*</span><span class="dv">50</span><span class="sc">+</span><span class="dv">50</span>], <span class="at">mar=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<p><strong><em>Correlation Matrix Plot</em></strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-acquisition.html#cb13-1" aria-hidden="true" tabindex="-1"></a>csu_vb <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="data-acquisition.html#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggcorr</span>(<span class="at">method =</span> <span class="fu">c</span>(<span class="st">&quot;everything&quot;</span>, <span class="st">&quot;pearson&quot;</span>))</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<p><strong><em>Boxplot</em></strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-acquisition.html#cb14-1" aria-hidden="true" tabindex="-1"></a>csu_vb <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="data-acquisition.html#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="st">`</span><span class="at">W/L</span><span class="st">`</span>, <span class="at">y=</span>PCT, <span class="at">fill=</span><span class="st">`</span><span class="at">W/L</span><span class="st">`</span>)) <span class="sc">+</span> </span>
<span id="cb14-3"><a href="data-acquisition.html#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha=</span><span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb14-4"><a href="data-acquisition.html#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-5"><a href="data-acquisition.html#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Match Result&quot;</span>,<span class="at">y=</span><span class="st">&quot;Hitting Percentage&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-6"><a href="data-acquisition.html#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;L&quot;</span>),<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Wins&quot;</span>,<span class="st">&quot;Losses&quot;</span>))</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<p><strong><em>Violin Plot</em></strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data-acquisition.html#cb15-1" aria-hidden="true" tabindex="-1"></a>csu_vb <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="st">`</span><span class="at">W/L</span><span class="st">`</span>, <span class="at">y=</span>PCT, <span class="at">fill=</span><span class="st">`</span><span class="at">W/L</span><span class="st">`</span>)) <span class="sc">+</span> </span>
<span id="cb15-2"><a href="data-acquisition.html#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb15-3"><a href="data-acquisition.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Match Result&quot;</span>,<span class="at">y=</span><span class="st">&quot;Hitting Percentage&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-4"><a href="data-acquisition.html#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;L&quot;</span>),<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Wins&quot;</span>,<span class="st">&quot;Losses&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb15-5"><a href="data-acquisition.html#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="importing-data-using-r-libraries" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Importing Data Using R Libraries<a href="data-acquisition.html#importing-data-using-r-libraries" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="baseballr-package" class="section level3 hasAnchor" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> BaseballR package<a href="data-acquisition.html#baseballr-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>baseballr</code> package allows for scraping data from Baseball Reference, Fangraphs, and Baseball Savant.</p>
<p>For more information, visit: <a href="https://billpetti.github.io/baseballr/">https://billpetti.github.io/baseballr/</a></p>
<div class="example">
<p><span id="exm:unlabeled-div-3" class="example"><strong>Example 7.3  </strong></span>Use the <code>baseballr</code> package to obtain game results for the Colorado Rockies in 2022. Create a Kable Table of the first 20 games.</p>
</div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data-acquisition.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(baseballr)</span>
<span id="cb16-2"><a href="data-acquisition.html#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="data-acquisition.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape data from Baseball Reference</span></span>
<span id="cb16-4"><a href="data-acquisition.html#cb16-4" aria-hidden="true" tabindex="-1"></a>rox22 <span class="ot">&lt;-</span> <span class="fu">bref_team_results</span>(<span class="st">&quot;COL&quot;</span>, <span class="dv">2022</span>)</span>
<span id="cb16-5"><a href="data-acquisition.html#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="data-acquisition.html#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Select relevant columns and display first 20 games</span></span>
<span id="cb16-7"><a href="data-acquisition.html#cb16-7" aria-hidden="true" tabindex="-1"></a>rox22 <span class="sc">%&gt;%</span> </span>
<span id="cb16-8"><a href="data-acquisition.html#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date,H_A,Opp,Result,R,RA,Time,Attendance) <span class="sc">%&gt;%</span> </span>
<span id="cb16-9"><a href="data-acquisition.html#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Date
</th>
<th style="text-align:left;">
H_A
</th>
<th style="text-align:left;">
Opp
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:right;">
R
</th>
<th style="text-align:right;">
RA
</th>
<th style="text-align:left;">
Time
</th>
<th style="text-align:right;">
Attendance
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Friday, Apr 8
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
LAD
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
3:09
</td>
<td style="text-align:right;">
48627
</td>
</tr>
<tr>
<td style="text-align:left;">
Saturday, Apr 9
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
LAD
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2:48
</td>
<td style="text-align:right;">
48087
</td>
</tr>
<tr>
<td style="text-align:left;">
Sunday, Apr 10
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
LAD
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
3:13
</td>
<td style="text-align:right;">
40825
</td>
</tr>
<tr>
<td style="text-align:left;">
Monday, Apr 11
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
TEX
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
4:01
</td>
<td style="text-align:right;">
35052
</td>
</tr>
<tr>
<td style="text-align:left;">
Tuesday, Apr 12
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
TEX
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
3:09
</td>
<td style="text-align:right;">
15862
</td>
</tr>
<tr>
<td style="text-align:left;">
Thursday, Apr 14
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
CHC
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
3:02
</td>
<td style="text-align:right;">
24444
</td>
</tr>
<tr>
<td style="text-align:left;">
Friday, Apr 15
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
CHC
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
3:26
</td>
<td style="text-align:right;">
35450
</td>
</tr>
<tr>
<td style="text-align:left;">
Saturday, Apr 16
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
CHC
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
2:58
</td>
<td style="text-align:right;">
37476
</td>
</tr>
<tr>
<td style="text-align:left;">
Sunday, Apr 17
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
CHC
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
3:19
</td>
<td style="text-align:right;">
36391
</td>
</tr>
<tr>
<td style="text-align:left;">
Monday, Apr 18
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2:53
</td>
<td style="text-align:right;">
20403
</td>
</tr>
<tr>
<td style="text-align:left;">
Tuesday, Apr 19
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
3:02
</td>
<td style="text-align:right;">
23800
</td>
</tr>
<tr>
<td style="text-align:left;">
Wednesday, Apr 20
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
3:09
</td>
<td style="text-align:right;">
21490
</td>
</tr>
<tr>
<td style="text-align:left;">
Saturday, Apr 23 (1)
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
DET
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
3:02
</td>
<td style="text-align:right;">
37566
</td>
</tr>
<tr>
<td style="text-align:left;">
Saturday, Apr 23 (2)
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
DET
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2:47
</td>
<td style="text-align:right;">
28635
</td>
</tr>
<tr>
<td style="text-align:left;">
Sunday, Apr 24
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
DET
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2:55
</td>
<td style="text-align:right;">
20088
</td>
</tr>
<tr>
<td style="text-align:left;">
Monday, Apr 25
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
3:09
</td>
<td style="text-align:right;">
20130
</td>
</tr>
<tr>
<td style="text-align:left;">
Tuesday, Apr 26
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
3:19
</td>
<td style="text-align:right;">
22300
</td>
</tr>
<tr>
<td style="text-align:left;">
Wednesday, Apr 27
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
3:20
</td>
<td style="text-align:right;">
20127
</td>
</tr>
<tr>
<td style="text-align:left;">
Thursday, Apr 28
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
3:08
</td>
<td style="text-align:right;">
20098
</td>
</tr>
<tr>
<td style="text-align:left;">
Friday, Apr 29
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
CIN
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
3:25
</td>
<td style="text-align:right;">
30206
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-4" class="example"><strong>Example 7.4  </strong></span>Use the <code>baseballr</code> packges to obtain the batting leaderboards for MLB in 2022. Create a table with the top ten players in terms of WAR.</p>
</div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-acquisition.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape data from Fangraphs</span></span>
<span id="cb17-2"><a href="data-acquisition.html#cb17-2" aria-hidden="true" tabindex="-1"></a>bat22 <span class="ot">&lt;-</span> <span class="fu">fg_batter_leaders</span>(<span class="at">x =</span> <span class="dv">2022</span>, <span class="at">y =</span> <span class="dv">2022</span>)</span>
<span id="cb17-3"><a href="data-acquisition.html#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="data-acquisition.html#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Select relevant columns</span></span>
<span id="cb17-5"><a href="data-acquisition.html#cb17-5" aria-hidden="true" tabindex="-1"></a>bat22 <span class="ot">=</span> bat22 <span class="sc">%&gt;%</span> </span>
<span id="cb17-6"><a href="data-acquisition.html#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Name,Team,OPS,WPA,wRC,WAR)</span>
<span id="cb17-7"><a href="data-acquisition.html#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="data-acquisition.html#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrange by leaders in WAR and print to a Kable table</span></span>
<span id="cb17-9"><a href="data-acquisition.html#cb17-9" aria-hidden="true" tabindex="-1"></a>bat22 <span class="sc">%&gt;%</span> </span>
<span id="cb17-10"><a href="data-acquisition.html#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(WAR)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-11"><a href="data-acquisition.html#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-12"><a href="data-acquisition.html#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Name
</th>
<th style="text-align:left;">
Team
</th>
<th style="text-align:right;">
OPS
</th>
<th style="text-align:right;">
WPA
</th>
<th style="text-align:right;">
wRC
</th>
<th style="text-align:right;">
WAR
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Aaron Judge
</td>
<td style="text-align:left;">
NYY
</td>
<td style="text-align:right;">
1.111
</td>
<td style="text-align:right;">
7.74
</td>
<td style="text-align:right;">
162
</td>
<td style="text-align:right;">
11.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Manny Machado
</td>
<td style="text-align:left;">
SDP
</td>
<td style="text-align:right;">
0.898
</td>
<td style="text-align:right;">
4.65
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
7.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Nolan Arenado
</td>
<td style="text-align:left;">
STL
</td>
<td style="text-align:right;">
0.891
</td>
<td style="text-align:right;">
2.54
</td>
<td style="text-align:right;">
106
</td>
<td style="text-align:right;">
7.3
</td>
</tr>
<tr>
<td style="text-align:left;">
Paul Goldschmidt
</td>
<td style="text-align:left;">
STL
</td>
<td style="text-align:right;">
0.981
</td>
<td style="text-align:right;">
4.91
</td>
<td style="text-align:right;">
131
</td>
<td style="text-align:right;">
7.1
</td>
</tr>
<tr>
<td style="text-align:left;">
Freddie Freeman
</td>
<td style="text-align:left;">
LAD
</td>
<td style="text-align:right;">
0.918
</td>
<td style="text-align:right;">
2.82
</td>
<td style="text-align:right;">
128
</td>
<td style="text-align:right;">
7.1
</td>
</tr>
<tr>
<td style="text-align:left;">
Francisco Lindor
</td>
<td style="text-align:left;">
NYM
</td>
<td style="text-align:right;">
0.788
</td>
<td style="text-align:right;">
3.76
</td>
<td style="text-align:right;">
99
</td>
<td style="text-align:right;">
6.8
</td>
</tr>
<tr>
<td style="text-align:left;">
Yordan Alvarez
</td>
<td style="text-align:left;">
HOU
</td>
<td style="text-align:right;">
1.019
</td>
<td style="text-align:right;">
5.22
</td>
<td style="text-align:right;">
116
</td>
<td style="text-align:right;">
6.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Jose Altuve
</td>
<td style="text-align:left;">
HOU
</td>
<td style="text-align:right;">
0.921
</td>
<td style="text-align:right;">
2.85
</td>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
6.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Mookie Betts
</td>
<td style="text-align:left;">
LAD
</td>
<td style="text-align:right;">
0.873
</td>
<td style="text-align:right;">
4.44
</td>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
6.6
</td>
</tr>
<tr>
<td style="text-align:left;">
J.T. Realmuto
</td>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:right;">
0.820
</td>
<td style="text-align:right;">
0.38
</td>
<td style="text-align:right;">
84
</td>
<td style="text-align:right;">
6.5
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-5" class="example"><strong>Example 7.5  </strong></span>Using the <code>baseballr</code> package, obtain the top ten leaders for max hit speed along with these players average hit speed, number of barrels, and barrel percent. Present this information in a Kable table.</p>
</div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="data-acquisition.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape Statcast data from Baseball Savant</span></span>
<span id="cb18-2"><a href="data-acquisition.html#cb18-2" aria-hidden="true" tabindex="-1"></a>sc_leader <span class="ot">&lt;-</span> <span class="fu">statcast_leaderboards</span>(<span class="at">leaderboard =</span> <span class="st">&quot;exit_velocity_barrels&quot;</span>,<span class="at">year =</span> <span class="dv">2022</span>)</span>
<span id="cb18-3"><a href="data-acquisition.html#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="data-acquisition.html#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Select relevant columns</span></span>
<span id="cb18-5"><a href="data-acquisition.html#cb18-5" aria-hidden="true" tabindex="-1"></a>sc_leader <span class="sc">%&gt;%</span> </span>
<span id="cb18-6"><a href="data-acquisition.html#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Name =</span> <span class="fu">paste</span>(first_name, last_name),</span>
<span id="cb18-7"><a href="data-acquisition.html#cb18-7" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Max Hit Speed</span><span class="st">`</span> <span class="ot">=</span> max_hit_speed,</span>
<span id="cb18-8"><a href="data-acquisition.html#cb18-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Avg Hit Speed</span><span class="st">`</span> <span class="ot">=</span> avg_hit_speed,</span>
<span id="cb18-9"><a href="data-acquisition.html#cb18-9" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Barrels</span><span class="st">`</span> <span class="ot">=</span> barrels,</span>
<span id="cb18-10"><a href="data-acquisition.html#cb18-10" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Barrel Percent</span><span class="st">`</span> <span class="ot">=</span> brl_percent) <span class="sc">%&gt;%</span></span>
<span id="cb18-11"><a href="data-acquisition.html#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Name,<span class="st">`</span><span class="at">Max Hit Speed</span><span class="st">`</span>,<span class="st">`</span><span class="at">Avg Hit Speed</span><span class="st">`</span>,<span class="st">`</span><span class="at">Barrels</span><span class="st">`</span>,<span class="st">`</span><span class="at">Barrel Percent</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-12"><a href="data-acquisition.html#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">Max Hit Speed</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Name
</th>
<th style="text-align:right;">
Max Hit Speed
</th>
<th style="text-align:right;">
Avg Hit Speed
</th>
<th style="text-align:right;">
Barrels
</th>
<th style="text-align:right;">
Barrel Percent
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Oneil Cruz
</td>
<td style="text-align:right;">
122.4
</td>
<td style="text-align:right;">
91.9
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
15.5
</td>
</tr>
<tr>
<td style="text-align:left;">
Giancarlo Stanton
</td>
<td style="text-align:right;">
119.8
</td>
<td style="text-align:right;">
95.0
</td>
<td style="text-align:right;">
51
</td>
<td style="text-align:right;">
19.3
</td>
</tr>
<tr>
<td style="text-align:left;">
Shohei Ohtani
</td>
<td style="text-align:right;">
119.1
</td>
<td style="text-align:right;">
92.9
</td>
<td style="text-align:right;">
72
</td>
<td style="text-align:right;">
16.8
</td>
</tr>
<tr>
<td style="text-align:left;">
Vladimir Guerrero Jr. 
</td>
<td style="text-align:right;">
118.4
</td>
<td style="text-align:right;">
92.8
</td>
<td style="text-align:right;">
59
</td>
<td style="text-align:right;">
11.2
</td>
</tr>
<tr>
<td style="text-align:left;">
Aaron Judge
</td>
<td style="text-align:right;">
118.4
</td>
<td style="text-align:right;">
95.9
</td>
<td style="text-align:right;">
106
</td>
<td style="text-align:right;">
26.5
</td>
</tr>
<tr>
<td style="text-align:left;">
Luis Robert Jr. 
</td>
<td style="text-align:right;">
117.8
</td>
<td style="text-align:right;">
89.3
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
8.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Yordan Alvarez
</td>
<td style="text-align:right;">
117.4
</td>
<td style="text-align:right;">
95.2
</td>
<td style="text-align:right;">
78
</td>
<td style="text-align:right;">
21.0
</td>
</tr>
<tr>
<td style="text-align:left;">
Christian Yelich
</td>
<td style="text-align:right;">
117.2
</td>
<td style="text-align:right;">
91.5
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
8.2
</td>
</tr>
<tr>
<td style="text-align:left;">
Julio Rodríguez
</td>
<td style="text-align:right;">
117.2
</td>
<td style="text-align:right;">
92.0
</td>
<td style="text-align:right;">
48
</td>
<td style="text-align:right;">
13.1
</td>
</tr>
<tr>
<td style="text-align:left;">
Rowdy Tellez
</td>
<td style="text-align:right;">
116.9
</td>
<td style="text-align:right;">
91.1
</td>
<td style="text-align:right;">
53
</td>
<td style="text-align:right;">
12.9
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<p>This is a useful website for obtaining and visualizing StatCast pitch data:<br />
<a href="https://billpetti.github.io/baseballr/articles/using_statcast_pitch_data.html">https://billpetti.github.io/baseballr/articles/using_statcast_pitch_data.html</a></p>
<div class="example">
<p><span id="exm:unlabeled-div-6" class="example"><strong>Example 7.6  </strong></span>Obtain Shohei Ohtani’s pitch data for the 2022 season. Plot the horizontal and vertical break of the pitches. Also, investigate his fastball velocity by inning.</p>
<p>More about Ohtani’s pitching repertoire: <a href="https://youtu.be/7nZBlYIqEww">https://youtu.be/7nZBlYIqEww</a></p>
<p>More about types of pitches: <a href="https://youtu.be/1FTFWzcgjHE">https://youtu.be/1FTFWzcgjHE</a></p>
</div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data-acquisition.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb19-2"><a href="data-acquisition.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This follows the example at: </span></span>
<span id="cb19-3"><a href="data-acquisition.html#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># https://billpetti.github.io/baseballr/articles/using_statcast_pitch_data.html</span></span>
<span id="cb19-4"><a href="data-acquisition.html#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="data-acquisition.html#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ohtani_id &lt;- baseballr::playerid_lookup(last_name = &quot;Ohtani&quot;, first_name = &quot;Shohei&quot;) %&gt;% </span></span>
<span id="cb19-6"><a href="data-acquisition.html#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   pull(mlbam_id)</span></span>
<span id="cb19-7"><a href="data-acquisition.html#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="data-acquisition.html#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># can get player id for mlbam at: https://razzball.com/mlbamids/</span></span>
<span id="cb19-9"><a href="data-acquisition.html#cb19-9" aria-hidden="true" tabindex="-1"></a>ohtani_id <span class="ot">&lt;-</span> <span class="st">&quot;660271&quot;</span></span>
<span id="cb19-10"><a href="data-acquisition.html#cb19-10" aria-hidden="true" tabindex="-1"></a>ohtani_data <span class="ot">&lt;-</span> baseballr<span class="sc">::</span><span class="fu">statcast_search_pitchers</span>(<span class="at">start_date =</span> <span class="st">&quot;2022-03-01&quot;</span>,</span>
<span id="cb19-11"><a href="data-acquisition.html#cb19-11" aria-hidden="true" tabindex="-1"></a>                                                   <span class="at">end_date =</span> <span class="st">&quot;2022-12-01&quot;</span>,</span>
<span id="cb19-12"><a href="data-acquisition.html#cb19-12" aria-hidden="true" tabindex="-1"></a>                                                   <span class="at">pitcherid =</span> <span class="st">&quot;660271&quot;</span>)</span>
<span id="cb19-13"><a href="data-acquisition.html#cb19-13" aria-hidden="true" tabindex="-1"></a>ohtani_cleaned_data <span class="ot">&lt;-</span> ohtani_data <span class="sc">%&gt;%</span> </span>
<span id="cb19-14"><a href="data-acquisition.html#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Only keep rows with pitch movement readings</span></span>
<span id="cb19-15"><a href="data-acquisition.html#cb19-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># and during the regular season</span></span>
<span id="cb19-16"><a href="data-acquisition.html#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(pfx_x), <span class="sc">!</span><span class="fu">is.na</span>(pfx_z),</span>
<span id="cb19-17"><a href="data-acquisition.html#cb19-17" aria-hidden="true" tabindex="-1"></a>         game_type <span class="sc">==</span> <span class="st">&quot;R&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb19-18"><a href="data-acquisition.html#cb19-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pfx_x_in_pv =</span> <span class="sc">-</span><span class="dv">12</span><span class="sc">*</span>pfx_x,</span>
<span id="cb19-19"><a href="data-acquisition.html#cb19-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">pfx_z_in =</span> <span class="dv">12</span><span class="sc">*</span>pfx_z)</span>
<span id="cb19-20"><a href="data-acquisition.html#cb19-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-21"><a href="data-acquisition.html#cb19-21" aria-hidden="true" tabindex="-1"></a>colors <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="at">n =</span> <span class="dv">6</span>, <span class="at">name =</span> <span class="st">&quot;Dark2&quot;</span>)</span>
<span id="cb19-22"><a href="data-acquisition.html#cb19-22" aria-hidden="true" tabindex="-1"></a>pitch_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;4-Seam Fastball&quot;</span> <span class="ot">=</span> colors[<span class="dv">1</span>],</span>
<span id="cb19-23"><a href="data-acquisition.html#cb19-23" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Sinker&quot;</span> <span class="ot">=</span> colors[<span class="dv">2</span>],</span>
<span id="cb19-24"><a href="data-acquisition.html#cb19-24" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Cutter&quot;</span> <span class="ot">=</span> colors[<span class="dv">3</span>],</span>
<span id="cb19-25"><a href="data-acquisition.html#cb19-25" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Curveball&quot;</span> <span class="ot">=</span> colors[<span class="dv">4</span>],</span>
<span id="cb19-26"><a href="data-acquisition.html#cb19-26" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Slider&quot;</span> <span class="ot">=</span> colors[<span class="dv">5</span>],</span>
<span id="cb19-27"><a href="data-acquisition.html#cb19-27" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Split-Finger&quot;</span> <span class="ot">=</span> colors[<span class="dv">6</span>])</span>
<span id="cb19-28"><a href="data-acquisition.html#cb19-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-29"><a href="data-acquisition.html#cb19-29" aria-hidden="true" tabindex="-1"></a>( ohtani_pitch_types <span class="ot">&lt;-</span> <span class="fu">unique</span>(ohtani_cleaned_data<span class="sc">$</span>pitch_name) )</span></code></pre></div>
<pre><code>## [1] &quot;Slider&quot;          &quot;Curveball&quot;       &quot;Sinker&quot;          &quot;Cutter&quot;         
## [5] &quot;4-Seam Fastball&quot; &quot;Split-Finger&quot;</code></pre>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data-acquisition.html#cb21-1" aria-hidden="true" tabindex="-1"></a>ohtani_cleaned_data <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="data-acquisition.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pfx_x_in_pv, <span class="at">y =</span> pfx_z_in, <span class="at">color =</span> pitch_name)) <span class="sc">+</span></span>
<span id="cb21-3"><a href="data-acquisition.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb21-4"><a href="data-acquisition.html#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb21-5"><a href="data-acquisition.html#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb21-6"><a href="data-acquisition.html#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> pitch_colors,</span>
<span id="cb21-7"><a href="data-acquisition.html#cb21-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> ohtani_pitch_types) <span class="sc">+</span></span>
<span id="cb21-8"><a href="data-acquisition.html#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">25</span>,<span class="dv">25</span>),</span>
<span id="cb21-9"><a href="data-acquisition.html#cb21-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">20</span>,<span class="dv">20</span>, <span class="dv">5</span>),</span>
<span id="cb21-10"><a href="data-acquisition.html#cb21-10" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">number_format</span>(<span class="at">suffix =</span> <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">&quot;</span>)) <span class="sc">+</span></span>
<span id="cb21-11"><a href="data-acquisition.html#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">25</span>,<span class="dv">25</span>),</span>
<span id="cb21-12"><a href="data-acquisition.html#cb21-12" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">20</span>,<span class="dv">20</span>, <span class="dv">5</span>),</span>
<span id="cb21-13"><a href="data-acquisition.html#cb21-13" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">number_format</span>(<span class="at">suffix =</span> <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">&quot;</span>)) <span class="sc">+</span></span>
<span id="cb21-14"><a href="data-acquisition.html#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb21-15"><a href="data-acquisition.html#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Shohei Ohtani Pitch Movement&quot;</span>,</span>
<span id="cb21-16"><a href="data-acquisition.html#cb21-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;2022 MLB Season | Pitcher&#39;s POV&quot;</span>,</span>
<span id="cb21-17"><a href="data-acquisition.html#cb21-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Data: Baseball Savant via baseballr&quot;</span>, </span>
<span id="cb21-18"><a href="data-acquisition.html#cb21-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Horizontal Break&quot;</span>,</span>
<span id="cb21-19"><a href="data-acquisition.html#cb21-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Induced Vertical Break&quot;</span>,</span>
<span id="cb21-20"><a href="data-acquisition.html#cb21-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;Pitch Name&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/r-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data-acquisition.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group pitches by inning</span></span>
<span id="cb22-2"><a href="data-acquisition.html#cb22-2" aria-hidden="true" tabindex="-1"></a>ohtani_velo_by_inning <span class="ot">&lt;-</span> ohtani_cleaned_data <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="data-acquisition.html#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pitch_name <span class="sc">==</span> <span class="st">&quot;4-Seam Fastball&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-4"><a href="data-acquisition.html#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(inning, pitch_name) <span class="sc">%&gt;%</span> </span>
<span id="cb22-5"><a href="data-acquisition.html#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">average_velo =</span> <span class="fu">mean</span>(release_speed, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb22-6"><a href="data-acquisition.html#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="data-acquisition.html#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot average fastball speed by inning</span></span>
<span id="cb22-8"><a href="data-acquisition.html#cb22-8" aria-hidden="true" tabindex="-1"></a>ohtani_velo_by_inning <span class="sc">%&gt;%</span> </span>
<span id="cb22-9"><a href="data-acquisition.html#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> inning, <span class="at">y =</span> average_velo, <span class="at">color =</span> pitch_name)) <span class="sc">+</span></span>
<span id="cb22-10"><a href="data-acquisition.html#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb22-11"><a href="data-acquisition.html#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb22-12"><a href="data-acquisition.html#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> pitch_colors) <span class="sc">+</span></span>
<span id="cb22-13"><a href="data-acquisition.html#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>) <span class="sc">+</span></span>
<span id="cb22-14"><a href="data-acquisition.html#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb22-15"><a href="data-acquisition.html#cb22-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Shohei Ohtani 4-Seam Fastball Velo By Inning&quot;</span>,</span>
<span id="cb22-16"><a href="data-acquisition.html#cb22-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;2022 MLB Season&quot;</span>,</span>
<span id="cb22-17"><a href="data-acquisition.html#cb22-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Data: Baseball Savant via baseballr&quot;</span>,</span>
<span id="cb22-18"><a href="data-acquisition.html#cb22-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Inning&quot;</span>,</span>
<span id="cb22-19"><a href="data-acquisition.html#cb22-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Average Velo&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="nflfastr-package" class="section level3 hasAnchor" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> nflfastR package<a href="data-acquisition.html#nflfastr-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>nflfastR</code> package is a helpful package for obtaining play-by-play and roster data for NFL games.</p>
<p>For more details, see: <a href="https://www.nflfastr.com/articles/nflfastR.html">https://www.nflfastr.com/articles/nflfastR.html</a></p>
<p>For a quick explanation of expected points added, see: <a href="https://youtu.be/qo7-zeJEVzs">https://youtu.be/qo7-zeJEVzs</a></p>
<div class="example">
<p><span id="exm:unlabeled-div-7" class="example"><strong>Example 7.7  </strong></span>Use the <code>nflfastR</code> package to obtain the play-by-play data for the Denver Broncos home game against the San Francisco 49ers during the 2022 season.</p>
</div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data-acquisition.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nflfastR)</span>
<span id="cb23-2"><a href="data-acquisition.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gsisdecoder)</span>
<span id="cb23-3"><a href="data-acquisition.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># First find the game ID by searching Broncos home games in 2022</span></span>
<span id="cb23-4"><a href="data-acquisition.html#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">fast_scraper_schedules</span>(<span class="dv">2022</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="data-acquisition.html#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(home_team<span class="sc">==</span><span class="st">&quot;DEN&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-6"><a href="data-acquisition.html#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(game_id,gameday,away_team,home_team) <span class="sc">%&gt;%</span></span>
<span id="cb23-7"><a href="data-acquisition.html#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
game_id
</th>
<th style="text-align:left;">
gameday
</th>
<th style="text-align:left;">
away_team
</th>
<th style="text-align:left;">
home_team
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2022_02_HOU_DEN
</td>
<td style="text-align:left;">
2022-09-18
</td>
<td style="text-align:left;">
HOU
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
<tr>
<td style="text-align:left;">
2022_03_SF_DEN
</td>
<td style="text-align:left;">
2022-09-25
</td>
<td style="text-align:left;">
SF
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
<tr>
<td style="text-align:left;">
2022_05_IND_DEN
</td>
<td style="text-align:left;">
2022-10-06
</td>
<td style="text-align:left;">
IND
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
<tr>
<td style="text-align:left;">
2022_07_NYJ_DEN
</td>
<td style="text-align:left;">
2022-10-23
</td>
<td style="text-align:left;">
NYJ
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
<tr>
<td style="text-align:left;">
2022_11_LV_DEN
</td>
<td style="text-align:left;">
2022-11-20
</td>
<td style="text-align:left;">
LV
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
<tr>
<td style="text-align:left;">
2022_14_KC_DEN
</td>
<td style="text-align:left;">
2022-12-11
</td>
<td style="text-align:left;">
KC
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
<tr>
<td style="text-align:left;">
2022_15_ARI_DEN
</td>
<td style="text-align:left;">
2022-12-18
</td>
<td style="text-align:left;">
ARI
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
<tr>
<td style="text-align:left;">
2022_18_LAC_DEN
</td>
<td style="text-align:left;">
2023-01-08
</td>
<td style="text-align:left;">
LAC
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data-acquisition.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Scrape data for the specific game and display play-by-play data</span></span>
<span id="cb24-2"><a href="data-acquisition.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">fast_scraper</span>(<span class="st">&quot;2022_03_SF_DEN&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="data-acquisition.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_pbp</span>() <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="data-acquisition.html#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(desc, play_type, ep, epa, home_wp) <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="data-acquisition.html#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-6"><a href="data-acquisition.html#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T,<span class="at">digits =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-7"><a href="data-acquisition.html#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">1</span>, <span class="at">width =</span> <span class="st">&quot;3.5in&quot;</span>)</span></code></pre></div>
<pre><code>## [15:34:32] WARNING: src/learner.cc:553: 
##   If you are loading a serialized model (like pickle in Python, RDS in R) generated by
##   older XGBoost, please export the model by calling `Booster.save_model` from that version
##   first, then load it back in current version. See:
## 
##     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html
## 
##   for more details about differences between saving model and serializing.
## 
## [15:34:32] WARNING: src/learner.cc:553: 
##   If you are loading a serialized model (like pickle in Python, RDS in R) generated by
##   older XGBoost, please export the model by calling `Booster.save_model` from that version
##   first, then load it back in current version. See:
## 
##     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html
## 
##   for more details about differences between saving model and serializing.
## 
## [15:34:32] WARNING: src/learner.cc:553: 
##   If you are loading a serialized model (like pickle in Python, RDS in R) generated by
##   older XGBoost, please export the model by calling `Booster.save_model` from that version
##   first, then load it back in current version. See:
## 
##     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html
## 
##   for more details about differences between saving model and serializing.
## 
## [15:34:32] WARNING: src/learner.cc:553: 
##   If you are loading a serialized model (like pickle in Python, RDS in R) generated by
##   older XGBoost, please export the model by calling `Booster.save_model` from that version
##   first, then load it back in current version. See:
## 
##     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html
## 
##   for more details about differences between saving model and serializing.</code></pre>
<table>
<thead>
<tr>
<th style="text-align:left;">
desc
</th>
<th style="text-align:left;">
play_type
</th>
<th style="text-align:right;">
ep
</th>
<th style="text-align:right;">
epa
</th>
<th style="text-align:right;">
home_wp
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;width: 3.5in; ">
GAME
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
0.770
</td>
<td style="text-align:right;">
0.000
</td>
<td style="text-align:right;">
0.567
</td>
</tr>
<tr>
<td style="text-align:left;width: 3.5in; ">
8-B.McManus kicks 63 yards from DEN 35 to SF 2. 3-R.McCloud to SF 10 for 8 yards (40-J.Strnad).
</td>
<td style="text-align:left;">
kickoff
</td>
<td style="text-align:right;">
0.770
</td>
<td style="text-align:right;">
-1.071
</td>
<td style="text-align:right;">
0.567
</td>
</tr>
<tr>
<td style="text-align:left;width: 3.5in; ">
(14:54) (Shotgun) 22-J.Wilson right tackle to SF 12 for 2 yards (99-D.Williams).
</td>
<td style="text-align:left;">
run
</td>
<td style="text-align:right;">
-0.301
</td>
<td style="text-align:right;">
-0.415
</td>
<td style="text-align:right;">
0.589
</td>
</tr>
<tr>
<td style="text-align:left;width: 3.5in; ">
(14:19) 10-J.Garoppolo pass short left to 19-D.Samuel to SF 25 for 13 yards (21-K.Williams, 22-K.Jackson).
</td>
<td style="text-align:left;">
pass
</td>
<td style="text-align:right;">
-0.716
</td>
<td style="text-align:right;">
1.559
</td>
<td style="text-align:right;">
0.599
</td>
</tr>
<tr>
<td style="text-align:left;width: 3.5in; ">
(13:42) (Shotgun) 19-D.Samuel left tackle to SF 26 for 1 yard (98-M.Purcell).
</td>
<td style="text-align:left;">
run
</td>
<td style="text-align:right;">
0.843
</td>
<td style="text-align:right;">
-0.530
</td>
<td style="text-align:right;">
0.567
</td>
</tr>
<tr>
<td style="text-align:left;width: 3.5in; ">
(13:07) (Shotgun) 10-J.Garoppolo pass incomplete short left to 11-B.Aiyuk (2-P.Surtain).
</td>
<td style="text-align:left;">
pass
</td>
<td style="text-align:right;">
0.313
</td>
<td style="text-align:right;">
-0.752
</td>
<td style="text-align:right;">
0.585
</td>
</tr>
<tr>
<td style="text-align:left;width: 3.5in; ">
(13:01) (Shotgun) 10-J.Garoppolo pass incomplete short middle to 85-G.Kittle (97-Dj.Jones).
</td>
<td style="text-align:left;">
pass
</td>
<td style="text-align:right;">
-0.438
</td>
<td style="text-align:right;">
-1.445
</td>
<td style="text-align:right;">
0.610
</td>
</tr>
<tr>
<td style="text-align:left;width: 3.5in; ">
(12:57) 18-M.Wishnowsky punts 45 yards to DEN 29, Center-46-T.Pepper, out of bounds.
</td>
<td style="text-align:left;">
punt
</td>
<td style="text-align:right;">
-1.884
</td>
<td style="text-align:right;">
0.035
</td>
<td style="text-align:right;">
0.647
</td>
</tr>
<tr>
<td style="text-align:left;width: 3.5in; ">
(12:50) (Shotgun) 3-R.Wilson pass short right to 33-J.Williams to DEN 31 for 2 yards (57-D.Greenlaw).
</td>
<td style="text-align:left;">
pass
</td>
<td style="text-align:right;">
1.849
</td>
<td style="text-align:right;">
-0.587
</td>
<td style="text-align:right;">
0.619
</td>
</tr>
<tr>
<td style="text-align:left;width: 3.5in; ">
(12:24) (No Huddle, Shotgun) 33-J.Williams left guard to DEN 31 for no gain (57-D.Greenlaw; 90-K.Givens).
</td>
<td style="text-align:left;">
run
</td>
<td style="text-align:right;">
1.262
</td>
<td style="text-align:right;">
-0.790
</td>
<td style="text-align:right;">
0.607
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data-acquisition.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nflplotR)</span>
<span id="cb26-2"><a href="data-acquisition.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Example from: https://www.nflfastr.com/articles/nflfastR.html</span></span>
<span id="cb26-3"><a href="data-acquisition.html#cb26-3" aria-hidden="true" tabindex="-1"></a>pbp <span class="ot">&lt;-</span> nflfastR<span class="sc">::</span><span class="fu">load_pbp</span>(<span class="dv">2022</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="data-acquisition.html#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(season_type <span class="sc">==</span> <span class="st">&quot;REG&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-5"><a href="data-acquisition.html#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(posteam) <span class="sc">&amp;</span> (rush <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> pass <span class="sc">==</span> <span class="dv">1</span>))</span>
<span id="cb26-6"><a href="data-acquisition.html#cb26-6" aria-hidden="true" tabindex="-1"></a>offense <span class="ot">&lt;-</span> pbp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="at">team =</span> posteam) <span class="sc">%&gt;%</span></span>
<span id="cb26-7"><a href="data-acquisition.html#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">off_epa =</span> <span class="fu">mean</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb26-8"><a href="data-acquisition.html#cb26-8" aria-hidden="true" tabindex="-1"></a>defense <span class="ot">&lt;-</span> pbp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="at">team =</span> defteam) <span class="sc">%&gt;%</span> </span>
<span id="cb26-9"><a href="data-acquisition.html#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">def_epa =</span> <span class="fu">mean</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb26-10"><a href="data-acquisition.html#cb26-10" aria-hidden="true" tabindex="-1"></a>offense <span class="sc">%&gt;%</span></span>
<span id="cb26-11"><a href="data-acquisition.html#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(defense, <span class="at">by =</span> <span class="st">&quot;team&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-12"><a href="data-acquisition.html#cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> off_epa, <span class="at">y =</span> def_epa)) <span class="sc">+</span></span>
<span id="cb26-13"><a href="data-acquisition.html#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope =</span> <span class="sc">-</span><span class="fl">1.5</span>, <span class="at">intercept =</span> <span class="fu">c</span>(.<span class="dv">4</span>, .<span class="dv">3</span>, .<span class="dv">2</span>, .<span class="dv">1</span>, <span class="dv">0</span>, <span class="sc">-</span>.<span class="dv">1</span>, <span class="sc">-</span>.<span class="dv">2</span>, <span class="sc">-</span>.<span class="dv">3</span>), <span class="at">alpha =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb26-14"><a href="data-acquisition.html#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_mean_lines</span>(<span class="fu">aes</span>(<span class="at">h_var =</span> off_epa, <span class="at">v_var =</span> def_epa)) <span class="sc">+</span></span>
<span id="cb26-15"><a href="data-acquisition.html#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_nfl_logos</span>(<span class="fu">aes</span>(<span class="at">team_abbr =</span> team), <span class="at">width =</span> <span class="fl">0.07</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb26-16"><a href="data-acquisition.html#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Offense EPA/play&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Defense EPA/play&quot;</span>, <span class="at">caption =</span> <span class="st">&quot;Data: @nflfastR&quot;</span>,</span>
<span id="cb26-17"><a href="data-acquisition.html#cb26-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;2022 NFL Offensive and Defensive EPA per Play&quot;</span>) <span class="sc">+</span></span>
<span id="cb26-18"><a href="data-acquisition.html#cb26-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb26-19"><a href="data-acquisition.html#cb26-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>( <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>) ) <span class="sc">+</span></span>
<span id="cb26-20"><a href="data-acquisition.html#cb26-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="hoopr-package" class="section level3 hasAnchor" number="7.3.3">
<h3><span class="header-section-number">7.3.3</span> hoopR package<a href="data-acquisition.html#hoopr-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>hoopR</code> allows for one to access data related to professional and college basketball.</p>
<div class="example">
<p><span id="exm:unlabeled-div-8" class="example"><strong>Example 7.8  </strong></span>Using the <code>hoopR</code> package, obtain the play-by-play data for the Denver Nuggets vs. Philadelphia 76ers game on January 28, 2023.</p>
</div>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data-acquisition.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hoopR)</span>
<span id="cb27-2"><a href="data-acquisition.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># https://www.espn.com/nba/game/_/gameId/401468896</span></span>
<span id="cb27-3"><a href="data-acquisition.html#cb27-3" aria-hidden="true" tabindex="-1"></a>hoopR<span class="sc">::</span><span class="fu">espn_nba_pbp</span>(<span class="at">game_id =</span> <span class="dv">401468896</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-4"><a href="data-acquisition.html#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">`</span><span class="at">Description</span><span class="st">`</span><span class="ot">=</span>text,<span class="st">`</span><span class="at">Play Type</span><span class="st">`</span><span class="ot">=</span>type_text,</span>
<span id="cb27-5"><a href="data-acquisition.html#cb27-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Quarter=</span>period_display_value,<span class="at">Points=</span>score_value,<span class="at">Clock=</span>clock_display_value) <span class="sc">%&gt;%</span></span>
<span id="cb27-6"><a href="data-acquisition.html#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-7"><a href="data-acquisition.html#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb27-8"><a href="data-acquisition.html#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">1</span>, <span class="at">width =</span> <span class="st">&quot;3in&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-9"><a href="data-acquisition.html#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">2</span>, <span class="at">width =</span> <span class="st">&quot;1in&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Description
</th>
<th style="text-align:left;">
Play Type
</th>
<th style="text-align:left;">
Quarter
</th>
<th style="text-align:right;">
Points
</th>
<th style="text-align:left;">
Clock
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;width: 3in; ">
Nikola Jokic vs. Joel Embiid (Jamal Murray gains possession)
</td>
<td style="text-align:left;width: 1in; ">
Jumpball
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
12:00
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Nikola Jokic misses 11-foot jumper
</td>
<td style="text-align:left;width: 1in; ">
Jump Shot
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
11:45
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
James Harden defensive rebound
</td>
<td style="text-align:left;width: 1in; ">
Defensive Rebound
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
11:41
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Joel Embiid makes 6-foot two point shot (James Harden assists)
</td>
<td style="text-align:left;width: 1in; ">
Driving Floating Bank Jump Shot
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
11:35
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Nikola Jokic shooting foul
</td>
<td style="text-align:left;width: 1in; ">
Shooting Foul
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
11:35
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Joel Embiid misses free throw 1 of 1
</td>
<td style="text-align:left;width: 1in; ">
Free Throw - 1 of 1
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
11:35
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Michael Porter Jr. defensive rebound
</td>
<td style="text-align:left;width: 1in; ">
Defensive Rebound
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
11:32
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Michael Porter Jr. makes 27-foot three point jumper (Kentavious Caldwell-Pope assists)
</td>
<td style="text-align:left;width: 1in; ">
Jump Shot
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
11:20
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Tobias Harris misses 26-foot three point jumper
</td>
<td style="text-align:left;width: 1in; ">
Jump Shot
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
10:58
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Kentavious Caldwell-Pope defensive rebound
</td>
<td style="text-align:left;width: 1in; ">
Defensive Rebound
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
10:55
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Nikola Jokic makes finger roll layup (Jamal Murray assists)
</td>
<td style="text-align:left;width: 1in; ">
Finger Roll Layup
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
10:48
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Joel Embiid makes driving layup (James Harden assists)
</td>
<td style="text-align:left;width: 1in; ">
Driving Layup Shot
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
10:37
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Aaron Gordon makes 16-foot pullup jump shot
</td>
<td style="text-align:left;width: 1in; ">
Pullup Jump Shot
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
10:25
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Joel Embiid makes 14-foot pullup jump shot
</td>
<td style="text-align:left;width: 1in; ">
Pullup Jump Shot
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
10:12
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Joel Embiid shooting foul
</td>
<td style="text-align:left;width: 1in; ">
Shooting Foul
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
9:59
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-9" class="example"><strong>Example 7.9  </strong></span>Obtain win probability as a function of game time for Colorado State vs. Boise State men’s basketball on January 28, 2023.</p>
</div>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="data-acquisition.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get ID from ESPN game URL: https://www.espn.com/mens-college-basketball/game/_/gameId/401482835</span></span>
<span id="cb28-2"><a href="data-acquisition.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hoopR)</span>
<span id="cb28-3"><a href="data-acquisition.html#cb28-3" aria-hidden="true" tabindex="-1"></a>hoopR<span class="sc">::</span><span class="fu">espn_mbb_wp</span>(<span class="at">game_id =</span> <span class="dv">401482835</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="data-acquisition.html#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">Period=</span>period,<span class="st">`</span><span class="at">Seconds Remaining</span><span class="st">`</span><span class="ot">=</span>game_seconds_left,<span class="st">`</span><span class="at">Home Win Pct</span><span class="st">`</span><span class="ot">=</span>home_win_percentage,<span class="st">`</span><span class="at">Play ID</span><span class="st">`</span><span class="ot">=</span>play_id) <span class="sc">%&gt;%</span></span>
<span id="cb28-5"><a href="data-acquisition.html#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-6"><a href="data-acquisition.html#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
Period
</th>
<th style="text-align:right;">
Seconds Remaining
</th>
<th style="text-align:right;">
Home Win Pct
</th>
<th style="text-align:left;">
Play ID
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2375
</td>
<td style="text-align:right;">
0.891
</td>
<td style="text-align:left;">
401482835101806401
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2372
</td>
<td style="text-align:right;">
0.893
</td>
<td style="text-align:left;">
401482835101806701
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2349
</td>
<td style="text-align:right;">
0.913
</td>
<td style="text-align:left;">
401482835101809001
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2322
</td>
<td style="text-align:right;">
0.916
</td>
<td style="text-align:left;">
401482835101815701
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2319
</td>
<td style="text-align:right;">
0.918
</td>
<td style="text-align:left;">
401482835101816001
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2297
</td>
<td style="text-align:right;">
0.934
</td>
<td style="text-align:left;">
401482835101818201
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2273
</td>
<td style="text-align:right;">
0.939
</td>
<td style="text-align:left;">
401482835101824601
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2269
</td>
<td style="text-align:right;">
0.933
</td>
<td style="text-align:left;">
401482835101825001
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2269
</td>
<td style="text-align:right;">
0.924
</td>
<td style="text-align:left;">
401482835101825002
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2238
</td>
<td style="text-align:right;">
0.939
</td>
<td style="text-align:left;">
401482835101828101
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data-acquisition.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ncaahoopR)</span>
<span id="cb29-2"><a href="data-acquisition.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">wp_chart_new</span>(<span class="dv">401482835</span>,<span class="at">show_labels =</span> F)</span></code></pre></div>
<pre><code>## Scraping Data for Game: 1 of 1</code></pre>
<p><img src="textbook_files/figure-html/unnamed-chunk-25-1.png" width="672" />
</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data-acquisition.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">game_flow</span>(<span class="at">game_id =</span> <span class="dv">401482835</span>, <span class="at">home_col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">away_col =</span> <span class="st">&quot;forestgreen&quot;</span>)</span></code></pre></div>
<pre><code>## Scraping Data for Game: 1 of 1</code></pre>
<p><img src="textbook_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="hockeyr-package" class="section level3 hasAnchor" number="7.3.4">
<h3><span class="header-section-number">7.3.4</span> hockeyR package<a href="data-acquisition.html#hockeyr-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>hockeyR</code> packages allows you to obtain data from NHL.com and Hockey Reference. The <code>sportyR</code> package is useful for plotting spatial data on various playing fields/courts.</p>
<div class="example">
<p><span id="exm:unlabeled-div-10" class="example"><strong>Example 7.10  </strong></span>Create a shot plot for the Colorado Avalanche vs. St. Louis Blues on January 28, 2023.</p>
</div>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data-acquisition.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example adapted from: https://hockeyr.netlify.app/</span></span>
<span id="cb33-2"><a href="data-acquisition.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::install_github(&quot;danmorse314/hockeyR&quot;)</span></span>
<span id="cb33-3"><a href="data-acquisition.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hockeyR)</span>
<span id="cb33-4"><a href="data-acquisition.html#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sportyR)</span>
<span id="cb33-5"><a href="data-acquisition.html#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="data-acquisition.html#cb33-6" aria-hidden="true" tabindex="-1"></a>pbp <span class="ot">&lt;-</span> hockeyR<span class="sc">::</span><span class="fu">load_pbp</span>(<span class="st">&#39;2022-2023&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data-acquisition.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get single game</span></span>
<span id="cb34-2"><a href="data-acquisition.html#cb34-2" aria-hidden="true" tabindex="-1"></a>game <span class="ot">&lt;-</span> pbp <span class="sc">%&gt;%</span></span>
<span id="cb34-3"><a href="data-acquisition.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(game_date <span class="sc">==</span> <span class="st">&quot;2023-01-28&quot;</span> <span class="sc">&amp;</span> home_abbreviation <span class="sc">==</span> <span class="st">&quot;COL&quot;</span>)</span>
<span id="cb34-4"><a href="data-acquisition.html#cb34-4" aria-hidden="true" tabindex="-1"></a>game <span class="sc">%&gt;%</span> </span>
<span id="cb34-5"><a href="data-acquisition.html#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">Date=</span>game_date,<span class="at">Period=</span>period,<span class="at">Time=</span>period_time_remaining,<span class="at">Event=</span>event,</span>
<span id="cb34-6"><a href="data-acquisition.html#cb34-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Description=</span>description) <span class="sc">%&gt;%</span></span>
<span id="cb34-7"><a href="data-acquisition.html#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb34-8"><a href="data-acquisition.html#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Date
</th>
<th style="text-align:right;">
Period
</th>
<th style="text-align:left;">
Time
</th>
<th style="text-align:left;">
Event
</th>
<th style="text-align:left;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
20:00
</td>
<td style="text-align:left;">
Game Scheduled
</td>
<td style="text-align:left;">
Game Scheduled
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
20:00
</td>
<td style="text-align:left;">
Faceoff
</td>
<td style="text-align:left;">
J.T. Compher faceoff won against Noel Acciari
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
19:47
</td>
<td style="text-align:left;">
Stoppage
</td>
<td style="text-align:left;">
Icing
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
19:47
</td>
<td style="text-align:left;">
Faceoff
</td>
<td style="text-align:left;">
J.T. Compher faceoff won against Noel Acciari
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
19:35
</td>
<td style="text-align:left;">
Takeaway
</td>
<td style="text-align:left;">
Takeaway by Matt Nieto
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
19:09
</td>
<td style="text-align:left;">
Shot
</td>
<td style="text-align:left;">
Torey Krug Wrist Shot saved by Alexandar Georgiev
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
19:09
</td>
<td style="text-align:left;">
Stoppage
</td>
<td style="text-align:left;">
Goalie Stopped
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
19:09
</td>
<td style="text-align:left;">
Faceoff
</td>
<td style="text-align:left;">
Nathan MacKinnon faceoff won against Brayden Schenn
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
18:39
</td>
<td style="text-align:left;">
Shot
</td>
<td style="text-align:left;">
Evan Rodrigues Wrist Shot saved by Jordan Binnington
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
18:07
</td>
<td style="text-align:left;">
Hit
</td>
<td style="text-align:left;">
Andreas Englund hit Logan Brown
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
17:30
</td>
<td style="text-align:left;">
Shot
</td>
<td style="text-align:left;">
Denis Malgin Wrist Shot saved by Jordan Binnington
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
17:21
</td>
<td style="text-align:left;">
Blocked Shot
</td>
<td style="text-align:left;">
Samuel Girard shot blocked shot by Niko Mikkola
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
16:46
</td>
<td style="text-align:left;">
Hit
</td>
<td style="text-align:left;">
Noel Acciari hit Erik Johnson
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
16:35
</td>
<td style="text-align:left;">
Missed Shot
</td>
<td style="text-align:left;">
Noel Acciari Wide of Net Alexandar Georgiev
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
16:25
</td>
<td style="text-align:left;">
Shot
</td>
<td style="text-align:left;">
Matt Nieto Wrist Shot saved by Jordan Binnington
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data-acquisition.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grab team logos &amp; colors</span></span>
<span id="cb35-2"><a href="data-acquisition.html#cb35-2" aria-hidden="true" tabindex="-1"></a>team_logos <span class="ot">&lt;-</span> hockeyR<span class="sc">::</span>team_logos_colors <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="data-acquisition.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(team_abbr <span class="sc">==</span> <span class="fu">unique</span>(game<span class="sc">$</span>home_abbreviation) <span class="sc">|</span> team_abbr <span class="sc">==</span> <span class="fu">unique</span>(game<span class="sc">$</span>away_abbreviation)) <span class="sc">%&gt;%</span></span>
<span id="cb35-4"><a href="data-acquisition.html#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add in dummy variables to put logos on the ice</span></span>
<span id="cb35-5"><a href="data-acquisition.html#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">x =</span> <span class="fu">ifelse</span>(full_team_name <span class="sc">==</span> <span class="fu">unique</span>(game<span class="sc">$</span>home_name), <span class="dv">50</span>, <span class="sc">-</span><span class="dv">50</span>),</span>
<span id="cb35-6"><a href="data-acquisition.html#cb35-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="dv">0</span>)</span>
<span id="cb35-7"><a href="data-acquisition.html#cb35-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="data-acquisition.html#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co"># add transparency to logo</span></span>
<span id="cb35-9"><a href="data-acquisition.html#cb35-9" aria-hidden="true" tabindex="-1"></a>transparent <span class="ot">&lt;-</span> <span class="cf">function</span>(img) {</span>
<span id="cb35-10"><a href="data-acquisition.html#cb35-10" aria-hidden="true" tabindex="-1"></a>  magick<span class="sc">::</span><span class="fu">image_fx</span>(img, <span class="at">expression =</span> <span class="st">&quot;0.3*a&quot;</span>, <span class="at">channel =</span> <span class="st">&quot;alpha&quot;</span>)</span>
<span id="cb35-11"><a href="data-acquisition.html#cb35-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb35-12"><a href="data-acquisition.html#cb35-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-13"><a href="data-acquisition.html#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="co"># get only shot events</span></span>
<span id="cb35-14"><a href="data-acquisition.html#cb35-14" aria-hidden="true" tabindex="-1"></a>fenwick_events <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;MISSED_SHOT&quot;</span>,<span class="st">&quot;SHOT&quot;</span>,<span class="st">&quot;GOAL&quot;</span>)</span>
<span id="cb35-15"><a href="data-acquisition.html#cb35-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-16"><a href="data-acquisition.html#cb35-16" aria-hidden="true" tabindex="-1"></a>shots <span class="ot">&lt;-</span> game <span class="sc">%&gt;%</span> <span class="fu">filter</span>(event_type <span class="sc">%in%</span> fenwick_events) <span class="sc">%&gt;%</span></span>
<span id="cb35-17"><a href="data-acquisition.html#cb35-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># adding team colors</span></span>
<span id="cb35-18"><a href="data-acquisition.html#cb35-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(team_logos, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;event_team_abbr&quot;</span> <span class="ot">=</span> <span class="st">&quot;team_abbr&quot;</span>))</span>
<span id="cb35-19"><a href="data-acquisition.html#cb35-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-20"><a href="data-acquisition.html#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="co"># create shot plot</span></span>
<span id="cb35-21"><a href="data-acquisition.html#cb35-21" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_hockey</span>(<span class="st">&quot;nhl&quot;</span>) <span class="sc">+</span></span>
<span id="cb35-22"><a href="data-acquisition.html#cb35-22" aria-hidden="true" tabindex="-1"></a>  ggimage<span class="sc">::</span><span class="fu">geom_image</span>(</span>
<span id="cb35-23"><a href="data-acquisition.html#cb35-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> team_logos,</span>
<span id="cb35-24"><a href="data-acquisition.html#cb35-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">image =</span> team_logo_espn),</span>
<span id="cb35-25"><a href="data-acquisition.html#cb35-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">image_fun =</span> transparent, <span class="at">size =</span> <span class="fl">0.22</span>, <span class="at">asp =</span> <span class="fl">2.35</span></span>
<span id="cb35-26"><a href="data-acquisition.html#cb35-26" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb35-27"><a href="data-acquisition.html#cb35-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb35-28"><a href="data-acquisition.html#cb35-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> shots,</span>
<span id="cb35-29"><a href="data-acquisition.html#cb35-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(x_fixed, y_fixed),</span>
<span id="cb35-30"><a href="data-acquisition.html#cb35-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb35-31"><a href="data-acquisition.html#cb35-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> shots<span class="sc">$</span>team_color1,</span>
<span id="cb35-32"><a href="data-acquisition.html#cb35-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape =</span> <span class="fu">ifelse</span>(shots<span class="sc">$</span>event_type <span class="sc">==</span> <span class="st">&quot;GOAL&quot;</span>, <span class="dv">19</span>, <span class="dv">1</span>)</span>
<span id="cb35-33"><a href="data-acquisition.html#cb35-33" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb35-34"><a href="data-acquisition.html#cb35-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb35-35"><a href="data-acquisition.html#cb35-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">&quot;{unique(game$away_name)} @ {unique(game$home_name)}&quot;</span>),</span>
<span id="cb35-36"><a href="data-acquisition.html#cb35-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> glue<span class="sc">::</span><span class="fu">glue</span>(</span>
<span id="cb35-37"><a href="data-acquisition.html#cb35-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;{unique(game$game_date)}</span><span class="sc">\n</span></span>
<span id="cb35-38"><a href="data-acquisition.html#cb35-38" aria-hidden="true" tabindex="-1"></a><span class="st">    {unique(shots$away_abbreviation)} {unique(shots$away_final)} - {unique(shots$home_final)} {unique(shots$home_abbreviation)}&quot;</span></span>
<span id="cb35-39"><a href="data-acquisition.html#cb35-39" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb35-40"><a href="data-acquisition.html#cb35-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;data from hockeyR | plot made with sportyR&quot;</span></span>
<span id="cb35-41"><a href="data-acquisition.html#cb35-41" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb35-42"><a href="data-acquisition.html#cb35-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb35-43"><a href="data-acquisition.html#cb35-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb35-44"><a href="data-acquisition.html#cb35-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb35-45"><a href="data-acquisition.html#cb35-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> .<span class="dv">9</span>))</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="worldfootballr" class="section level3 hasAnchor" number="7.3.5">
<h3><span class="header-section-number">7.3.5</span> worldfootballR<a href="data-acquisition.html#worldfootballr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>worldfootballR</code> package allows one to access data from FBRef, Understat, and other soccer websites.</p>
<div class="example">
<p><span id="exm:unlabeled-div-11" class="example"><strong>Example 7.11  </strong></span>Download the match summaries for all US Women’s National Team (USWNT) in the 2019 World Cup. Display this information in a kable table.</p>
<p>For more on xG, see: <a href="https://youtu.be/zSaeaFcm1SY">https://youtu.be/zSaeaFcm1SY</a></p>
</div>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data-acquisition.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(worldfootballR)</span>
<span id="cb36-2"><a href="data-acquisition.html#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="data-acquisition.html#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co"># USWNT 2019 World Cup results</span></span>
<span id="cb36-4"><a href="data-acquisition.html#cb36-4" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://fbref.com/en/squads/1c912aa0/2019/United-States-Women-Stats&quot;</span></span>
<span id="cb36-5"><a href="data-acquisition.html#cb36-5" aria-hidden="true" tabindex="-1"></a>uswnt19 <span class="ot">&lt;-</span> <span class="fu">get_team_match_results</span>(url)</span>
<span id="cb36-6"><a href="data-acquisition.html#cb36-6" aria-hidden="true" tabindex="-1"></a>uswnt19 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Comp <span class="sc">==</span> <span class="st">&quot;World Cup&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb36-7"><a href="data-acquisition.html#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Day,<span class="sc">-</span>Time,<span class="sc">-</span>Comp,<span class="sc">-</span>Team_Url,<span class="sc">-</span>Captain,<span class="sc">-</span>Formation,</span>
<span id="cb36-8"><a href="data-acquisition.html#cb36-8" aria-hidden="true" tabindex="-1"></a>         <span class="sc">-</span>Referee,<span class="sc">-</span>Notes,<span class="sc">-</span>Attendance,<span class="sc">-</span>Venue,<span class="sc">-</span>Team) <span class="sc">%&gt;%</span> </span>
<span id="cb36-9"><a href="data-acquisition.html#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Date
</th>
<th style="text-align:left;">
Round
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:left;">
GF
</th>
<th style="text-align:left;">
GA
</th>
<th style="text-align:left;">
Opponent
</th>
<th style="text-align:right;">
xG
</th>
<th style="text-align:right;">
xGA
</th>
<th style="text-align:right;">
Poss
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2019-06-11
</td>
<td style="text-align:left;">
Group stage
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
13
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
Thailand
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
72
</td>
</tr>
<tr>
<td style="text-align:left;">
2019-06-16
</td>
<td style="text-align:left;">
Group stage
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
Chile
</td>
<td style="text-align:right;">
3.7
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
71
</td>
</tr>
<tr>
<td style="text-align:left;">
2019-06-20
</td>
<td style="text-align:left;">
Group stage
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
Sweden
</td>
<td style="text-align:right;">
2.1
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:right;">
61
</td>
</tr>
<tr>
<td style="text-align:left;">
2019-06-24
</td>
<td style="text-align:left;">
Round of 16
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
Spain
</td>
<td style="text-align:right;">
2.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
55
</td>
</tr>
<tr>
<td style="text-align:left;">
2019-06-28
</td>
<td style="text-align:left;">
Quarter-finals
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
France
</td>
<td style="text-align:right;">
1.1
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
40
</td>
</tr>
<tr>
<td style="text-align:left;">
2019-07-02
</td>
<td style="text-align:left;">
Semi-finals
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
England
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
1.7
</td>
<td style="text-align:right;">
43
</td>
</tr>
<tr>
<td style="text-align:left;">
2019-07-07
</td>
<td style="text-align:left;">
Final
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
Netherlands
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
53
</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="correlation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="linear-regression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/aaron-nielsen/SportsAnalyticsBook/edit/master/07-data-acquisition.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["textbook.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
