<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Data Acquisition | Sports Analytics</title>
  <meta name="description" content="Chapter 5 Data Acquisition | Sports Analytics Notes" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Data Acquisition | Sports Analytics" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://aaron-nielsen.github.io/SportsAnalyticsBook/images/csu.png" />
  <meta property="og:description" content="Chapter 5 Data Acquisition | Sports Analytics Notes" />
  <meta name="github-repo" content="aaron-nielsen.github.io/SportsAnalyticsBook/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Data Acquisition | Sports Analytics" />
  
  <meta name="twitter:description" content="Chapter 5 Data Acquisition | Sports Analytics Notes" />
  <meta name="twitter:image" content="https://aaron-nielsen.github.io/SportsAnalyticsBook/images/csu.png" />

<meta name="author" content="Aaron Nielsen, Department of Statistics, Colorado State University" />


<meta name="date" content="2024-01-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="monte-carlo-simulation.html"/>
<link rel="next" href="measures-of-association.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Sports Analytics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html"><i class="fa fa-check"></i>Preliminaries</a>
<ul>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#getting-started-with-r"><i class="fa fa-check"></i>Getting Started With R</a>
<ul>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#installing-r"><i class="fa fa-check"></i>Installing R</a></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#some-r-basics"><i class="fa fa-check"></i>Some R Basics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#course-goals"><i class="fa fa-check"></i>Course Goals</a></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#which-sports"><i class="fa fa-check"></i>Which Sports?</a></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#challenges"><i class="fa fa-check"></i>Challenges</a></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#ethical-concerns"><i class="fa fa-check"></i>Ethical Concerns</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>1</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="1.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#descriptive-statistics"><i class="fa fa-check"></i><b>1.1</b> Descriptive Statistics</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#definitions"><i class="fa fa-check"></i><b>1.1.1</b> Definitions</a></li>
<li class="chapter" data-level="1.1.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#descriptive-statistics-1"><i class="fa fa-check"></i><b>1.1.2</b> Descriptive Statistics</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#visualizations"><i class="fa fa-check"></i><b>1.2</b> Visualizations</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#histograms"><i class="fa fa-check"></i><b>1.2.1</b> Histograms</a></li>
<li class="chapter" data-level="1.2.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#bar-plots"><i class="fa fa-check"></i><b>1.2.2</b> Bar Plots</a></li>
<li class="chapter" data-level="1.2.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#scatter-plots"><i class="fa fa-check"></i><b>1.2.3</b> Scatter Plots</a></li>
<li class="chapter" data-level="1.2.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#kable-tables"><i class="fa fa-check"></i><b>1.2.4</b> Kable Tables</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#baseball"><i class="fa fa-check"></i><b>1.3</b> Baseball</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#hitting-statistics"><i class="fa fa-check"></i><b>1.3.1</b> Hitting Statistics</a></li>
<li class="chapter" data-level="1.3.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#pitching-statistics"><i class="fa fa-check"></i><b>1.3.2</b> Pitching Statistics</a></li>
<li class="chapter" data-level="1.3.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#wins-above-replacement"><i class="fa fa-check"></i><b>1.3.3</b> Wins Above Replacement</a></li>
<li class="chapter" data-level="1.3.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#calculating-hitting-statistics"><i class="fa fa-check"></i><b>1.3.4</b> Calculating Hitting Statistics</a></li>
<li class="chapter" data-level="1.3.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#evaluating-pitching-statistics"><i class="fa fa-check"></i><b>1.3.5</b> Evaluating Pitching Statistics</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#football"><i class="fa fa-check"></i><b>1.4</b> Football</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-football-statistics"><i class="fa fa-check"></i><b>1.4.1</b> Basic Football Statistics</a></li>
<li class="chapter" data-level="1.4.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#advanced-football-statistics"><i class="fa fa-check"></i><b>1.4.2</b> Advanced Football Statistics</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basketball"><i class="fa fa-check"></i><b>1.5</b> Basketball</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-basketball-statistics"><i class="fa fa-check"></i><b>1.5.1</b> Basic Basketball Statistics</a></li>
<li class="chapter" data-level="1.5.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#advanced-basketball-statistics"><i class="fa fa-check"></i><b>1.5.2</b> Advanced Basketball Statistics</a></li>
<li class="chapter" data-level="1.5.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#four-factors"><i class="fa fa-check"></i><b>1.5.3</b> Four Factors</a></li>
<li class="chapter" data-level="1.5.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#shot-charts"><i class="fa fa-check"></i><b>1.5.4</b> Shot Charts</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#hockey"><i class="fa fa-check"></i><b>1.6</b> Hockey</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-hockey-statistics"><i class="fa fa-check"></i><b>1.6.1</b> Basic Hockey Statistics</a></li>
<li class="chapter" data-level="1.6.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#advanced-hockey-statistics"><i class="fa fa-check"></i><b>1.6.2</b> Advanced Hockey Statistics</a></li>
<li class="chapter" data-level="1.6.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#actual-vs.-expected-goals"><i class="fa fa-check"></i><b>1.6.3</b> Actual vs. Expected Goals</a></li>
<li class="chapter" data-level="1.6.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#goalie-statistics"><i class="fa fa-check"></i><b>1.6.4</b> Goalie Statistics</a></li>
<li class="chapter" data-level="1.6.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#correlation-plots"><i class="fa fa-check"></i><b>1.6.5</b> Correlation Plots</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#volleyball"><i class="fa fa-check"></i><b>1.7</b> Volleyball</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-volleyball-statistics"><i class="fa fa-check"></i><b>1.7.1</b> Basic Volleyball Statistics</a></li>
<li class="chapter" data-level="1.7.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#scatter-plot"><i class="fa fa-check"></i><b>1.7.2</b> Scatter Plot</a></li>
<li class="chapter" data-level="1.7.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#box-plot"><i class="fa fa-check"></i><b>1.7.3</b> Box Plot</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#soccer"><i class="fa fa-check"></i><b>1.8</b> Soccer</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#basic-soccer-statistics"><i class="fa fa-check"></i><b>1.8.1</b> Basic Soccer Statistics</a></li>
<li class="chapter" data-level="1.8.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#advanced-soccer-statistics"><i class="fa fa-check"></i><b>1.8.2</b> Advanced Soccer Statistics</a></li>
<li class="chapter" data-level="1.8.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#bar-plot"><i class="fa fa-check"></i><b>1.8.3</b> Bar Plot</a></li>
<li class="chapter" data-level="1.8.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#scatter-plot-1"><i class="fa fa-check"></i><b>1.8.4</b> Scatter Plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="probability.html"><a href="probability.html"><i class="fa fa-check"></i><b>2</b> Probability</a>
<ul>
<li class="chapter" data-level="2.1" data-path="probability.html"><a href="probability.html#definitions-and-set-theory"><i class="fa fa-check"></i><b>2.1</b> Definitions and Set Theory</a></li>
<li class="chapter" data-level="2.2" data-path="probability.html"><a href="probability.html#axioms-properties-and-laws"><i class="fa fa-check"></i><b>2.2</b> Axioms, Properties, and Laws</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="probability.html"><a href="probability.html#axioms-of-probability"><i class="fa fa-check"></i><b>2.2.1</b> Axioms of Probability</a></li>
<li class="chapter" data-level="2.2.2" data-path="probability.html"><a href="probability.html#properties-of-probability"><i class="fa fa-check"></i><b>2.2.2</b> Properties of Probability</a></li>
<li class="chapter" data-level="2.2.3" data-path="probability.html"><a href="probability.html#laws-of-probability"><i class="fa fa-check"></i><b>2.2.3</b> Laws of Probability</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="probability.html"><a href="probability.html#combinatorics"><i class="fa fa-check"></i><b>2.3</b> Combinatorics</a></li>
<li class="chapter" data-level="2.4" data-path="probability.html"><a href="probability.html#random-variables"><i class="fa fa-check"></i><b>2.4</b> Random Variables</a></li>
<li class="chapter" data-level="2.5" data-path="probability.html"><a href="probability.html#common-random-variables"><i class="fa fa-check"></i><b>2.5</b> Common Random Variables</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="probability.html"><a href="probability.html#binomial-rvs"><i class="fa fa-check"></i><b>2.5.1</b> Binomial RVs</a></li>
<li class="chapter" data-level="2.5.2" data-path="probability.html"><a href="probability.html#geometric-rvs"><i class="fa fa-check"></i><b>2.5.2</b> Geometric RVs</a></li>
<li class="chapter" data-level="2.5.3" data-path="probability.html"><a href="probability.html#poisson-rvs"><i class="fa fa-check"></i><b>2.5.3</b> Poisson RVs</a></li>
<li class="chapter" data-level="2.5.4" data-path="probability.html"><a href="probability.html#negative-binomial-rvs"><i class="fa fa-check"></i><b>2.5.4</b> Negative Binomial RVs</a></li>
<li class="chapter" data-level="2.5.5" data-path="probability.html"><a href="probability.html#normal-rvs"><i class="fa fa-check"></i><b>2.5.5</b> Normal RVs</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="probability.html"><a href="probability.html#win-probability-models"><i class="fa fa-check"></i><b>2.6</b> Win Probability Models</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="probability.html"><a href="probability.html#estimating-pregame-win-probability"><i class="fa fa-check"></i><b>2.6.1</b> Estimating Pregame Win Probability</a></li>
<li class="chapter" data-level="2.6.2" data-path="probability.html"><a href="probability.html#estimating-in-game-win-probability"><i class="fa fa-check"></i><b>2.6.2</b> Estimating In-Game Win Probability</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="odds-and-bets.html"><a href="odds-and-bets.html"><i class="fa fa-check"></i><b>3</b> Odds and Bets</a>
<ul>
<li class="chapter" data-level="3.1" data-path="odds-and-bets.html"><a href="odds-and-bets.html#odds"><i class="fa fa-check"></i><b>3.1</b> Odds</a></li>
<li class="chapter" data-level="3.2" data-path="odds-and-bets.html"><a href="odds-and-bets.html#gambling-odds"><i class="fa fa-check"></i><b>3.2</b> Gambling Odds</a></li>
<li class="chapter" data-level="3.3" data-path="odds-and-bets.html"><a href="odds-and-bets.html#types-of-bets"><i class="fa fa-check"></i><b>3.3</b> Types of Bets</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html"><i class="fa fa-check"></i><b>4</b> Monte Carlo Simulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#basics"><i class="fa fa-check"></i><b>4.1</b> Basics</a></li>
<li class="chapter" data-level="4.2" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#estimating-probabilities"><i class="fa fa-check"></i><b>4.2</b> Estimating Probabilities</a></li>
<li class="chapter" data-level="4.3" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#simulating-streaks"><i class="fa fa-check"></i><b>4.3</b> Simulating Streaks</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#winning-streak-simulation"><i class="fa fa-check"></i><b>4.3.1</b> Winning Streak Simulation</a></li>
<li class="chapter" data-level="4.3.2" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#hitting-streak-simulation"><i class="fa fa-check"></i><b>4.3.2</b> Hitting Streak Simulation</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#gambling-simulations"><i class="fa fa-check"></i><b>4.4</b> Gambling Simulations</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#martingale-system"><i class="fa fa-check"></i><b>4.4.1</b> Martingale System</a></li>
<li class="chapter" data-level="4.4.2" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#gamblers-ruin"><i class="fa fa-check"></i><b>4.4.2</b> Gambler’s Ruin</a></li>
<li class="chapter" data-level="4.4.3" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#simulating-a-winning-system"><i class="fa fa-check"></i><b>4.4.3</b> Simulating a Winning System</a></li>
<li class="chapter" data-level="4.4.4" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#using-the-kelly-growth-criterion"><i class="fa fa-check"></i><b>4.4.4</b> Using the Kelly Growth Criterion</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#simulating-censored-data"><i class="fa fa-check"></i><b>4.5</b> Simulating Censored Data</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#tony-gwynn-1994-batting-average-simulation"><i class="fa fa-check"></i><b>4.5.1</b> Tony Gwynn 1994 Batting Average Simulation</a></li>
<li class="chapter" data-level="4.5.2" data-path="monte-carlo-simulation.html"><a href="monte-carlo-simulation.html#matt-williams-1994-home-run-simulation"><i class="fa fa-check"></i><b>4.5.2</b> Matt Williams 1994 Home Run Simulation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-acquisition.html"><a href="data-acquisition.html"><i class="fa fa-check"></i><b>5</b> Data Acquisition</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-acquisition.html"><a href="data-acquisition.html#tabular-data-from-sports-reference"><i class="fa fa-check"></i><b>5.1</b> Tabular Data From Sports Reference</a></li>
<li class="chapter" data-level="5.2" data-path="data-acquisition.html"><a href="data-acquisition.html#downloading-datasets-from-internet"><i class="fa fa-check"></i><b>5.2</b> Downloading Datasets From Internet</a></li>
<li class="chapter" data-level="5.3" data-path="data-acquisition.html"><a href="data-acquisition.html#importing-data-using-r-libraries"><i class="fa fa-check"></i><b>5.3</b> Importing Data Using R Libraries</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data-acquisition.html"><a href="data-acquisition.html#baseballr-package"><i class="fa fa-check"></i><b>5.3.1</b> BaseballR package</a></li>
<li class="chapter" data-level="5.3.2" data-path="data-acquisition.html"><a href="data-acquisition.html#nflfastr-package"><i class="fa fa-check"></i><b>5.3.2</b> nflfastR package</a></li>
<li class="chapter" data-level="5.3.3" data-path="data-acquisition.html"><a href="data-acquisition.html#hoopr-package"><i class="fa fa-check"></i><b>5.3.3</b> hoopR package</a></li>
<li class="chapter" data-level="5.3.4" data-path="data-acquisition.html"><a href="data-acquisition.html#hockeyr-package"><i class="fa fa-check"></i><b>5.3.4</b> hockeyR package</a></li>
<li class="chapter" data-level="5.3.5" data-path="data-acquisition.html"><a href="data-acquisition.html#worldfootballr"><i class="fa fa-check"></i><b>5.3.5</b> worldfootballR</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data-acquisition.html"><a href="data-acquisition.html#data-scraping"><i class="fa fa-check"></i><b>5.4</b> Data Scraping</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="data-acquisition.html"><a href="data-acquisition.html#general-tips"><i class="fa fa-check"></i><b>5.4.1</b> General Tips</a></li>
<li class="chapter" data-level="5.4.2" data-path="data-acquisition.html"><a href="data-acquisition.html#introduction-to-html"><i class="fa fa-check"></i><b>5.4.2</b> Introduction to HTML</a></li>
<li class="chapter" data-level="5.4.3" data-path="data-acquisition.html"><a href="data-acquisition.html#rvest-package"><i class="fa fa-check"></i><b>5.4.3</b> rvest Package</a></li>
<li class="chapter" data-level="5.4.4" data-path="data-acquisition.html"><a href="data-acquisition.html#css-gadget-selector"><i class="fa fa-check"></i><b>5.4.4</b> CSS Gadget Selector</a></li>
<li class="chapter" data-level="5.4.5" data-path="data-acquisition.html"><a href="data-acquisition.html#scraping-examples"><i class="fa fa-check"></i><b>5.4.5</b> Scraping Examples</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="measures-of-association.html"><a href="measures-of-association.html"><i class="fa fa-check"></i><b>6</b> Measures of Association</a>
<ul>
<li class="chapter" data-level="6.1" data-path="measures-of-association.html"><a href="measures-of-association.html#pearson-correlation-coefficient"><i class="fa fa-check"></i><b>6.1</b> Pearson Correlation Coefficient</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="measures-of-association.html"><a href="measures-of-association.html#partial-correlation-and-confounding-variables"><i class="fa fa-check"></i><b>6.1.1</b> Partial Correlation and Confounding Variables</a></li>
<li class="chapter" data-level="6.1.2" data-path="measures-of-association.html"><a href="measures-of-association.html#properties-of-the-linear-correlation-coefficient"><i class="fa fa-check"></i><b>6.1.2</b> Properties of the Linear Correlation Coefficient</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="measures-of-association.html"><a href="measures-of-association.html#association-of-categorical-variables"><i class="fa fa-check"></i><b>6.2</b> Association of Categorical Variables</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="measures-of-association.html"><a href="measures-of-association.html#odds-ratios"><i class="fa fa-check"></i><b>6.2.1</b> Odds Ratios</a></li>
<li class="chapter" data-level="6.2.2" data-path="measures-of-association.html"><a href="measures-of-association.html#yules-q"><i class="fa fa-check"></i><b>6.2.2</b> Yule’s Q</a></li>
<li class="chapter" data-level="6.2.3" data-path="measures-of-association.html"><a href="measures-of-association.html#chi-squared-test-of-independence"><i class="fa fa-check"></i><b>6.2.3</b> Chi-Squared Test of Independence</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="measures-of-association.html"><a href="measures-of-association.html#rank-correlation"><i class="fa fa-check"></i><b>6.3</b> Rank Correlation</a></li>
<li class="chapter" data-level="6.4" data-path="measures-of-association.html"><a href="measures-of-association.html#serial-correlation"><i class="fa fa-check"></i><b>6.4</b> Serial Correlation</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="measures-of-association.html"><a href="measures-of-association.html#autocorrelation"><i class="fa fa-check"></i><b>6.4.1</b> Autocorrelation</a></li>
<li class="chapter" data-level="6.4.2" data-path="measures-of-association.html"><a href="measures-of-association.html#run-lengths"><i class="fa fa-check"></i><b>6.4.2</b> Run Lengths</a></li>
<li class="chapter" data-level="6.4.3" data-path="measures-of-association.html"><a href="measures-of-association.html#wald-wolfowitz-runs-test"><i class="fa fa-check"></i><b>6.4.3</b> Wald-Wolfowitz Runs Test</a></li>
<li class="chapter" data-level="6.4.4" data-path="measures-of-association.html"><a href="measures-of-association.html#hot-hand"><i class="fa fa-check"></i><b>6.4.4</b> Hot Hand</a></li>
<li class="chapter" data-level="6.4.5" data-path="measures-of-association.html"><a href="measures-of-association.html#streakiness-in-sports"><i class="fa fa-check"></i><b>6.4.5</b> Streakiness in Sports</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="measures-of-association.html"><a href="measures-of-association.html#pythagorean-record"><i class="fa fa-check"></i><b>6.5</b> Pythagorean Record</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Sports Analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-acquisition" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Data Acquisition<a href="data-acquisition.html#data-acquisition" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>There are many ways to acquire sports data to analyze in R. These include:</p>
<ul>
<li>Manually typing data into a spreadsheet</li>
<li>Downloading pre-formatted tabular data from <a href="https://www.sports-reference.com/">(https://www.sports-reference.com/)</a></li>
<li>Downloading datasets from various internet sources</li>
<li>Importing data using R libraries</li>
<li>Scraping data from internet websites</li>
</ul>
<p>This chapter will explore these various methods of acquiring data and will also review data visualization and summaries. We will typically use <code>ggplot</code> for visualization and <code>kable</code> for data tables. <a href="http://r-graph-gallery.com/">The R Graph Gallery (http://r-graph-gallery.com/)</a> is a nice resource for visualizations using <code>ggplot</code>.</p>
<div id="tabular-data-from-sports-reference" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Tabular Data From Sports Reference<a href="data-acquisition.html#tabular-data-from-sports-reference" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>All tabular data on <a href="https://www.sports-reference.com/">Sports Reference (https://www.sports-reference.com/)</a> can be easily downloaded though a little bit of data wrangling and cleaning is required to prepare the data.</p>
<p>Once you have navigated to the page that you want to download data from, click <strong>Share &amp; Export</strong>, and select <strong>Get table as CSV (for Excel)</strong>. This will generate comma-separated data that you can copy and paste into your favorite text editor.</p>
<div class="float">
<img src="images/sports-ref-csv.png" style="width:40.0%" alt="Get table in CSV format" />
<div class="figcaption">Get table in CSV format</div>
</div>
<div class="float">
<img src="images/sports-ref-csv2.png" style="width:80.0%" alt="Copy data and save as .csv" />
<div class="figcaption">Copy data and save as .csv</div>
</div>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-129" class="example"><strong>Example 5.1  </strong></span>Acquire the <strong>Scoring Regular Season</strong> dataset for the Colorado Avalanche 2021–2022 season.</p>
<p>This data is located on this webpage:
<a href="https://www.hockey-reference.com/teams/COL/2022.html">https://www.hockey-reference.com/teams/COL/2022.html</a>.</p>
<p>Once the data has been collected, using data wrangling and cleaning methods to transform the dataset into an easier to use format. Use this dataset to explore the relationship between goals, assists, OPS (offensive point shares), and DPS (defensive point shares).</p>
</div>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="data-acquisition.html#cb284-1" tabindex="-1"></a><span class="co"># Load data after collection</span></span>
<span id="cb284-2"><a href="data-acquisition.html#cb284-2" tabindex="-1"></a>avs21 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/avs21.csv&quot;</span>)</span>
<span id="cb284-3"><a href="data-acquisition.html#cb284-3" tabindex="-1"></a></span>
<span id="cb284-4"><a href="data-acquisition.html#cb284-4" tabindex="-1"></a><span class="co"># Take a look at the first five rows and first five columns</span></span>
<span id="cb284-5"><a href="data-acquisition.html#cb284-5" tabindex="-1"></a>avs21 <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
…1
</th>
<th style="text-align:left;">
…2
</th>
<th style="text-align:left;">
…3
</th>
<th style="text-align:left;">
…4
</th>
<th style="text-align:left;">
…5
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Rk
</td>
<td style="text-align:left;">
Player
</td>
<td style="text-align:left;">
Age
</td>
<td style="text-align:left;">
Pos
</td>
<td style="text-align:left;">
GP
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
Mikko Rantanen
</td>
<td style="text-align:left;">
25
</td>
<td style="text-align:left;">
RW
</td>
<td style="text-align:left;">
75
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
Nathan MacKinnon
</td>
<td style="text-align:left;">
26
</td>
<td style="text-align:left;">
C
</td>
<td style="text-align:left;">
65
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
Nazem Kadri
</td>
<td style="text-align:left;">
31
</td>
<td style="text-align:left;">
C
</td>
<td style="text-align:left;">
71
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
Cale Makar
</td>
<td style="text-align:left;">
23
</td>
<td style="text-align:left;">
D
</td>
<td style="text-align:left;">
77
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="data-acquisition.html#cb285-1" tabindex="-1"></a><span class="co"># Remove unnecessary first row during loading</span></span>
<span id="cb285-2"><a href="data-acquisition.html#cb285-2" tabindex="-1"></a>avs21 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/avs21.csv&quot;</span>,<span class="at">skip =</span> <span class="dv">1</span>)</span>
<span id="cb285-3"><a href="data-acquisition.html#cb285-3" tabindex="-1"></a></span>
<span id="cb285-4"><a href="data-acquisition.html#cb285-4" tabindex="-1"></a><span class="co"># Select columns of interest</span></span>
<span id="cb285-5"><a href="data-acquisition.html#cb285-5" tabindex="-1"></a>avs21 <span class="ot">&lt;-</span> avs21 <span class="sc">%&gt;%</span> <span class="fu">select</span>(Player,G,A,OPS)</span>
<span id="cb285-6"><a href="data-acquisition.html#cb285-6" tabindex="-1"></a></span>
<span id="cb285-7"><a href="data-acquisition.html#cb285-7" tabindex="-1"></a><span class="co"># Take a look at the first five rows</span></span>
<span id="cb285-8"><a href="data-acquisition.html#cb285-8" tabindex="-1"></a>avs21 <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Player
</th>
<th style="text-align:right;">
G
</th>
<th style="text-align:right;">
A
</th>
<th style="text-align:right;">
OPS
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Mikko Rantanen
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
56
</td>
<td style="text-align:right;">
7.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Nathan MacKinnon
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
56
</td>
<td style="text-align:right;">
7.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Nazem Kadri
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
59
</td>
<td style="text-align:right;">
7.2
</td>
</tr>
<tr>
<td style="text-align:left;">
Cale Makar
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
58
</td>
<td style="text-align:right;">
8.5
</td>
</tr>
<tr>
<td style="text-align:left;">
Andre Burakovsky
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
4.3
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="data-acquisition.html#cb286-1" tabindex="-1"></a><span class="co"># Make sure to eliminate any extra rows like &quot;Team Totals&quot;</span></span>
<span id="cb286-2"><a href="data-acquisition.html#cb286-2" tabindex="-1"></a>avs21 <span class="ot">&lt;-</span> avs21 <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>()<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb286-3"><a href="data-acquisition.html#cb286-3" tabindex="-1"></a></span>
<span id="cb286-4"><a href="data-acquisition.html#cb286-4" tabindex="-1"></a><span class="co"># Let&#39;s also remove all players that did not have a goal and an assist</span></span>
<span id="cb286-5"><a href="data-acquisition.html#cb286-5" tabindex="-1"></a>avs21 <span class="ot">&lt;-</span> avs21 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(G<span class="sc">&gt;</span><span class="dv">0</span> <span class="sc">&amp;</span> A <span class="sc">&gt;</span><span class="dv">0</span>)</span></code></pre></div>
<p><strong><em>Histogram</em></strong></p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="data-acquisition.html#cb287-1" tabindex="-1"></a>avs21 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>G)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">2</span>,<span class="at">color=</span><span class="st">&quot;white&quot;</span>,<span class="at">fill=</span><span class="st">&quot;steelblue&quot;</span>) <span class="sc">+</span> </span>
<span id="cb287-2"><a href="data-acquisition.html#cb287-2" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Goals&quot;</span>,<span class="at">y=</span><span class="st">&quot;Count&quot;</span>,<span class="at">title=</span><span class="st">&quot;Colorado Avalanche Player Goal Counts, 2021-2022 season&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-117-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<p><strong><em>Density plot</em></strong></p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="data-acquisition.html#cb288-1" tabindex="-1"></a>avs21 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>OPS)) <span class="sc">+</span> <span class="fu">geom_density</span>(<span class="at">fill=</span><span class="st">&quot;#6F263D&quot;</span>) <span class="sc">+</span> </span>
<span id="cb288-2"><a href="data-acquisition.html#cb288-2" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Offensive Point Shares (OPS)&quot;</span>,<span class="at">y=</span><span class="st">&quot;Density&quot;</span>,<span class="at">title=</span><span class="st">&quot;Colorado Avalanche Player OPS Density, 2021-2022 season&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-118-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<p><strong><em>Scatterplot with Linear Fit</em></strong></p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="data-acquisition.html#cb289-1" tabindex="-1"></a>avs21 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>G,<span class="at">y=</span>OPS)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb289-2"><a href="data-acquisition.html#cb289-2" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span>lm , <span class="at">fill=</span><span class="st">&quot;steelblue&quot;</span>, <span class="at">color=</span><span class="st">&quot;#6F263D&quot;</span>, <span class="at">se=</span><span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb289-3"><a href="data-acquisition.html#cb289-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Goals&quot;</span>,<span class="at">y=</span><span class="st">&quot;Offensive Point Shares (OPS)&quot;</span>,<span class="at">title=</span><span class="st">&quot;Colorado Avalanche Player Goals and OPS, 2021-2022 season&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-119-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<p><strong><em>Scatterplot with LOESS Smoother</em></strong></p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="data-acquisition.html#cb290-1" tabindex="-1"></a>avs21 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>A,<span class="at">y=</span>OPS)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.8</span>,<span class="at">color=</span><span class="st">&quot;steelblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb290-2"><a href="data-acquisition.html#cb290-2" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span>loess, <span class="at">color=</span><span class="st">&quot;#6F263D&quot;</span>, <span class="at">se=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb290-3"><a href="data-acquisition.html#cb290-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Assists&quot;</span>,<span class="at">y=</span><span class="st">&quot;Offensive Point Shares (DPS)&quot;</span>,<span class="at">title=</span><span class="st">&quot;Colorado Avalanche Player OPS and DPS, 2021-2022 season&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-120-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<p><strong><em>Correlation Matrix Plot</em></strong></p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="data-acquisition.html#cb291-1" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb291-2"><a href="data-acquisition.html#cb291-2" tabindex="-1"></a>avs21 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Player) <span class="sc">%&gt;%</span> <span class="fu">ggpairs</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-121-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="downloading-datasets-from-internet" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Downloading Datasets From Internet<a href="data-acquisition.html#downloading-datasets-from-internet" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We can directly download datasets from the internet if we have a valid url to the datset.</p>
<div class="example">
<p><span id="exm:unlabeled-div-130" class="example"><strong>Example 5.2  </strong></span>Game-by-game data for the CSU volleyball team is available at: <a href="https://aaron-nielsen.github.io/csu_volleyball.csv">https://aaron-nielsen.github.io/csu_volleyball.csv</a></p>
<p>Download this data and create some visualizations.</p>
</div>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="data-acquisition.html#cb292-1" tabindex="-1"></a><span class="co"># Load data from URL</span></span>
<span id="cb292-2"><a href="data-acquisition.html#cb292-2" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://aaron-nielsen.github.io/csu_volleyball.csv&quot;</span></span>
<span id="cb292-3"><a href="data-acquisition.html#cb292-3" tabindex="-1"></a>csu_vb <span class="ot">=</span> <span class="fu">read_csv</span>(url,<span class="at">show_col_types =</span> F)</span>
<span id="cb292-4"><a href="data-acquisition.html#cb292-4" tabindex="-1"></a></span>
<span id="cb292-5"><a href="data-acquisition.html#cb292-5" tabindex="-1"></a><span class="co"># Look at first ten rows and columns</span></span>
<span id="cb292-6"><a href="data-acquisition.html#cb292-6" tabindex="-1"></a>csu_vb <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Date
</th>
<th style="text-align:left;">
Opponent
</th>
<th style="text-align:left;">
W/L
</th>
<th style="text-align:right;">
SP
</th>
<th style="text-align:right;">
K
</th>
<th style="text-align:right;">
E
</th>
<th style="text-align:right;">
TA
</th>
<th style="text-align:right;">
PCT
</th>
<th style="text-align:right;">
AST
</th>
<th style="text-align:right;">
SA
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
8/25/17
</td>
<td style="text-align:left;">
Duke
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
66
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
179
</td>
<td style="text-align:right;">
0.212
</td>
<td style="text-align:right;">
64
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
8/26/17
</td>
<td style="text-align:left;">
Central Florida
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
56
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
126
</td>
<td style="text-align:right;">
0.302
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
8/29/17
</td>
<td style="text-align:left;">
Northern Colorado
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
77
</td>
<td style="text-align:right;">
0.403
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
9/1/17
</td>
<td style="text-align:left;">
vs TCU
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
149
</td>
<td style="text-align:right;">
0.282
</td>
<td style="text-align:right;">
59
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
9/1/17
</td>
<td style="text-align:left;">
vs UNC Asheville
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
0.425
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
9/2/17
</td>
<td style="text-align:left;">
at Florida State
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
48
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
95
</td>
<td style="text-align:right;">
0.379
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
9/8/17
</td>
<td style="text-align:left;">
Ball State
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
59
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
145
</td>
<td style="text-align:right;">
0.241
</td>
<td style="text-align:right;">
56
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
9/8/17
</td>
<td style="text-align:left;">
Michigan
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
48
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
101
</td>
<td style="text-align:right;">
0.396
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
9/10/17
</td>
<td style="text-align:left;">
Idaho State
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
92
</td>
<td style="text-align:right;">
0.380
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
9/15/17
</td>
<td style="text-align:left;">
UAlbany
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
73
</td>
<td style="text-align:right;">
0.466
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
5
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<p><strong><em>Correlogram</em></strong></p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="data-acquisition.html#cb293-1" tabindex="-1"></a><span class="co"># Example adapted from: http://r-graph-gallery.com/97-correlation-ellipses.html</span></span>
<span id="cb293-2"><a href="data-acquisition.html#cb293-2" tabindex="-1"></a><span class="co"># Libraries</span></span>
<span id="cb293-3"><a href="data-acquisition.html#cb293-3" tabindex="-1"></a><span class="fu">library</span>(ellipse)</span>
<span id="cb293-4"><a href="data-acquisition.html#cb293-4" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb293-5"><a href="data-acquisition.html#cb293-5" tabindex="-1"></a></span>
<span id="cb293-6"><a href="data-acquisition.html#cb293-6" tabindex="-1"></a><span class="co"># Use of the mtcars data proposed by R</span></span>
<span id="cb293-7"><a href="data-acquisition.html#cb293-7" tabindex="-1"></a>data <span class="ot">&lt;-</span> csu_vb <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)) <span class="sc">%&gt;%</span> <span class="fu">cor</span>()</span>
<span id="cb293-8"><a href="data-acquisition.html#cb293-8" tabindex="-1"></a></span>
<span id="cb293-9"><a href="data-acquisition.html#cb293-9" tabindex="-1"></a><span class="co"># Build a Pannel of 100 colors with Rcolor Brewer</span></span>
<span id="cb293-10"><a href="data-acquisition.html#cb293-10" tabindex="-1"></a>my_colors <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="dv">5</span>, <span class="st">&quot;Spectral&quot;</span>)</span>
<span id="cb293-11"><a href="data-acquisition.html#cb293-11" tabindex="-1"></a>my_colors <span class="ot">&lt;-</span> <span class="fu">colorRampPalette</span>(my_colors)(<span class="dv">100</span>)</span>
<span id="cb293-12"><a href="data-acquisition.html#cb293-12" tabindex="-1"></a></span>
<span id="cb293-13"><a href="data-acquisition.html#cb293-13" tabindex="-1"></a><span class="co"># Order the correlation matrix</span></span>
<span id="cb293-14"><a href="data-acquisition.html#cb293-14" tabindex="-1"></a>ord <span class="ot">&lt;-</span> <span class="fu">order</span>(data[<span class="dv">1</span>, ])</span>
<span id="cb293-15"><a href="data-acquisition.html#cb293-15" tabindex="-1"></a>data_ord <span class="ot">&lt;-</span> data[ord, ord]</span>
<span id="cb293-16"><a href="data-acquisition.html#cb293-16" tabindex="-1"></a><span class="fu">plotcorr</span>(data_ord, <span class="at">col=</span>my_colors[data_ord<span class="sc">*</span><span class="dv">50</span><span class="sc">+</span><span class="dv">50</span>], <span class="at">mar=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-123-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<p><strong><em>Correlation Matrix Plot</em></strong></p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="data-acquisition.html#cb294-1" tabindex="-1"></a>csu_vb <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb294-2"><a href="data-acquisition.html#cb294-2" tabindex="-1"></a>  <span class="fu">ggcorr</span>(<span class="at">method =</span> <span class="fu">c</span>(<span class="st">&quot;everything&quot;</span>, <span class="st">&quot;pearson&quot;</span>))</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-124-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<p><strong><em>Boxplot</em></strong></p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="data-acquisition.html#cb295-1" tabindex="-1"></a>csu_vb <span class="sc">%&gt;%</span> </span>
<span id="cb295-2"><a href="data-acquisition.html#cb295-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="st">`</span><span class="at">W/L</span><span class="st">`</span>, <span class="at">y=</span>PCT, <span class="at">fill=</span><span class="st">`</span><span class="at">W/L</span><span class="st">`</span>)) <span class="sc">+</span> </span>
<span id="cb295-3"><a href="data-acquisition.html#cb295-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha=</span><span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb295-4"><a href="data-acquisition.html#cb295-4" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb295-5"><a href="data-acquisition.html#cb295-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Match Result&quot;</span>,<span class="at">y=</span><span class="st">&quot;Hitting Percentage&quot;</span>) <span class="sc">+</span></span>
<span id="cb295-6"><a href="data-acquisition.html#cb295-6" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;L&quot;</span>),<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Wins&quot;</span>,<span class="st">&quot;Losses&quot;</span>))</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-125-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<p><strong><em>Violin Plot</em></strong></p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="data-acquisition.html#cb296-1" tabindex="-1"></a>csu_vb <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="st">`</span><span class="at">W/L</span><span class="st">`</span>, <span class="at">y=</span>PCT, <span class="at">fill=</span><span class="st">`</span><span class="at">W/L</span><span class="st">`</span>)) <span class="sc">+</span> </span>
<span id="cb296-2"><a href="data-acquisition.html#cb296-2" tabindex="-1"></a>  <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb296-3"><a href="data-acquisition.html#cb296-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Match Result&quot;</span>,<span class="at">y=</span><span class="st">&quot;Hitting Percentage&quot;</span>) <span class="sc">+</span></span>
<span id="cb296-4"><a href="data-acquisition.html#cb296-4" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;W&quot;</span>, <span class="st">&quot;L&quot;</span>),<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Wins&quot;</span>,<span class="st">&quot;Losses&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb296-5"><a href="data-acquisition.html#cb296-5" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-126-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="importing-data-using-r-libraries" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Importing Data Using R Libraries<a href="data-acquisition.html#importing-data-using-r-libraries" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="baseballr-package" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> BaseballR package<a href="data-acquisition.html#baseballr-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>baseballr</code> package allows for scraping data from Baseball Reference, Fangraphs, and Baseball Savant.</p>
<p>For more information, visit: <a href="https://billpetti.github.io/baseballr/">https://billpetti.github.io/baseballr/</a></p>
<div class="example">
<p><span id="exm:unlabeled-div-131" class="example"><strong>Example 5.3  </strong></span>Use the <code>baseballr</code> package to obtain game results for the Colorado Rockies in 2022. Create a Kable Table of the first 20 games.</p>
</div>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="data-acquisition.html#cb297-1" tabindex="-1"></a><span class="fu">library</span>(baseballr)</span>
<span id="cb297-2"><a href="data-acquisition.html#cb297-2" tabindex="-1"></a></span>
<span id="cb297-3"><a href="data-acquisition.html#cb297-3" tabindex="-1"></a><span class="co"># Scrape data from Baseball Reference</span></span>
<span id="cb297-4"><a href="data-acquisition.html#cb297-4" tabindex="-1"></a>rox22 <span class="ot">&lt;-</span> <span class="fu">bref_team_results</span>(<span class="st">&quot;COL&quot;</span>, <span class="dv">2022</span>)</span>
<span id="cb297-5"><a href="data-acquisition.html#cb297-5" tabindex="-1"></a></span>
<span id="cb297-6"><a href="data-acquisition.html#cb297-6" tabindex="-1"></a><span class="co"># Select relevant columns and display first 20 games</span></span>
<span id="cb297-7"><a href="data-acquisition.html#cb297-7" tabindex="-1"></a>rox22 <span class="sc">%&gt;%</span> </span>
<span id="cb297-8"><a href="data-acquisition.html#cb297-8" tabindex="-1"></a>  <span class="fu">select</span>(Date,H_A,Opp,Result,R,RA,Time,Attendance) <span class="sc">%&gt;%</span> </span>
<span id="cb297-9"><a href="data-acquisition.html#cb297-9" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Date
</th>
<th style="text-align:left;">
H_A
</th>
<th style="text-align:left;">
Opp
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:right;">
R
</th>
<th style="text-align:right;">
RA
</th>
<th style="text-align:left;">
Time
</th>
<th style="text-align:right;">
Attendance
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Friday, Apr 8
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
LAD
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
3:09
</td>
<td style="text-align:right;">
48627
</td>
</tr>
<tr>
<td style="text-align:left;">
Saturday, Apr 9
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
LAD
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2:48
</td>
<td style="text-align:right;">
48087
</td>
</tr>
<tr>
<td style="text-align:left;">
Sunday, Apr 10
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
LAD
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
3:13
</td>
<td style="text-align:right;">
40825
</td>
</tr>
<tr>
<td style="text-align:left;">
Monday, Apr 11
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
TEX
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
4:01
</td>
<td style="text-align:right;">
35052
</td>
</tr>
<tr>
<td style="text-align:left;">
Tuesday, Apr 12
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
TEX
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
3:09
</td>
<td style="text-align:right;">
15862
</td>
</tr>
<tr>
<td style="text-align:left;">
Thursday, Apr 14
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
CHC
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
3:02
</td>
<td style="text-align:right;">
24444
</td>
</tr>
<tr>
<td style="text-align:left;">
Friday, Apr 15
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
CHC
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
3:26
</td>
<td style="text-align:right;">
35450
</td>
</tr>
<tr>
<td style="text-align:left;">
Saturday, Apr 16
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
CHC
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
2:58
</td>
<td style="text-align:right;">
37476
</td>
</tr>
<tr>
<td style="text-align:left;">
Sunday, Apr 17
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
CHC
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
3:19
</td>
<td style="text-align:right;">
36391
</td>
</tr>
<tr>
<td style="text-align:left;">
Monday, Apr 18
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2:53
</td>
<td style="text-align:right;">
20403
</td>
</tr>
<tr>
<td style="text-align:left;">
Tuesday, Apr 19
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
3:02
</td>
<td style="text-align:right;">
23800
</td>
</tr>
<tr>
<td style="text-align:left;">
Wednesday, Apr 20
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
3:09
</td>
<td style="text-align:right;">
21490
</td>
</tr>
<tr>
<td style="text-align:left;">
Saturday, Apr 23 (1)
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
DET
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
3:02
</td>
<td style="text-align:right;">
37566
</td>
</tr>
<tr>
<td style="text-align:left;">
Saturday, Apr 23 (2)
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
DET
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2:47
</td>
<td style="text-align:right;">
28635
</td>
</tr>
<tr>
<td style="text-align:left;">
Sunday, Apr 24
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
DET
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2:55
</td>
<td style="text-align:right;">
20088
</td>
</tr>
<tr>
<td style="text-align:left;">
Monday, Apr 25
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
3:09
</td>
<td style="text-align:right;">
20130
</td>
</tr>
<tr>
<td style="text-align:left;">
Tuesday, Apr 26
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
3:19
</td>
<td style="text-align:right;">
22300
</td>
</tr>
<tr>
<td style="text-align:left;">
Wednesday, Apr 27
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
3:20
</td>
<td style="text-align:right;">
20127
</td>
</tr>
<tr>
<td style="text-align:left;">
Thursday, Apr 28
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
PHI
</td>
<td style="text-align:left;">
L
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
3:08
</td>
<td style="text-align:right;">
20098
</td>
</tr>
<tr>
<td style="text-align:left;">
Friday, Apr 29
</td>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
CIN
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
3:25
</td>
<td style="text-align:right;">
30206
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<!-- :::{.example} -->
<!-- Use the `baseballr` packges to obtain the batting leaderboards for MLB in 2022. Create a table with the top ten players in terms of WAR. -->
<!-- ::: -->
<!-- ```{r,cache=T} -->
<!-- # Scrape data from Fangraphs -->
<!-- bat22 <- fg_batter_leaders(x = 2022, y = 2022) -->
<!-- # Select relevant columns -->
<!-- bat22 = bat22 %>% -->
<!--   select(Name,Team,OPS,WPA,wRC,WAR) -->
<!-- # Arrange by leaders in WAR and print to a Kable table -->
<!-- bat22 %>% -->
<!--   arrange(desc(WAR)) %>% -->
<!--   slice(1:10) %>% -->
<!--   kable(booktabs=T) -->
<!-- ``` -->
<!-- \newpage -->
<!-- :::{.example} -->
<!-- Using the `baseballr` package, obtain the top ten leaders for max hit speed along with these players average hit speed, number of barrels, and barrel percent. Present this information in a Kable table. -->
<!-- ::: -->
<!-- ```{r, cache=T} -->
<!-- # Scrape Statcast data from Baseball Savant -->
<!-- sc_leader <- statcast_leaderboards(leaderboard = "exit_velocity_barrels",year = 2022) -->
<!-- # Select relevant columns -->
<!-- sc_leader %>%  -->
<!--   mutate(Name = paste(first_name, last_name), -->
<!--          `Max Hit Speed` = max_hit_speed, -->
<!--          `Avg Hit Speed` = avg_hit_speed, -->
<!--          `Barrels` = barrels, -->
<!--          `Barrel Percent` = brl_percent) %>% -->
<!--   select(Name,`Max Hit Speed`,`Avg Hit Speed`,`Barrels`,`Barrel Percent`) %>% -->
<!--   arrange(desc(`Max Hit Speed`)) %>% slice(1:10) %>% kable(booktabs=T) -->
<!-- ``` -->
<div style="page-break-after: always;"></div>
<p>This is a useful website for obtaining and visualizing StatCast pitch data:<br />
<a href="https://billpetti.github.io/baseballr/articles/using_statcast_pitch_data.html">https://billpetti.github.io/baseballr/articles/using_statcast_pitch_data.html</a></p>
<div class="example">
<p><span id="exm:unlabeled-div-132" class="example"><strong>Example 5.4  </strong></span>Obtain Shohei Ohtani’s pitch data for the 2022 season. Plot the horizontal and vertical break of the pitches. Also, investigate his fastball velocity by inning.</p>
<p>More about Ohtani’s pitching repertoire: <a href="https://youtu.be/7nZBlYIqEww">https://youtu.be/7nZBlYIqEww</a></p>
<p>More about types of pitches: <a href="https://youtu.be/1FTFWzcgjHE">https://youtu.be/1FTFWzcgjHE</a></p>
</div>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="data-acquisition.html#cb298-1" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb298-2"><a href="data-acquisition.html#cb298-2" tabindex="-1"></a><span class="co"># This follows the example at: </span></span>
<span id="cb298-3"><a href="data-acquisition.html#cb298-3" tabindex="-1"></a><span class="co"># https://billpetti.github.io/baseballr/articles/using_statcast_pitch_data.html</span></span>
<span id="cb298-4"><a href="data-acquisition.html#cb298-4" tabindex="-1"></a></span>
<span id="cb298-5"><a href="data-acquisition.html#cb298-5" tabindex="-1"></a><span class="co"># ohtani_id &lt;- baseballr::playerid_lookup(last_name = &quot;Ohtani&quot;, first_name = &quot;Shohei&quot;) %&gt;% </span></span>
<span id="cb298-6"><a href="data-acquisition.html#cb298-6" tabindex="-1"></a><span class="co">#   pull(mlbam_id)</span></span>
<span id="cb298-7"><a href="data-acquisition.html#cb298-7" tabindex="-1"></a></span>
<span id="cb298-8"><a href="data-acquisition.html#cb298-8" tabindex="-1"></a><span class="co"># can get player id for mlbam at: https://razzball.com/mlbamids/</span></span>
<span id="cb298-9"><a href="data-acquisition.html#cb298-9" tabindex="-1"></a>ohtani_id <span class="ot">&lt;-</span> <span class="st">&quot;660271&quot;</span></span>
<span id="cb298-10"><a href="data-acquisition.html#cb298-10" tabindex="-1"></a>ohtani_data <span class="ot">&lt;-</span> baseballr<span class="sc">::</span><span class="fu">statcast_search_pitchers</span>(<span class="at">start_date =</span> <span class="st">&quot;2022-03-01&quot;</span>,</span>
<span id="cb298-11"><a href="data-acquisition.html#cb298-11" tabindex="-1"></a>                                                   <span class="at">end_date =</span> <span class="st">&quot;2022-12-01&quot;</span>,</span>
<span id="cb298-12"><a href="data-acquisition.html#cb298-12" tabindex="-1"></a>                                                   <span class="at">pitcherid =</span> <span class="st">&quot;660271&quot;</span>)</span>
<span id="cb298-13"><a href="data-acquisition.html#cb298-13" tabindex="-1"></a>ohtani_cleaned_data <span class="ot">&lt;-</span> ohtani_data <span class="sc">%&gt;%</span> </span>
<span id="cb298-14"><a href="data-acquisition.html#cb298-14" tabindex="-1"></a>  <span class="co"># Only keep rows with pitch movement readings</span></span>
<span id="cb298-15"><a href="data-acquisition.html#cb298-15" tabindex="-1"></a>  <span class="co"># and during the regular season</span></span>
<span id="cb298-16"><a href="data-acquisition.html#cb298-16" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(pfx_x), <span class="sc">!</span><span class="fu">is.na</span>(pfx_z),</span>
<span id="cb298-17"><a href="data-acquisition.html#cb298-17" tabindex="-1"></a>         game_type <span class="sc">==</span> <span class="st">&quot;R&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb298-18"><a href="data-acquisition.html#cb298-18" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pfx_x_in_pv =</span> <span class="sc">-</span><span class="dv">12</span><span class="sc">*</span>pfx_x,</span>
<span id="cb298-19"><a href="data-acquisition.html#cb298-19" tabindex="-1"></a>         <span class="at">pfx_z_in =</span> <span class="dv">12</span><span class="sc">*</span>pfx_z)</span>
<span id="cb298-20"><a href="data-acquisition.html#cb298-20" tabindex="-1"></a></span>
<span id="cb298-21"><a href="data-acquisition.html#cb298-21" tabindex="-1"></a>colors <span class="ot">&lt;-</span> <span class="fu">brewer.pal</span>(<span class="at">n =</span> <span class="dv">6</span>, <span class="at">name =</span> <span class="st">&quot;Dark2&quot;</span>)</span>
<span id="cb298-22"><a href="data-acquisition.html#cb298-22" tabindex="-1"></a>pitch_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;4-Seam Fastball&quot;</span> <span class="ot">=</span> colors[<span class="dv">1</span>],</span>
<span id="cb298-23"><a href="data-acquisition.html#cb298-23" tabindex="-1"></a>                  <span class="st">&quot;Sinker&quot;</span> <span class="ot">=</span> colors[<span class="dv">2</span>],</span>
<span id="cb298-24"><a href="data-acquisition.html#cb298-24" tabindex="-1"></a>                  <span class="st">&quot;Curveball&quot;</span> <span class="ot">=</span> colors[<span class="dv">3</span>],</span>
<span id="cb298-25"><a href="data-acquisition.html#cb298-25" tabindex="-1"></a>                  <span class="st">&quot;Slow Curve&quot;</span> <span class="ot">=</span> colors[<span class="dv">4</span>],</span>
<span id="cb298-26"><a href="data-acquisition.html#cb298-26" tabindex="-1"></a>                  <span class="st">&quot;Cutter&quot;</span> <span class="ot">=</span> colors[<span class="dv">5</span>],</span>
<span id="cb298-27"><a href="data-acquisition.html#cb298-27" tabindex="-1"></a>                  <span class="st">&quot;Slider&quot;</span> <span class="ot">=</span> colors[<span class="dv">6</span>],</span>
<span id="cb298-28"><a href="data-acquisition.html#cb298-28" tabindex="-1"></a>                  <span class="st">&quot;Sweeper&quot;</span> <span class="ot">=</span> colors[<span class="dv">7</span>],</span>
<span id="cb298-29"><a href="data-acquisition.html#cb298-29" tabindex="-1"></a>                  <span class="st">&quot;Split-Finger&quot;</span> <span class="ot">=</span> colors[<span class="dv">8</span>])</span>
<span id="cb298-30"><a href="data-acquisition.html#cb298-30" tabindex="-1"></a></span>
<span id="cb298-31"><a href="data-acquisition.html#cb298-31" tabindex="-1"></a>( ohtani_pitch_types <span class="ot">&lt;-</span> <span class="fu">unique</span>(ohtani_cleaned_data<span class="sc">$</span>pitch_name) )</span></code></pre></div>
<pre><code>## [1] &quot;Sweeper&quot;         &quot;Curveball&quot;       &quot;Sinker&quot;          &quot;Cutter&quot;         
## [5] &quot;Slider&quot;          &quot;4-Seam Fastball&quot; &quot;Split-Finger&quot;    &quot;Slow Curve&quot;</code></pre>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="data-acquisition.html#cb300-1" tabindex="-1"></a>ohtani_cleaned_data <span class="sc">%&gt;%</span> </span>
<span id="cb300-2"><a href="data-acquisition.html#cb300-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pfx_x_in_pv, <span class="at">y =</span> pfx_z_in, <span class="at">color =</span> pitch_name)) <span class="sc">+</span></span>
<span id="cb300-3"><a href="data-acquisition.html#cb300-3" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb300-4"><a href="data-acquisition.html#cb300-4" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb300-5"><a href="data-acquisition.html#cb300-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb300-6"><a href="data-acquisition.html#cb300-6" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> pitch_colors,</span>
<span id="cb300-7"><a href="data-acquisition.html#cb300-7" tabindex="-1"></a>                     <span class="at">limits =</span> ohtani_pitch_types) <span class="sc">+</span></span>
<span id="cb300-8"><a href="data-acquisition.html#cb300-8" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">25</span>,<span class="dv">25</span>),</span>
<span id="cb300-9"><a href="data-acquisition.html#cb300-9" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">20</span>,<span class="dv">20</span>, <span class="dv">5</span>),</span>
<span id="cb300-10"><a href="data-acquisition.html#cb300-10" tabindex="-1"></a>                     <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">number_format</span>(<span class="at">suffix =</span> <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">&quot;</span>)) <span class="sc">+</span></span>
<span id="cb300-11"><a href="data-acquisition.html#cb300-11" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">25</span>,<span class="dv">25</span>),</span>
<span id="cb300-12"><a href="data-acquisition.html#cb300-12" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">20</span>,<span class="dv">20</span>, <span class="dv">5</span>),</span>
<span id="cb300-13"><a href="data-acquisition.html#cb300-13" tabindex="-1"></a>                     <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">number_format</span>(<span class="at">suffix =</span> <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">&quot;</span>)) <span class="sc">+</span></span>
<span id="cb300-14"><a href="data-acquisition.html#cb300-14" tabindex="-1"></a>  <span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb300-15"><a href="data-acquisition.html#cb300-15" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Shohei Ohtani Pitch Movement&quot;</span>,</span>
<span id="cb300-16"><a href="data-acquisition.html#cb300-16" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;2022 MLB Season | Pitcher&#39;s POV&quot;</span>,</span>
<span id="cb300-17"><a href="data-acquisition.html#cb300-17" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Data: Baseball Savant via baseballr&quot;</span>, </span>
<span id="cb300-18"><a href="data-acquisition.html#cb300-18" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Horizontal Break&quot;</span>,</span>
<span id="cb300-19"><a href="data-acquisition.html#cb300-19" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Induced Vertical Break&quot;</span>,</span>
<span id="cb300-20"><a href="data-acquisition.html#cb300-20" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;Pitch Name&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/r-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="data-acquisition.html#cb301-1" tabindex="-1"></a><span class="co"># Group pitches by inning</span></span>
<span id="cb301-2"><a href="data-acquisition.html#cb301-2" tabindex="-1"></a>ohtani_velo_by_inning <span class="ot">&lt;-</span> ohtani_cleaned_data <span class="sc">%&gt;%</span> </span>
<span id="cb301-3"><a href="data-acquisition.html#cb301-3" tabindex="-1"></a>  <span class="fu">filter</span>(pitch_name <span class="sc">==</span> <span class="st">&quot;4-Seam Fastball&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb301-4"><a href="data-acquisition.html#cb301-4" tabindex="-1"></a>  <span class="fu">group_by</span>(inning, pitch_name) <span class="sc">%&gt;%</span> </span>
<span id="cb301-5"><a href="data-acquisition.html#cb301-5" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">average_velo =</span> <span class="fu">mean</span>(release_speed, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb301-6"><a href="data-acquisition.html#cb301-6" tabindex="-1"></a></span>
<span id="cb301-7"><a href="data-acquisition.html#cb301-7" tabindex="-1"></a><span class="co"># Plot average fastball speed by inning</span></span>
<span id="cb301-8"><a href="data-acquisition.html#cb301-8" tabindex="-1"></a>ohtani_velo_by_inning <span class="sc">%&gt;%</span> </span>
<span id="cb301-9"><a href="data-acquisition.html#cb301-9" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> inning, <span class="at">y =</span> average_velo, <span class="at">color =</span> pitch_name)) <span class="sc">+</span></span>
<span id="cb301-10"><a href="data-acquisition.html#cb301-10" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb301-11"><a href="data-acquisition.html#cb301-11" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb301-12"><a href="data-acquisition.html#cb301-12" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> pitch_colors) <span class="sc">+</span></span>
<span id="cb301-13"><a href="data-acquisition.html#cb301-13" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>) <span class="sc">+</span></span>
<span id="cb301-14"><a href="data-acquisition.html#cb301-14" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb301-15"><a href="data-acquisition.html#cb301-15" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Shohei Ohtani 4-Seam Fastball Velo By Inning&quot;</span>,</span>
<span id="cb301-16"><a href="data-acquisition.html#cb301-16" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;2022 MLB Season&quot;</span>,</span>
<span id="cb301-17"><a href="data-acquisition.html#cb301-17" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Data: Baseball Savant via baseballr&quot;</span>,</span>
<span id="cb301-18"><a href="data-acquisition.html#cb301-18" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Inning&quot;</span>,</span>
<span id="cb301-19"><a href="data-acquisition.html#cb301-19" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Average Velo&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-129-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="nflfastr-package" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> nflfastR package<a href="data-acquisition.html#nflfastr-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>nflfastR</code> package is a helpful package for obtaining play-by-play and roster data for NFL games.</p>
<p>For more details, see: <a href="https://www.nflfastr.com/articles/nflfastR.html">https://www.nflfastr.com/articles/nflfastR.html</a></p>
<p>For a quick explanation of expected points added, see: <a href="https://youtu.be/qo7-zeJEVzs">https://youtu.be/qo7-zeJEVzs</a></p>
<div class="example">
<p><span id="exm:unlabeled-div-133" class="example"><strong>Example 5.5  </strong></span>Use the <code>nflfastR</code> package to obtain the play-by-play data for the Denver Broncos home game against the San Francisco 49ers during the 2022 season.</p>
</div>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="data-acquisition.html#cb302-1" tabindex="-1"></a><span class="fu">library</span>(nflfastR)</span>
<span id="cb302-2"><a href="data-acquisition.html#cb302-2" tabindex="-1"></a><span class="fu">library</span>(gsisdecoder)</span>
<span id="cb302-3"><a href="data-acquisition.html#cb302-3" tabindex="-1"></a><span class="co"># First find the game ID by searching Broncos home games in 2022</span></span>
<span id="cb302-4"><a href="data-acquisition.html#cb302-4" tabindex="-1"></a><span class="fu">fast_scraper_schedules</span>(<span class="dv">2022</span>) <span class="sc">%&gt;%</span></span>
<span id="cb302-5"><a href="data-acquisition.html#cb302-5" tabindex="-1"></a>  <span class="fu">filter</span>(home_team<span class="sc">==</span><span class="st">&quot;DEN&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb302-6"><a href="data-acquisition.html#cb302-6" tabindex="-1"></a>  <span class="fu">select</span>(game_id,gameday,away_team,home_team) <span class="sc">%&gt;%</span></span>
<span id="cb302-7"><a href="data-acquisition.html#cb302-7" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
game_id
</th>
<th style="text-align:left;">
gameday
</th>
<th style="text-align:left;">
away_team
</th>
<th style="text-align:left;">
home_team
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2022_02_HOU_DEN
</td>
<td style="text-align:left;">
2022-09-18
</td>
<td style="text-align:left;">
HOU
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
<tr>
<td style="text-align:left;">
2022_03_SF_DEN
</td>
<td style="text-align:left;">
2022-09-25
</td>
<td style="text-align:left;">
SF
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
<tr>
<td style="text-align:left;">
2022_05_IND_DEN
</td>
<td style="text-align:left;">
2022-10-06
</td>
<td style="text-align:left;">
IND
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
<tr>
<td style="text-align:left;">
2022_07_NYJ_DEN
</td>
<td style="text-align:left;">
2022-10-23
</td>
<td style="text-align:left;">
NYJ
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
<tr>
<td style="text-align:left;">
2022_11_LV_DEN
</td>
<td style="text-align:left;">
2022-11-20
</td>
<td style="text-align:left;">
LV
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
<tr>
<td style="text-align:left;">
2022_14_KC_DEN
</td>
<td style="text-align:left;">
2022-12-11
</td>
<td style="text-align:left;">
KC
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
<tr>
<td style="text-align:left;">
2022_15_ARI_DEN
</td>
<td style="text-align:left;">
2022-12-18
</td>
<td style="text-align:left;">
ARI
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
<tr>
<td style="text-align:left;">
2022_18_LAC_DEN
</td>
<td style="text-align:left;">
2023-01-08
</td>
<td style="text-align:left;">
LAC
</td>
<td style="text-align:left;">
DEN
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="data-acquisition.html#cb303-1" tabindex="-1"></a><span class="co"># Scrape play-by-play data for 2023</span></span>
<span id="cb303-2"><a href="data-acquisition.html#cb303-2" tabindex="-1"></a><span class="co"># Example from Football Analytics with Python and R (Eager and Erickson)</span></span>
<span id="cb303-3"><a href="data-acquisition.html#cb303-3" tabindex="-1"></a><span class="fu">library</span>(nflfastR)</span>
<span id="cb303-4"><a href="data-acquisition.html#cb303-4" tabindex="-1"></a>pbp <span class="ot">&lt;-</span> nflfastR<span class="sc">::</span><span class="fu">load_pbp</span>(<span class="dv">2023</span>)</span>
<span id="cb303-5"><a href="data-acquisition.html#cb303-5" tabindex="-1"></a>pbp_run <span class="ot">&lt;-</span> pbp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(rush <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(rusher_id)) <span class="sc">%&gt;%</span></span>
<span id="cb303-6"><a href="data-acquisition.html#cb303-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rushing_yards =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(rushing_yards),<span class="dv">0</span>,rushing_yards))</span>
<span id="cb303-7"><a href="data-acquisition.html#cb303-7" tabindex="-1"></a><span class="fu">ggplot</span>(pbp_run,<span class="fu">aes</span>(<span class="at">x=</span>ydstogo,<span class="at">y=</span>rushing_yards)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb303-8"><a href="data-acquisition.html#cb303-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Yards To Go&quot;</span>,<span class="at">y=</span><span class="st">&quot;Rushing Yards&quot;</span>,<span class="at">title=</span><span class="st">&quot;Rushing Yards vs. Yards To Go, NFL 2023&quot;</span>) <span class="sc">+</span></span>
<span id="cb303-9"><a href="data-acquisition.html#cb303-9" tabindex="-1"></a>  <span class="fu">stat_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-131-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="data-acquisition.html#cb304-1" tabindex="-1"></a><span class="co"># Plot 2023 Team EPA/play</span></span>
<span id="cb304-2"><a href="data-acquisition.html#cb304-2" tabindex="-1"></a><span class="fu">library</span>(nflplotR)</span>
<span id="cb304-3"><a href="data-acquisition.html#cb304-3" tabindex="-1"></a><span class="co"># Example from: https://www.nflfastr.com/articles/nflfastR.html</span></span>
<span id="cb304-4"><a href="data-acquisition.html#cb304-4" tabindex="-1"></a>pbp <span class="ot">&lt;-</span> nflfastR<span class="sc">::</span><span class="fu">load_pbp</span>(<span class="dv">2023</span>) <span class="sc">%&gt;%</span></span>
<span id="cb304-5"><a href="data-acquisition.html#cb304-5" tabindex="-1"></a>  <span class="fu">filter</span>(season_type <span class="sc">==</span> <span class="st">&quot;REG&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb304-6"><a href="data-acquisition.html#cb304-6" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(posteam) <span class="sc">&amp;</span> (rush <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> pass <span class="sc">==</span> <span class="dv">1</span>))</span>
<span id="cb304-7"><a href="data-acquisition.html#cb304-7" tabindex="-1"></a>offense <span class="ot">&lt;-</span> pbp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="at">team =</span> posteam) <span class="sc">%&gt;%</span></span>
<span id="cb304-8"><a href="data-acquisition.html#cb304-8" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">off_epa =</span> <span class="fu">mean</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb304-9"><a href="data-acquisition.html#cb304-9" tabindex="-1"></a>defense <span class="ot">&lt;-</span> pbp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(<span class="at">team =</span> defteam) <span class="sc">%&gt;%</span> </span>
<span id="cb304-10"><a href="data-acquisition.html#cb304-10" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">def_epa =</span> <span class="fu">mean</span>(epa, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb304-11"><a href="data-acquisition.html#cb304-11" tabindex="-1"></a>offense <span class="sc">%&gt;%</span></span>
<span id="cb304-12"><a href="data-acquisition.html#cb304-12" tabindex="-1"></a>  <span class="fu">inner_join</span>(defense, <span class="at">by =</span> <span class="st">&quot;team&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb304-13"><a href="data-acquisition.html#cb304-13" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> off_epa, <span class="at">y =</span> def_epa)) <span class="sc">+</span></span>
<span id="cb304-14"><a href="data-acquisition.html#cb304-14" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope =</span> <span class="sc">-</span><span class="fl">1.5</span>, <span class="at">intercept =</span> <span class="fu">c</span>(.<span class="dv">4</span>, .<span class="dv">3</span>, .<span class="dv">2</span>, .<span class="dv">1</span>, <span class="dv">0</span>, <span class="sc">-</span>.<span class="dv">1</span>, <span class="sc">-</span>.<span class="dv">2</span>, <span class="sc">-</span>.<span class="dv">3</span>), <span class="at">alpha =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb304-15"><a href="data-acquisition.html#cb304-15" tabindex="-1"></a>  <span class="fu">geom_mean_lines</span>(<span class="fu">aes</span>(<span class="at">h_var =</span> off_epa, <span class="at">v_var =</span> def_epa)) <span class="sc">+</span></span>
<span id="cb304-16"><a href="data-acquisition.html#cb304-16" tabindex="-1"></a>  <span class="fu">geom_nfl_logos</span>(<span class="fu">aes</span>(<span class="at">team_abbr =</span> team), <span class="at">width =</span> <span class="fl">0.07</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb304-17"><a href="data-acquisition.html#cb304-17" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Offense EPA/play&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Defense EPA/play&quot;</span>, <span class="at">caption =</span> <span class="st">&quot;Data: @nflfastR&quot;</span>,</span>
<span id="cb304-18"><a href="data-acquisition.html#cb304-18" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;2022 NFL Offensive and Defensive EPA per Play&quot;</span>) <span class="sc">+</span></span>
<span id="cb304-19"><a href="data-acquisition.html#cb304-19" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb304-20"><a href="data-acquisition.html#cb304-20" tabindex="-1"></a>  <span class="fu">theme</span>( <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>) ) <span class="sc">+</span></span>
<span id="cb304-21"><a href="data-acquisition.html#cb304-21" tabindex="-1"></a>  <span class="fu">scale_y_reverse</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-132-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="hoopr-package" class="section level3 hasAnchor" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> hoopR package<a href="data-acquisition.html#hoopr-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>hoopR</code> allows for one to access data related to professional and college basketball.</p>
<div class="example">
<p><span id="exm:unlabeled-div-134" class="example"><strong>Example 5.6  </strong></span>Using the <code>hoopR</code> package, obtain the play-by-play data for the Denver Nuggets vs. Philadelphia 76ers game on January 28, 2023.</p>
</div>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="data-acquisition.html#cb305-1" tabindex="-1"></a><span class="fu">library</span>(hoopR)</span>
<span id="cb305-2"><a href="data-acquisition.html#cb305-2" tabindex="-1"></a><span class="co"># https://www.espn.com/nba/game/_/gameId/401468896</span></span>
<span id="cb305-3"><a href="data-acquisition.html#cb305-3" tabindex="-1"></a>hoopR<span class="sc">::</span><span class="fu">espn_nba_pbp</span>(<span class="at">game_id =</span> <span class="dv">401468896</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb305-4"><a href="data-acquisition.html#cb305-4" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">`</span><span class="at">Description</span><span class="st">`</span><span class="ot">=</span>text,<span class="st">`</span><span class="at">Play Type</span><span class="st">`</span><span class="ot">=</span>type_text,</span>
<span id="cb305-5"><a href="data-acquisition.html#cb305-5" tabindex="-1"></a>         <span class="at">Quarter=</span>period_display_value,<span class="at">Points=</span>score_value,<span class="at">Clock=</span>clock_display_value) <span class="sc">%&gt;%</span></span>
<span id="cb305-6"><a href="data-acquisition.html#cb305-6" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>) <span class="sc">%&gt;%</span></span>
<span id="cb305-7"><a href="data-acquisition.html#cb305-7" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb305-8"><a href="data-acquisition.html#cb305-8" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">1</span>, <span class="at">width =</span> <span class="st">&quot;3in&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb305-9"><a href="data-acquisition.html#cb305-9" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">2</span>, <span class="at">width =</span> <span class="st">&quot;1in&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Description
</th>
<th style="text-align:left;">
Play Type
</th>
<th style="text-align:left;">
Quarter
</th>
<th style="text-align:right;">
Points
</th>
<th style="text-align:left;">
Clock
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;width: 3in; ">
Nikola Jokic vs. Joel Embiid (Jamal Murray gains possession)
</td>
<td style="text-align:left;width: 1in; ">
Jumpball
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
12:00
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Nikola Jokic misses 11-foot jumper
</td>
<td style="text-align:left;width: 1in; ">
Jump Shot
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
11:45
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
James Harden defensive rebound
</td>
<td style="text-align:left;width: 1in; ">
Defensive Rebound
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
11:41
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Joel Embiid makes 6-foot two point shot (James Harden assists)
</td>
<td style="text-align:left;width: 1in; ">
Driving Floating Bank Jump Shot
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
11:35
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Nikola Jokic shooting foul
</td>
<td style="text-align:left;width: 1in; ">
Shooting Foul
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
11:35
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Joel Embiid misses free throw 1 of 1
</td>
<td style="text-align:left;width: 1in; ">
Free Throw - 1 of 1
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
11:35
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Michael Porter Jr. defensive rebound
</td>
<td style="text-align:left;width: 1in; ">
Defensive Rebound
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
11:32
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Michael Porter Jr. makes 27-foot three point jumper (Kentavious Caldwell-Pope assists)
</td>
<td style="text-align:left;width: 1in; ">
Jump Shot
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
11:20
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Tobias Harris misses 26-foot three point jumper
</td>
<td style="text-align:left;width: 1in; ">
Jump Shot
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
10:58
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Kentavious Caldwell-Pope defensive rebound
</td>
<td style="text-align:left;width: 1in; ">
Defensive Rebound
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
10:55
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Nikola Jokic makes finger roll layup (Jamal Murray assists)
</td>
<td style="text-align:left;width: 1in; ">
Finger Roll Layup
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
10:48
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Joel Embiid makes driving layup (James Harden assists)
</td>
<td style="text-align:left;width: 1in; ">
Driving Layup Shot
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
10:37
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Aaron Gordon makes 16-foot pullup jump shot
</td>
<td style="text-align:left;width: 1in; ">
Pullup Jump Shot
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
10:25
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Joel Embiid makes 14-foot pullup jump shot
</td>
<td style="text-align:left;width: 1in; ">
Pullup Jump Shot
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
10:12
</td>
</tr>
<tr>
<td style="text-align:left;width: 3in; ">
Joel Embiid shooting foul
</td>
<td style="text-align:left;width: 1in; ">
Shooting Foul
</td>
<td style="text-align:left;">
1st Quarter
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
9:59
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="data-acquisition.html#cb306-1" tabindex="-1"></a>nba_pbp <span class="ot">&lt;-</span> <span class="fu">load_nba_pbp</span>(<span class="dv">2018</span>)</span>
<span id="cb306-2"><a href="data-acquisition.html#cb306-2" tabindex="-1"></a>jokic_shots <span class="ot">=</span> nba_pbp <span class="sc">%&gt;%</span> </span>
<span id="cb306-3"><a href="data-acquisition.html#cb306-3" tabindex="-1"></a>  <span class="fu">filter</span>(shooting_play <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb306-4"><a href="data-acquisition.html#cb306-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">&quot;Jokic&quot;</span>, text))</span>
<span id="cb306-5"><a href="data-acquisition.html#cb306-5" tabindex="-1"></a>jokic_shots <span class="sc">%&gt;%</span> <span class="fu">select</span>(text) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## ── ESPN NBA Play-by-Play from hoopR data repository ───────────── hoopR 1.8.0 ──</code></pre>
<pre><code>## ℹ Data updated: 2023-04-03 15:04:16 MDT</code></pre>
<pre><code>## # A tibble: 6 × 1
##   text                                                               
##   &lt;chr&gt;                                                              
## 1 Nikola Jokic misses 25-foot three point jumper                     
## 2 Nikola Jokic makes jumper (Jamal Murray assists)                   
## 3 Nikola Jokic misses 22-foot jumper                                 
## 4 Nikola Jokic misses layup                                          
## 5 Will Barton makes 23-foot three point jumper (Nikola Jokic assists)
## 6 Nikola Jokic makes 3-foot layup (Will Barton assists)</code></pre>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="data-acquisition.html#cb310-1" tabindex="-1"></a>jokic_data <span class="ot">=</span> <span class="fu">filter</span>(jokic_shots, athlete_id_1 <span class="sc">==</span> <span class="dv">3112335</span>, shooting_play <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb310-2"><a href="data-acquisition.html#cb310-2" tabindex="-1"></a>jokic_data<span class="sc">$</span>xx <span class="ot">&lt;-</span> jokic_data<span class="sc">$</span>coordinate_x_raw <span class="sc">-</span> <span class="dv">25</span> <span class="co">#transformation</span></span>
<span id="cb310-3"><a href="data-acquisition.html#cb310-3" tabindex="-1"></a>jokic_data<span class="sc">$</span>yy <span class="ot">&lt;-</span> jokic_data<span class="sc">$</span>coordinate_y_raw <span class="sc">-</span> <span class="fl">41.75</span> <span class="co">#transformation</span></span>
<span id="cb310-4"><a href="data-acquisition.html#cb310-4" tabindex="-1"></a></span>
<span id="cb310-5"><a href="data-acquisition.html#cb310-5" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;BasketballAnalyzeR&quot;</span>)</span>
<span id="cb310-6"><a href="data-acquisition.html#cb310-6" tabindex="-1"></a>p <span class="ot">&lt;-</span> jokic_data <span class="sc">%&gt;%</span></span>
<span id="cb310-7"><a href="data-acquisition.html#cb310-7" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span>xx, <span class="at">y =</span> yy)) <span class="sc">+</span></span>
<span id="cb310-8"><a href="data-acquisition.html#cb310-8" tabindex="-1"></a><span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb310-9"><a href="data-acquisition.html#cb310-9" tabindex="-1"></a><span class="fu">coord_equal</span>() <span class="sc">+</span></span>
<span id="cb310-10"><a href="data-acquisition.html#cb310-10" tabindex="-1"></a><span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb310-11"><a href="data-acquisition.html#cb310-11" tabindex="-1"></a><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Jokic Shot Attempt Chart 2017-18&quot;</span>)</span>
<span id="cb310-12"><a href="data-acquisition.html#cb310-12" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">drawNBAcourt</span>(p, <span class="at">size =</span> <span class="fl">0.5</span>)</span>
<span id="cb310-13"><a href="data-acquisition.html#cb310-13" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-135-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-135" class="example"><strong>Example 5.7  </strong></span>Obtain win probability as a function of game time for Colorado State vs. Boise State men’s basketball on January 28, 2023.</p>
</div>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="data-acquisition.html#cb311-1" tabindex="-1"></a><span class="co"># Get ID from ESPN game URL: https://www.espn.com/mens-college-basketball/game/_/gameId/401482835</span></span>
<span id="cb311-2"><a href="data-acquisition.html#cb311-2" tabindex="-1"></a><span class="fu">library</span>(hoopR)</span>
<span id="cb311-3"><a href="data-acquisition.html#cb311-3" tabindex="-1"></a>hoopR<span class="sc">::</span><span class="fu">espn_mbb_wp</span>(<span class="at">game_id =</span> <span class="dv">401597306</span>) <span class="sc">%&gt;%</span></span>
<span id="cb311-4"><a href="data-acquisition.html#cb311-4" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">Period=</span>period,<span class="st">`</span><span class="at">Seconds Remaining</span><span class="st">`</span><span class="ot">=</span>game_seconds_left,<span class="st">`</span><span class="at">Home Win Pct</span><span class="st">`</span><span class="ot">=</span>home_win_percentage,<span class="st">`</span><span class="at">Play ID</span><span class="st">`</span><span class="ot">=</span>play_id) <span class="sc">%&gt;%</span></span>
<span id="cb311-5"><a href="data-acquisition.html#cb311-5" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb311-6"><a href="data-acquisition.html#cb311-6" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
Period
</th>
<th style="text-align:right;">
Seconds Remaining
</th>
<th style="text-align:right;">
Home Win Pct
</th>
<th style="text-align:left;">
Play ID
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2378
</td>
<td style="text-align:right;">
0.712
</td>
<td style="text-align:left;">
401597306101806101
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2375
</td>
<td style="text-align:right;">
0.717
</td>
<td style="text-align:left;">
401597306101806401
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2357
</td>
<td style="text-align:right;">
0.700
</td>
<td style="text-align:left;">
401597306101808201
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2353
</td>
<td style="text-align:right;">
0.695
</td>
<td style="text-align:left;">
401597306101808601
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2346
</td>
<td style="text-align:right;">
0.710
</td>
<td style="text-align:left;">
401597306101809301
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2341
</td>
<td style="text-align:right;">
0.694
</td>
<td style="text-align:left;">
401597306101809801
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2341
</td>
<td style="text-align:right;">
0.710
</td>
<td style="text-align:left;">
401597306101809802
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2340
</td>
<td style="text-align:right;">
0.715
</td>
<td style="text-align:left;">
401597306101809901
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2337
</td>
<td style="text-align:right;">
0.694
</td>
<td style="text-align:left;">
401597306101814201
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2319
</td>
<td style="text-align:right;">
0.708
</td>
<td style="text-align:left;">
401597306101816001
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="data-acquisition.html#cb312-1" tabindex="-1"></a>csu_game <span class="ot">&lt;-</span> hoopR<span class="sc">::</span><span class="fu">espn_mbb_wp</span>(<span class="at">game_id =</span> <span class="dv">401597306</span>) <span class="sc">%&gt;%</span></span>
<span id="cb312-2"><a href="data-acquisition.html#cb312-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">Period=</span>period,<span class="st">`</span><span class="at">Seconds Remaining</span><span class="st">`</span><span class="ot">=</span>game_seconds_left,<span class="st">`</span><span class="at">Home Win Pct</span><span class="st">`</span><span class="ot">=</span>home_win_percentage,<span class="st">`</span><span class="at">Play ID</span><span class="st">`</span><span class="ot">=</span>play_id) <span class="sc">%&gt;%</span></span>
<span id="cb312-3"><a href="data-acquisition.html#cb312-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Time Played</span><span class="st">`</span><span class="ot">=</span><span class="dv">2400</span><span class="sc">-</span><span class="st">`</span><span class="at">Seconds Remaining</span><span class="st">`</span>)</span>
<span id="cb312-4"><a href="data-acquisition.html#cb312-4" tabindex="-1"></a>csu_game <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="st">`</span><span class="at">Time Played</span><span class="st">`</span>,<span class="at">y=</span><span class="st">`</span><span class="at">Home Win Pct</span><span class="st">`</span>)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-137-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="hockeyr-package" class="section level3 hasAnchor" number="5.3.4">
<h3><span class="header-section-number">5.3.4</span> hockeyR package<a href="data-acquisition.html#hockeyr-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>hockeyR</code> packages allows you to obtain data from NHL.com and Hockey Reference. The <code>sportyR</code> package is useful for plotting spatial data on various playing fields/courts.</p>
<div class="example">
<p><span id="exm:unlabeled-div-136" class="example"><strong>Example 5.8  </strong></span>Create a shot plot for the Colorado Avalanche vs. St. Louis Blues on January 28, 2023.</p>
</div>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="data-acquisition.html#cb313-1" tabindex="-1"></a><span class="co"># Example adapted from: https://hockeyr.netlify.app/</span></span>
<span id="cb313-2"><a href="data-acquisition.html#cb313-2" tabindex="-1"></a><span class="co"># devtools::install_github(&quot;danmorse314/hockeyR&quot;)</span></span>
<span id="cb313-3"><a href="data-acquisition.html#cb313-3" tabindex="-1"></a><span class="fu">library</span>(hockeyR)</span>
<span id="cb313-4"><a href="data-acquisition.html#cb313-4" tabindex="-1"></a><span class="fu">library</span>(sportyR)</span>
<span id="cb313-5"><a href="data-acquisition.html#cb313-5" tabindex="-1"></a></span>
<span id="cb313-6"><a href="data-acquisition.html#cb313-6" tabindex="-1"></a>pbp <span class="ot">&lt;-</span> hockeyR<span class="sc">::</span><span class="fu">load_pbp</span>(<span class="st">&#39;2022-2023&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="data-acquisition.html#cb314-1" tabindex="-1"></a><span class="co"># get single game</span></span>
<span id="cb314-2"><a href="data-acquisition.html#cb314-2" tabindex="-1"></a>game <span class="ot">&lt;-</span> pbp <span class="sc">%&gt;%</span></span>
<span id="cb314-3"><a href="data-acquisition.html#cb314-3" tabindex="-1"></a>  <span class="fu">filter</span>(game_date <span class="sc">==</span> <span class="st">&quot;2023-01-28&quot;</span> <span class="sc">&amp;</span> home_abbreviation <span class="sc">==</span> <span class="st">&quot;COL&quot;</span>)</span>
<span id="cb314-4"><a href="data-acquisition.html#cb314-4" tabindex="-1"></a>game <span class="sc">%&gt;%</span> </span>
<span id="cb314-5"><a href="data-acquisition.html#cb314-5" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">Date=</span>game_date,<span class="at">Period=</span>period,<span class="at">Time=</span>period_time_remaining,<span class="at">Event=</span>event,</span>
<span id="cb314-6"><a href="data-acquisition.html#cb314-6" tabindex="-1"></a>         <span class="at">Description=</span>description) <span class="sc">%&gt;%</span></span>
<span id="cb314-7"><a href="data-acquisition.html#cb314-7" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb314-8"><a href="data-acquisition.html#cb314-8" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Date
</th>
<th style="text-align:right;">
Period
</th>
<th style="text-align:left;">
Time
</th>
<th style="text-align:left;">
Event
</th>
<th style="text-align:left;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
20:00
</td>
<td style="text-align:left;">
Game Scheduled
</td>
<td style="text-align:left;">
Game Scheduled
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
20:00
</td>
<td style="text-align:left;">
Faceoff
</td>
<td style="text-align:left;">
J.T. Compher faceoff won against Noel Acciari
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
19:47
</td>
<td style="text-align:left;">
Stoppage
</td>
<td style="text-align:left;">
Icing
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
19:47
</td>
<td style="text-align:left;">
Faceoff
</td>
<td style="text-align:left;">
J.T. Compher faceoff won against Noel Acciari
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
19:35
</td>
<td style="text-align:left;">
Takeaway
</td>
<td style="text-align:left;">
Takeaway by Matt Nieto
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
19:09
</td>
<td style="text-align:left;">
Shot
</td>
<td style="text-align:left;">
Torey Krug Wrist Shot saved by Alexandar Georgiev
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
19:09
</td>
<td style="text-align:left;">
Stoppage
</td>
<td style="text-align:left;">
Goalie Stopped
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
19:09
</td>
<td style="text-align:left;">
Faceoff
</td>
<td style="text-align:left;">
Nathan MacKinnon faceoff won against Brayden Schenn
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
18:39
</td>
<td style="text-align:left;">
Shot
</td>
<td style="text-align:left;">
Evan Rodrigues Wrist Shot saved by Jordan Binnington
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
18:07
</td>
<td style="text-align:left;">
Hit
</td>
<td style="text-align:left;">
Andreas Englund hit Logan Brown
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
17:30
</td>
<td style="text-align:left;">
Shot
</td>
<td style="text-align:left;">
Denis Malgin Wrist Shot saved by Jordan Binnington
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
17:21
</td>
<td style="text-align:left;">
Blocked Shot
</td>
<td style="text-align:left;">
Samuel Girard shot blocked shot by Niko Mikkola
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
16:46
</td>
<td style="text-align:left;">
Hit
</td>
<td style="text-align:left;">
Noel Acciari hit Erik Johnson
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
16:35
</td>
<td style="text-align:left;">
Missed Shot
</td>
<td style="text-align:left;">
Noel Acciari Wide of Net Alexandar Georgiev
</td>
</tr>
<tr>
<td style="text-align:left;">
2023-01-28
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
16:25
</td>
<td style="text-align:left;">
Shot
</td>
<td style="text-align:left;">
Matt Nieto Wrist Shot saved by Jordan Binnington
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="data-acquisition.html#cb315-1" tabindex="-1"></a><span class="co"># grab team logos &amp; colors</span></span>
<span id="cb315-2"><a href="data-acquisition.html#cb315-2" tabindex="-1"></a>team_logos <span class="ot">&lt;-</span> hockeyR<span class="sc">::</span>team_logos_colors <span class="sc">%&gt;%</span></span>
<span id="cb315-3"><a href="data-acquisition.html#cb315-3" tabindex="-1"></a>  <span class="fu">filter</span>(team_abbr <span class="sc">==</span> <span class="fu">unique</span>(game<span class="sc">$</span>home_abbreviation) <span class="sc">|</span> team_abbr <span class="sc">==</span> <span class="fu">unique</span>(game<span class="sc">$</span>away_abbreviation)) <span class="sc">%&gt;%</span></span>
<span id="cb315-4"><a href="data-acquisition.html#cb315-4" tabindex="-1"></a>  <span class="co"># add in dummy variables to put logos on the ice</span></span>
<span id="cb315-5"><a href="data-acquisition.html#cb315-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">x =</span> <span class="fu">ifelse</span>(full_team_name <span class="sc">==</span> <span class="fu">unique</span>(game<span class="sc">$</span>home_name), <span class="dv">50</span>, <span class="sc">-</span><span class="dv">50</span>),</span>
<span id="cb315-6"><a href="data-acquisition.html#cb315-6" tabindex="-1"></a>         <span class="at">y =</span> <span class="dv">0</span>)</span>
<span id="cb315-7"><a href="data-acquisition.html#cb315-7" tabindex="-1"></a></span>
<span id="cb315-8"><a href="data-acquisition.html#cb315-8" tabindex="-1"></a><span class="co"># add transparency to logo</span></span>
<span id="cb315-9"><a href="data-acquisition.html#cb315-9" tabindex="-1"></a>transparent <span class="ot">&lt;-</span> <span class="cf">function</span>(img) {</span>
<span id="cb315-10"><a href="data-acquisition.html#cb315-10" tabindex="-1"></a>  magick<span class="sc">::</span><span class="fu">image_fx</span>(img, <span class="at">expression =</span> <span class="st">&quot;0.3*a&quot;</span>, <span class="at">channel =</span> <span class="st">&quot;alpha&quot;</span>)</span>
<span id="cb315-11"><a href="data-acquisition.html#cb315-11" tabindex="-1"></a>}</span>
<span id="cb315-12"><a href="data-acquisition.html#cb315-12" tabindex="-1"></a></span>
<span id="cb315-13"><a href="data-acquisition.html#cb315-13" tabindex="-1"></a><span class="co"># get only shot events</span></span>
<span id="cb315-14"><a href="data-acquisition.html#cb315-14" tabindex="-1"></a>fenwick_events <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;MISSED_SHOT&quot;</span>,<span class="st">&quot;SHOT&quot;</span>,<span class="st">&quot;GOAL&quot;</span>)</span>
<span id="cb315-15"><a href="data-acquisition.html#cb315-15" tabindex="-1"></a></span>
<span id="cb315-16"><a href="data-acquisition.html#cb315-16" tabindex="-1"></a>shots <span class="ot">&lt;-</span> game <span class="sc">%&gt;%</span> <span class="fu">filter</span>(event_type <span class="sc">%in%</span> fenwick_events) <span class="sc">%&gt;%</span></span>
<span id="cb315-17"><a href="data-acquisition.html#cb315-17" tabindex="-1"></a>  <span class="co"># adding team colors</span></span>
<span id="cb315-18"><a href="data-acquisition.html#cb315-18" tabindex="-1"></a>  <span class="fu">left_join</span>(team_logos, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;event_team_abbr&quot;</span> <span class="ot">=</span> <span class="st">&quot;team_abbr&quot;</span>))</span>
<span id="cb315-19"><a href="data-acquisition.html#cb315-19" tabindex="-1"></a></span>
<span id="cb315-20"><a href="data-acquisition.html#cb315-20" tabindex="-1"></a><span class="co"># create shot plot</span></span>
<span id="cb315-21"><a href="data-acquisition.html#cb315-21" tabindex="-1"></a><span class="fu">geom_hockey</span>(<span class="st">&quot;nhl&quot;</span>) <span class="sc">+</span></span>
<span id="cb315-22"><a href="data-acquisition.html#cb315-22" tabindex="-1"></a>  ggimage<span class="sc">::</span><span class="fu">geom_image</span>(</span>
<span id="cb315-23"><a href="data-acquisition.html#cb315-23" tabindex="-1"></a>    <span class="at">data =</span> team_logos,</span>
<span id="cb315-24"><a href="data-acquisition.html#cb315-24" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">image =</span> team_logo_espn),</span>
<span id="cb315-25"><a href="data-acquisition.html#cb315-25" tabindex="-1"></a>    <span class="at">image_fun =</span> transparent, <span class="at">size =</span> <span class="fl">0.22</span>, <span class="at">asp =</span> <span class="fl">2.35</span></span>
<span id="cb315-26"><a href="data-acquisition.html#cb315-26" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb315-27"><a href="data-acquisition.html#cb315-27" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb315-28"><a href="data-acquisition.html#cb315-28" tabindex="-1"></a>    <span class="at">data =</span> shots,</span>
<span id="cb315-29"><a href="data-acquisition.html#cb315-29" tabindex="-1"></a>    <span class="fu">aes</span>(x_fixed, y_fixed),</span>
<span id="cb315-30"><a href="data-acquisition.html#cb315-30" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb315-31"><a href="data-acquisition.html#cb315-31" tabindex="-1"></a>    <span class="at">color =</span> shots<span class="sc">$</span>team_color1,</span>
<span id="cb315-32"><a href="data-acquisition.html#cb315-32" tabindex="-1"></a>    <span class="at">shape =</span> <span class="fu">ifelse</span>(shots<span class="sc">$</span>event_type <span class="sc">==</span> <span class="st">&quot;GOAL&quot;</span>, <span class="dv">19</span>, <span class="dv">1</span>)</span>
<span id="cb315-33"><a href="data-acquisition.html#cb315-33" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb315-34"><a href="data-acquisition.html#cb315-34" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb315-35"><a href="data-acquisition.html#cb315-35" tabindex="-1"></a>    <span class="at">title =</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">&quot;{unique(game$away_name)} @ {unique(game$home_name)}&quot;</span>),</span>
<span id="cb315-36"><a href="data-acquisition.html#cb315-36" tabindex="-1"></a>    <span class="at">subtitle =</span> glue<span class="sc">::</span><span class="fu">glue</span>(</span>
<span id="cb315-37"><a href="data-acquisition.html#cb315-37" tabindex="-1"></a>    <span class="st">&quot;{unique(game$game_date)}</span><span class="sc">\n</span></span>
<span id="cb315-38"><a href="data-acquisition.html#cb315-38" tabindex="-1"></a><span class="st">    {unique(shots$away_abbreviation)} {unique(shots$away_final)} - {unique(shots$home_final)} {unique(shots$home_abbreviation)}&quot;</span></span>
<span id="cb315-39"><a href="data-acquisition.html#cb315-39" tabindex="-1"></a>    ),</span>
<span id="cb315-40"><a href="data-acquisition.html#cb315-40" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;data from hockeyR | plot made with sportyR&quot;</span></span>
<span id="cb315-41"><a href="data-acquisition.html#cb315-41" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb315-42"><a href="data-acquisition.html#cb315-42" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb315-43"><a href="data-acquisition.html#cb315-43" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb315-44"><a href="data-acquisition.html#cb315-44" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb315-45"><a href="data-acquisition.html#cb315-45" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> .<span class="dv">9</span>))</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-140-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="worldfootballr" class="section level3 hasAnchor" number="5.3.5">
<h3><span class="header-section-number">5.3.5</span> worldfootballR<a href="data-acquisition.html#worldfootballr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>worldfootballR</code> package allows one to access data from FBRef, Understat, and other soccer websites.</p>
<div class="example">
<p><span id="exm:unlabeled-div-137" class="example"><strong>Example 5.9  </strong></span>Download the match summaries for all US Women’s National Team (USWNT) in the 2019 World Cup. Display this information in a kable table.</p>
<p>For more on xG, see: <a href="https://youtu.be/zSaeaFcm1SY">https://youtu.be/zSaeaFcm1SY</a></p>
</div>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="data-acquisition.html#cb316-1" tabindex="-1"></a><span class="fu">library</span>(worldfootballR)</span>
<span id="cb316-2"><a href="data-acquisition.html#cb316-2" tabindex="-1"></a></span>
<span id="cb316-3"><a href="data-acquisition.html#cb316-3" tabindex="-1"></a><span class="co"># USWNT 2019 World Cup results</span></span>
<span id="cb316-4"><a href="data-acquisition.html#cb316-4" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://fbref.com/en/squads/1c912aa0/2019/United-States-Women-Stats&quot;</span></span>
<span id="cb316-5"><a href="data-acquisition.html#cb316-5" tabindex="-1"></a>uswnt19 <span class="ot">&lt;-</span> <span class="fu">get_team_match_results</span>(url)</span>
<span id="cb316-6"><a href="data-acquisition.html#cb316-6" tabindex="-1"></a>uswnt19 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Comp <span class="sc">==</span> <span class="st">&quot;World Cup&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb316-7"><a href="data-acquisition.html#cb316-7" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Day,<span class="sc">-</span>Time,<span class="sc">-</span>Comp,<span class="sc">-</span>Team_Url,<span class="sc">-</span>Captain,<span class="sc">-</span>Formation,</span>
<span id="cb316-8"><a href="data-acquisition.html#cb316-8" tabindex="-1"></a>         <span class="sc">-</span>Referee,<span class="sc">-</span>Notes,<span class="sc">-</span>Attendance,<span class="sc">-</span>Venue,<span class="sc">-</span>Team) <span class="sc">%&gt;%</span> </span>
<span id="cb316-9"><a href="data-acquisition.html#cb316-9" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Date
</th>
<th style="text-align:left;">
Round
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:left;">
GF
</th>
<th style="text-align:left;">
GA
</th>
<th style="text-align:left;">
Opponent
</th>
<th style="text-align:right;">
xG
</th>
<th style="text-align:right;">
xGA
</th>
<th style="text-align:right;">
Poss
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2019-06-11
</td>
<td style="text-align:left;">
Group stage
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
13
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
Thailand
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
72
</td>
</tr>
<tr>
<td style="text-align:left;">
2019-06-16
</td>
<td style="text-align:left;">
Group stage
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
Chile
</td>
<td style="text-align:right;">
3.7
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
71
</td>
</tr>
<tr>
<td style="text-align:left;">
2019-06-20
</td>
<td style="text-align:left;">
Group stage
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
Sweden
</td>
<td style="text-align:right;">
2.1
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:right;">
61
</td>
</tr>
<tr>
<td style="text-align:left;">
2019-06-24
</td>
<td style="text-align:left;">
Round of 16
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
Spain
</td>
<td style="text-align:right;">
2.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
55
</td>
</tr>
<tr>
<td style="text-align:left;">
2019-06-28
</td>
<td style="text-align:left;">
Quarter-finals
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
France
</td>
<td style="text-align:right;">
1.1
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
40
</td>
</tr>
<tr>
<td style="text-align:left;">
2019-07-02
</td>
<td style="text-align:left;">
Semi-finals
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
England
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
1.7
</td>
<td style="text-align:right;">
43
</td>
</tr>
<tr>
<td style="text-align:left;">
2019-07-07
</td>
<td style="text-align:left;">
Final
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
Netherlands
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
53
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
<div id="data-scraping" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Data Scraping<a href="data-acquisition.html#data-scraping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Acquiring data from internet websites can be completed by using data scraping methods. In essence, this allows your computer to extract data from websites. There are a handful of techniques that we will use to accomplish some basic scraping tasks.</p>
<div id="general-tips" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> General Tips<a href="data-acquisition.html#general-tips" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p><em>Brainstorm</em>: Ask yourself what data you need and were to find it. If you pull from different sources, do you have a unique identifier between the sources?</p></li>
<li><p><em>Start small</em>: View your scraping project as a war, winning it with small battles. If you want to scrape sports statistics for the NFL, consider how to scrape these statistics for one team.</p></li>
<li><p><em>Hyperlinks are your friend</em>: Lead to websites with more detailed information and/or serve as the unique identifier between different data sources?</p></li>
<li><p><em>Data is everywhere</em>: Text color, font, or highlighting may serve as valuable data that you need. If these features exist on the webpage, then they exist within the HTML code which generated the document.</p></li>
<li><p><em>Ready your search engine</em>: When you are undoubtably stuck and have a question, it’s likely the answer is already on
<a href="https://stackoverflow.com/">StackOverflow (https://stackoverflow.com/)</a></p></li>
<li><p><em>Careful how quickly you scrape from a website</em>: If you attempt to scrape from a website too frequently, you may get a temporary (or even permanent) IP ban. You can view a website’s rules for scraping by looking at the <code>robots.txt</code> file on the website of interest. For example, see: <a href="https://www.basketball-reference.com/robots.txt">https://www.basketball-reference.com/robots.txt</a></p></li>
</ol>
</div>
<div id="introduction-to-html" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Introduction to HTML<a href="data-acquisition.html#introduction-to-html" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>All contents that are displayed on a web page are structured through HTML with the help of HTML
elements. HTML elements consist of a tag and contents. The tag defines how the web browser should format and display the content.</p>
<p>Aptly, the content is what should be displayed.</p>
<p>Attributes are optional parameters which provide additional information about the element in which the attribute is included. The type of attribute is the attribute name , whereas the quantity assigned to the attribute is the attribute value.</p>
<div class="float">
<img src="images/html.png" style="width:80.0%" alt="HTML element structure" />
<div class="figcaption">HTML element structure</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div id="rvest-package" class="section level3 hasAnchor" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> rvest Package<a href="data-acquisition.html#rvest-package" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>rvest</code> (pronounced “harvest”) package in R is one of the best options for scraping data directly into R.</p>
<p>This is part of the tidyverse ecosystem in R. Allows users to scrape (or harvest) data from webpages.</p>
<p>Common use functions from the package include:<br />
- read_html(): read HTML from a webpage<br />
- html_elements(): returns a subset of elements with specified characteristics<br />
- html_text(): returns the content of all elements<br />
- html_attr(): returns attribute values for all elements with specified attribute<br />
- html_table(): returns a list of all HTML tables</p>
<p>A working knowledge of css and/or xpath is helpful.</p>
</div>
<div id="css-gadget-selector" class="section level3 hasAnchor" number="5.4.4">
<h3><span class="header-section-number">5.4.4</span> CSS Gadget Selector<a href="data-acquisition.html#css-gadget-selector" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>All web pages are composed of HTML elements, but some elements are incredibly complex. They often are
nested inside of other elements or rely on other elements from another document.</p>
<p>A selector gadget allows you to determine what css selector you need to extract the information you desire. These JavaScript bookmark lets determine where the information you desire belongs in the HTML code.</p>
<p>You can download the most popular selector gadget here which also has a <a href="https://chrome.google.com/webstore/detail/selectorgadget/mhjhnkcfbdhnjickkkdbjoemdmbfginb?hl=en">Google Chrome extension available (shorturl.at/nrFJP)</a>.</p>
<p>Probably more than half the time, these gadgets prove less than helpful which is why I suggest perusing the HTML file on your own with the Inspect feature in Google Chrome.</p>
<div style="page-break-after: always;"></div>
</div>
<div id="scraping-examples" class="section level3 hasAnchor" number="5.4.5">
<h3><span class="header-section-number">5.4.5</span> Scraping Examples<a href="data-acquisition.html#scraping-examples" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Many R packages exist to scrape data from the Sports Reference websites, however, we can also scrape the data ourselves without too much trouble.</p>
<div class="example">
<p><span id="exm:unlabeled-div-138" class="example"><strong>Example 5.10  </strong></span>Scrape A’ja Wilson’s per game statistics on Basketball Reference and output the data into a kable table. Use the selector gadget to find the correct</p>
<p>Link: <a href="https://www.basketball-reference.com/wnba/players/w/wilsoa01w.html">https://www.basketball-reference.com/wnba/players/w/wilsoa01w.html</a></p>
</div>
<p>We want to get this data into R:</p>
<div class="float">
<img src="images/wilson-scrape.png" style="width:80.0%" alt="HTML element structure" />
<div class="figcaption">HTML element structure</div>
</div>
<p>We can use the Selector Gadget to identify the html tag for this table.</p>
<div class="float">
<img src="images/wilson-scrape2.png" style="width:80.0%" alt="Using the selector gadget" />
<div class="figcaption">Using the selector gadget</div>
</div>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="data-acquisition.html#cb317-1" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb317-2"><a href="data-acquisition.html#cb317-2" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb317-3"><a href="data-acquisition.html#cb317-3" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://www.basketball-reference.com/wnba/players/w/wilsoa01w.html&quot;</span></span>
<span id="cb317-4"><a href="data-acquisition.html#cb317-4" tabindex="-1"></a></span>
<span id="cb317-5"><a href="data-acquisition.html#cb317-5" tabindex="-1"></a><span class="co"># Be careful to not run this function too quickly or you may be IP banned</span></span>
<span id="cb317-6"><a href="data-acquisition.html#cb317-6" tabindex="-1"></a>wilson <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span></code></pre></div>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="data-acquisition.html#cb318-1" tabindex="-1"></a><span class="co"># Grab the node of interest and format the output as a html_table(). </span></span>
<span id="cb318-2"><a href="data-acquisition.html#cb318-2" tabindex="-1"></a><span class="co"># This is now a list</span></span>
<span id="cb318-3"><a href="data-acquisition.html#cb318-3" tabindex="-1"></a>wilson <span class="sc">%&gt;%</span> </span>
<span id="cb318-4"><a href="data-acquisition.html#cb318-4" tabindex="-1"></a>  <span class="fu">html_elements</span>(<span class="st">&quot;#per_game0&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb318-5"><a href="data-acquisition.html#cb318-5" tabindex="-1"></a>  <span class="fu">html_table</span>()</span></code></pre></div>
<pre><code>## [[1]]
## # A tibble: 6 × 28
##   Year  Tm      Age     G    GS    MP    FG   FGA `FG%`  `3P` `3PA`  `3P%`  `2P`
##   &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1 2018  &quot;LVA&quot;    21    33    33  30.6   7.4  16.1 0.462   0     0   NA       7.4
## 2 2019  &quot;LVA&quot;    22    26    25  28.5   6.1  12.7 0.479   0     0    0       6.1
## 3 2020  &quot;LVA&quot;    23    22    22  31.7   7.5  15.7 0.48    0     0   NA       7.5
## 4 2021  &quot;LVA&quot;    24    32    32  31.9   6.5  14.6 0.444   0     0    1       6.4
## 5 2022  &quot;LVA&quot;    25    36    36  30     7.2  14.4 0.501   0.9   2.3  0.373   6.4
## 6 Care… &quot;&quot;       NA   149   148  30.5   7    14.7 0.473   0.2   0.6  0.376   6.7
## # … with 15 more variables: `2PA` &lt;dbl&gt;, `2P%` &lt;dbl&gt;, `eFG%` &lt;dbl&gt;, FT &lt;dbl&gt;,
## #   FTA &lt;dbl&gt;, `FT%` &lt;dbl&gt;, ORB &lt;dbl&gt;, DRB &lt;dbl&gt;, TRB &lt;dbl&gt;, AST &lt;dbl&gt;,
## #   STL &lt;dbl&gt;, BLK &lt;dbl&gt;, TOV &lt;dbl&gt;, PF &lt;dbl&gt;, PTS &lt;dbl&gt;</code></pre>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="data-acquisition.html#cb320-1" tabindex="-1"></a><span class="co"># We can convert the list to a data frame to allow us to use dplyr functions</span></span>
<span id="cb320-2"><a href="data-acquisition.html#cb320-2" tabindex="-1"></a><span class="co"># like select</span></span>
<span id="cb320-3"><a href="data-acquisition.html#cb320-3" tabindex="-1"></a><span class="co"># Output the first ten columns</span></span>
<span id="cb320-4"><a href="data-acquisition.html#cb320-4" tabindex="-1"></a>wilson <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span>
<span id="cb320-5"><a href="data-acquisition.html#cb320-5" tabindex="-1"></a>wilson <span class="sc">%&gt;%</span> </span>
<span id="cb320-6"><a href="data-acquisition.html#cb320-6" tabindex="-1"></a>  <span class="fu">html_elements</span>(<span class="st">&quot;#per_game0&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb320-7"><a href="data-acquisition.html#cb320-7" tabindex="-1"></a>  <span class="fu">html_table</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb320-8"><a href="data-acquisition.html#cb320-8" tabindex="-1"></a>  <span class="fu">data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb320-9"><a href="data-acquisition.html#cb320-9" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb320-10"><a href="data-acquisition.html#cb320-10" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Year
</th>
<th style="text-align:left;">
Tm
</th>
<th style="text-align:right;">
Age
</th>
<th style="text-align:right;">
G
</th>
<th style="text-align:right;">
GS
</th>
<th style="text-align:right;">
MP
</th>
<th style="text-align:right;">
FG
</th>
<th style="text-align:right;">
FGA
</th>
<th style="text-align:right;">
FG.
</th>
<th style="text-align:right;">
X3P
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2018
</td>
<td style="text-align:left;">
LVA
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
30.6
</td>
<td style="text-align:right;">
7.4
</td>
<td style="text-align:right;">
16.1
</td>
<td style="text-align:right;">
0.462
</td>
<td style="text-align:right;">
0.0
</td>
</tr>
<tr>
<td style="text-align:left;">
2019
</td>
<td style="text-align:left;">
LVA
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
28.5
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:right;">
12.7
</td>
<td style="text-align:right;">
0.479
</td>
<td style="text-align:right;">
0.0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020
</td>
<td style="text-align:left;">
LVA
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
31.7
</td>
<td style="text-align:right;">
7.5
</td>
<td style="text-align:right;">
15.7
</td>
<td style="text-align:right;">
0.480
</td>
<td style="text-align:right;">
0.0
</td>
</tr>
<tr>
<td style="text-align:left;">
2021
</td>
<td style="text-align:left;">
LVA
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
31.9
</td>
<td style="text-align:right;">
6.5
</td>
<td style="text-align:right;">
14.6
</td>
<td style="text-align:right;">
0.444
</td>
<td style="text-align:right;">
0.0
</td>
</tr>
<tr>
<td style="text-align:left;">
2022
</td>
<td style="text-align:left;">
LVA
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
30.0
</td>
<td style="text-align:right;">
7.2
</td>
<td style="text-align:right;">
14.4
</td>
<td style="text-align:right;">
0.501
</td>
<td style="text-align:right;">
0.9
</td>
</tr>
<tr>
<td style="text-align:left;">
2023
</td>
<td style="text-align:left;">
LVA
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
30.7
</td>
<td style="text-align:right;">
8.4
</td>
<td style="text-align:right;">
15.0
</td>
<td style="text-align:right;">
0.557
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
<tr>
<td style="text-align:left;">
Career
</td>
<td style="text-align:left;">
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
189
</td>
<td style="text-align:right;">
188
</td>
<td style="text-align:right;">
30.6
</td>
<td style="text-align:right;">
7.3
</td>
<td style="text-align:right;">
14.8
</td>
<td style="text-align:right;">
0.491
</td>
<td style="text-align:right;">
0.2
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-139" class="example"><strong>Example 5.11  </strong></span>Player efficiency rating (PER) is an advanced basketball statistic that attempts to quantify a player’s overall contribution.</p>
<p>Scrape the data from the following site and build a kable table with the top 20 players in terms of PER.</p>
<p>Link: <a href="http://www.espn.com/nba/hollinger/statistics">http://www.espn.com/nba/hollinger/statistics</a></p>
</div>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="data-acquisition.html#cb321-1" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;http://www.espn.com/nba/hollinger/statistics&quot;</span></span>
<span id="cb321-2"><a href="data-acquisition.html#cb321-2" tabindex="-1"></a>hollinger <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span>
<span id="cb321-3"><a href="data-acquisition.html#cb321-3" tabindex="-1"></a>holl_df <span class="ot">&lt;-</span> hollinger <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&quot;div.mod-content&quot;</span>) <span class="sc">%&gt;%</span> .[<span class="dv">2</span>] <span class="sc">%&gt;%</span></span>
<span id="cb321-4"><a href="data-acquisition.html#cb321-4" tabindex="-1"></a>  <span class="fu">html_table</span>() <span class="sc">%&gt;%</span> <span class="fu">data.frame</span>()</span>
<span id="cb321-5"><a href="data-acquisition.html#cb321-5" tabindex="-1"></a><span class="fu">colnames</span>(holl_df) <span class="ot">=</span> holl_df[<span class="dv">2</span>,]</span>
<span id="cb321-6"><a href="data-acquisition.html#cb321-6" tabindex="-1"></a>holl_df <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="sc">-</span><span class="dv">2</span>,<span class="sc">-</span><span class="dv">13</span>,<span class="sc">-</span><span class="dv">24</span>,<span class="sc">-</span><span class="dv">35</span>,<span class="sc">-</span><span class="dv">46</span>) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(RK,PLAYER,PER) <span class="sc">%&gt;%</span> <span class="fu">kable</span>(<span class="at">booktabs=</span>T) </span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
RK
</th>
<th style="text-align:left;">
PLAYER
</th>
<th style="text-align:left;">
PER
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
Joel Embiid, PHI
</td>
<td style="text-align:left;">
34.89
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
Nikola Jokic, DEN
</td>
<td style="text-align:left;">
31.86
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
Shai Gilgeous-Alexander, OKC
</td>
<td style="text-align:left;">
30.52
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
Giannis Antetokounmpo, MIL
</td>
<td style="text-align:left;">
29.55
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
Luka Doncic, DAL
</td>
<td style="text-align:left;">
27.71
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
Tyrese Haliburton, IND
</td>
<td style="text-align:left;">
26.67
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
Anthony Davis, LAL
</td>
<td style="text-align:left;">
26.16
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
Kevin Durant, PHX
</td>
<td style="text-align:left;">
23.89
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
Andre Drummond, CHI
</td>
<td style="text-align:left;">
23.56
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Lauri Markkanen, UTAH
</td>
<td style="text-align:left;">
23.56
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
Kawhi Leonard, LAC
</td>
<td style="text-align:left;">
23.21
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
Domantas Sabonis, SAC
</td>
<td style="text-align:left;">
23.18
</td>
</tr>
<tr>
<td style="text-align:left;">
13
</td>
<td style="text-align:left;">
Donovan Mitchell, CLE
</td>
<td style="text-align:left;">
23.09
</td>
</tr>
<tr>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
LeBron James, LAL
</td>
<td style="text-align:left;">
23.08
</td>
</tr>
<tr>
<td style="text-align:left;">
15
</td>
<td style="text-align:left;">
Kyrie Irving, DAL
</td>
<td style="text-align:left;">
22.70
</td>
</tr>
<tr>
<td style="text-align:left;">
16
</td>
<td style="text-align:left;">
Mark Williams, CHA
</td>
<td style="text-align:left;">
22.66
</td>
</tr>
<tr>
<td style="text-align:left;">
17
</td>
<td style="text-align:left;">
Alperen Sengun, HOU
</td>
<td style="text-align:left;">
22.65
</td>
</tr>
<tr>
<td style="text-align:left;">
18
</td>
<td style="text-align:left;">
Zion Williamson, NO
</td>
<td style="text-align:left;">
22.55
</td>
</tr>
<tr>
<td style="text-align:left;">
19
</td>
<td style="text-align:left;">
Devin Booker, PHX
</td>
<td style="text-align:left;">
22.49
</td>
</tr>
<tr>
<td style="text-align:left;">
20
</td>
<td style="text-align:left;">
Jarrett Allen, CLE
</td>
<td style="text-align:left;">
22.16
</td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<div class="example">
<p><span id="exm:unlabeled-div-140" class="example"><strong>Example 5.12  </strong></span>Obtain the top ten leaders for goals on the US Women’s National Team and output as a kable table.</p>
<p>Link: <a href="https://www.ussoccer.com/uswnt-stats/2022">https://www.ussoccer.com/uswnt-stats/2022</a></p>
</div>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="data-acquisition.html#cb322-1" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://www.ussoccer.com/uswnt-stats/2022&quot;</span></span>
<span id="cb322-2"><a href="data-acquisition.html#cb322-2" tabindex="-1"></a>uswnt <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span>
<span id="cb322-3"><a href="data-acquisition.html#cb322-3" tabindex="-1"></a>uswnt_df <span class="ot">&lt;-</span> uswnt <span class="sc">%&gt;%</span> </span>
<span id="cb322-4"><a href="data-acquisition.html#cb322-4" tabindex="-1"></a>  <span class="fu">html_elements</span>(<span class="st">&quot;#some_table_id&quot;</span>) <span class="sc">%&gt;%</span> .[<span class="dv">1</span>] <span class="sc">%&gt;%</span> </span>
<span id="cb322-5"><a href="data-acquisition.html#cb322-5" tabindex="-1"></a>  <span class="fu">html_table</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb322-6"><a href="data-acquisition.html#cb322-6" tabindex="-1"></a>  <span class="fu">data.frame</span>()</span>
<span id="cb322-7"><a href="data-acquisition.html#cb322-7" tabindex="-1"></a><span class="fu">colnames</span>(uswnt_df) <span class="ot">=</span> uswnt_df[<span class="dv">1</span>,]</span>
<span id="cb322-8"><a href="data-acquisition.html#cb322-8" tabindex="-1"></a>uswnt_df<span class="sc">$</span>Goals <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(uswnt_df<span class="sc">$</span>Goals)</span></code></pre></div>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="data-acquisition.html#cb324-1" tabindex="-1"></a>uswnt_df <span class="sc">%&gt;%</span> </span>
<span id="cb324-2"><a href="data-acquisition.html#cb324-2" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="sc">-</span><span class="fu">n</span>(),<span class="sc">-</span>(<span class="fu">n</span>()<span class="sc">-</span><span class="dv">1</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb324-3"><a href="data-acquisition.html#cb324-3" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Goals)) <span class="sc">%&gt;%</span> </span>
<span id="cb324-4"><a href="data-acquisition.html#cb324-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb324-5"><a href="data-acquisition.html#cb324-5" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">booktabs=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Name
</th>
<th style="text-align:left;">
Pos.
</th>
<th style="text-align:left;">
GP
</th>
<th style="text-align:left;">
GS
</th>
<th style="text-align:left;">
Min
</th>
<th style="text-align:left;">
G
</th>
<th style="text-align:left;">
A
</th>
<th style="text-align:left;">
Y
</th>
<th style="text-align:left;">
R
</th>
<th style="text-align:left;">
Career Caps
</th>
<th style="text-align:right;">
Goals
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Morgan, Alex
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
783
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
200
</td>
<td style="text-align:right;">
119
</td>
</tr>
<tr>
<td style="text-align:left;">
Rapinoe, Megan
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
364
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
197
</td>
<td style="text-align:right;">
63
</td>
</tr>
<tr>
<td style="text-align:left;">
Horan, Lindsey
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
979
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
122
</td>
<td style="text-align:right;">
26
</td>
</tr>
<tr>
<td style="text-align:left;">
Pugh, Mallory
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
15
</td>
<td style="text-align:left;">
13
</td>
<td style="text-align:left;">
1030
</td>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
82
</td>
<td style="text-align:right;">
25
</td>
</tr>
<tr>
<td style="text-align:left;">
Dunn, Crystal
</td>
<td style="text-align:left;">
D
</td>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
85
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
126
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
Lavelle, Rose
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
16
</td>
<td style="text-align:left;">
15
</td>
<td style="text-align:left;">
1107
</td>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
84
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
Williams, Lynn
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
56
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
47
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
Smith, Sophia
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
17
</td>
<td style="text-align:left;">
17
</td>
<td style="text-align:left;">
1192
</td>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
27
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
Gautrat, Morgan
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
45
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
88
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
Macario, Catarina
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
342
</td>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
17
</td>
<td style="text-align:right;">
8
</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="monte-carlo-simulation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="measures-of-association.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/aaron-nielsen/SportsAnalyticsBook/edit/master/05-data-acquisition.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["textbook.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
