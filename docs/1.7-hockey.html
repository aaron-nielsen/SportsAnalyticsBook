<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="1.7 Hockey | Sports Analytics" />
<meta property="og:type" content="book" />
<meta property="og:image" content="https://aaron-nielsen.github.io/SportsAnalyticsBook/images/csu.png" />
<meta property="og:description" content="1.7 Hockey | Sports Analytics Notes" />
<meta name="github-repo" content="aaron-nielsen.github.io/SportsAnalyticsBook/" />

<meta name="author" content="Aaron Nielsen, Department of Statistics, Colorado State University" />

<meta name="date" content="2022-07-21" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="description" content="1.7 Hockey | Sports Analytics Notes">

<title>1.7 Hockey | Sports Analytics</title>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<link rel="stylesheet" href="toc.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
/* show arrow before summary tag as in bootstrap
TODO: remove if boostrap in updated in html_document (rmarkdown#1485) */
details > summary {
  display: list-item;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#about">About</a></li>
<li class="has-sub"><a href="1-exploratory-data-analysis.html#exploratory-data-analysis"><span class="toc-section-number">1</span> Exploratory Data Analysis</a>
<ul>
<li class="has-sub"><a href="1.1-getting-started-with-r.html#getting-started-with-r"><span class="toc-section-number">1.1</span> Getting Started With R</a>
<ul>
<li><a href="1.1-getting-started-with-r.html#installing-r"><span class="toc-section-number">1.1.1</span> Installing R</a></li>
<li><a href="1.1-getting-started-with-r.html#some-r-basics"><span class="toc-section-number">1.1.2</span> Some R Basics</a></li>
</ul></li>
<li class="has-sub"><a href="1.2-descriptive-statistics.html#descriptive-statistics"><span class="toc-section-number">1.2</span> Descriptive Statistics</a>
<ul>
<li><a href="1.2-descriptive-statistics.html#definitions"><span class="toc-section-number">1.2.1</span> Definitions</a></li>
<li><a href="1.2-descriptive-statistics.html#descriptive-statistics-1"><span class="toc-section-number">1.2.2</span> Descriptive Statistics</a></li>
</ul></li>
<li class="has-sub"><a href="1.3-visualizations.html#visualizations"><span class="toc-section-number">1.3</span> Visualizations</a>
<ul>
<li><a href="1.3-visualizations.html#histograms"><span class="toc-section-number">1.3.1</span> Histograms</a></li>
<li><a href="1.3-visualizations.html#bar-plots"><span class="toc-section-number">1.3.2</span> Bar Plots</a></li>
<li><a href="1.3-visualizations.html#scatter-plots"><span class="toc-section-number">1.3.3</span> Scatter Plots</a></li>
<li><a href="1.3-visualizations.html#kable-tables"><span class="toc-section-number">1.3.4</span> Kable Tables</a></li>
</ul></li>
<li class="has-sub"><a href="1.4-baseball.html#baseball"><span class="toc-section-number">1.4</span> Baseball</a>
<ul>
<li><a href="1.4-baseball.html#basic-hitting-statistics"><span class="toc-section-number">1.4.1</span> Basic Hitting Statistics</a></li>
<li><a href="1.4-baseball.html#basic-pitching-statistics"><span class="toc-section-number">1.4.2</span> Basic Pitching Statistics</a></li>
<li><a href="1.4-baseball.html#advanced-baseball-hitting-statistics"><span class="toc-section-number">1.4.3</span> Advanced Baseball Hitting Statistics</a></li>
<li><a href="1.4-baseball.html#advanced-baseball-pitching-statistics"><span class="toc-section-number">1.4.4</span> Advanced Baseball Pitching Statistics</a></li>
<li><a href="1.4-baseball.html#wins-above-replacement"><span class="toc-section-number">1.4.5</span> Wins Above Replacement</a></li>
<li><a href="1.4-baseball.html#calculating-advanced-hitting-statistics"><span class="toc-section-number">1.4.6</span> Calculating Advanced Hitting Statistics</a></li>
<li><a href="1.4-baseball.html#evaluating-advanced-pitching-statistics"><span class="toc-section-number">1.4.7</span> Evaluating Advanced Pitching Statistics</a></li>
</ul></li>
<li class="has-sub"><a href="1.5-football.html#football"><span class="toc-section-number">1.5</span> Football</a>
<ul>
<li><a href="1.5-football.html#basic-football-statistics"><span class="toc-section-number">1.5.1</span> Basic Football Statistics</a></li>
<li><a href="1.5-football.html#advanced-football-statistics"><span class="toc-section-number">1.5.2</span> Advanced Football Statistics</a></li>
</ul></li>
<li class="has-sub"><a href="1.6-basketball.html#basketball"><span class="toc-section-number">1.6</span> Basketball</a>
<ul>
<li><a href="1.6-basketball.html#basic-basketball-statistics"><span class="toc-section-number">1.6.1</span> Basic Basketball Statistics</a></li>
<li><a href="1.6-basketball.html#advanced-basketball-statistics"><span class="toc-section-number">1.6.2</span> Advanced Basketball Statistics</a></li>
<li><a href="1.6-basketball.html#four-factors"><span class="toc-section-number">1.6.3</span> Four Factors</a></li>
<li><a href="1.6-basketball.html#shot-charts"><span class="toc-section-number">1.6.4</span> Shot Charts</a></li>
</ul></li>
<li class="has-sub"><a href="1.7-hockey.html#hockey"><span class="toc-section-number">1.7</span> Hockey</a>
<ul>
<li><a href="1.7-hockey.html#basic-hockey-statistics"><span class="toc-section-number">1.7.1</span> Basic Hockey Statistics</a></li>
<li><a href="1.7-hockey.html#advanced-hockey-statistics"><span class="toc-section-number">1.7.2</span> Advanced Hockey Statistics</a></li>
<li><a href="1.7-hockey.html#actual-vs.-expected-goals"><span class="toc-section-number">1.7.3</span> Actual vs. Expected Goals</a></li>
<li><a href="1.7-hockey.html#goalie-statistics"><span class="toc-section-number">1.7.4</span> Goalie Statistics</a></li>
<li><a href="1.7-hockey.html#correlation-plots"><span class="toc-section-number">1.7.5</span> Correlation Plots</a></li>
</ul></li>
<li class="has-sub"><a href="1.8-volleyball.html#volleyball"><span class="toc-section-number">1.8</span> Volleyball</a>
<ul>
<li><a href="1.8-volleyball.html#basic-volleyball-statistics"><span class="toc-section-number">1.8.1</span> Basic Volleyball Statistics</a></li>
<li><a href="1.8-volleyball.html#scatter-plot"><span class="toc-section-number">1.8.2</span> Scatter Plot</a></li>
<li><a href="1.8-volleyball.html#box-plot"><span class="toc-section-number">1.8.3</span> Box Plot</a></li>
</ul></li>
<li class="has-sub"><a href="1.9-soccer.html#soccer"><span class="toc-section-number">1.9</span> Soccer</a>
<ul>
<li><a href="1.9-soccer.html#basic-soccer-statistics"><span class="toc-section-number">1.9.1</span> Basic Soccer Statistics</a></li>
<li><a href="1.9-soccer.html#advanced-soccer-statistics"><span class="toc-section-number">1.9.2</span> Advanced Soccer Statistics</a></li>
<li><a href="1.9-soccer.html#bar-plot"><span class="toc-section-number">1.9.3</span> Bar Plot</a></li>
<li><a href="1.9-soccer.html#scatter-plot-1"><span class="toc-section-number">1.9.4</span> Scatter Plot</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="2-probability.html#probability"><span class="toc-section-number">2</span> Probability</a>
<ul>
<li><a href="chapter-preview.html#chapter-preview">Chapter Preview</a></li>
<li><a href="2.1-definitions-1.html#definitions-1"><span class="toc-section-number">2.1</span> Definitions</a></li>
<li><a href="2.2-set-theory.html#set-theory"><span class="toc-section-number">2.2</span> Set Theory</a></li>
<li class="has-sub"><a href="2.3-axioms-properties-and-laws.html#axioms-properties-and-laws"><span class="toc-section-number">2.3</span> Axioms, Properties, and Laws</a>
<ul>
<li><a href="2.3-axioms-properties-and-laws.html#axioms-of-probability"><span class="toc-section-number">2.3.1</span> Axioms of Probability</a></li>
<li><a href="2.3-axioms-properties-and-laws.html#properties-of-probability"><span class="toc-section-number">2.3.2</span> Properties of Probability</a></li>
<li><a href="2.3-axioms-properties-and-laws.html#laws-of-probability"><span class="toc-section-number">2.3.3</span> Laws of Probability</a></li>
</ul></li>
<li><a href="2.4-combinatorics.html#combinatorics"><span class="toc-section-number">2.4</span> Combinatorics</a></li>
<li class="has-sub"><a href="2.5-odds-and-gambling.html#odds-and-gambling"><span class="toc-section-number">2.5</span> Odds and Gambling</a>
<ul>
<li><a href="2.5-odds-and-gambling.html#sports-betting-in-usa"><span class="toc-section-number">2.5.1</span> Sports Betting in USA</a></li>
<li><a href="2.5-odds-and-gambling.html#gambling-addiction"><span class="toc-section-number">2.5.2</span> Gambling Addiction</a></li>
<li><a href="2.5-odds-and-gambling.html#odds-definition"><span class="toc-section-number">2.5.3</span> Odds Definition</a></li>
<li><a href="2.5-odds-and-gambling.html#gambling-odds"><span class="toc-section-number">2.5.4</span> Gambling Odds</a></li>
</ul></li>
<li><a href="2.6-random-variables.html#random-variables"><span class="toc-section-number">2.6</span> Random Variables</a></li>
<li class="has-sub"><a href="2.7-common-random-variables.html#common-random-variables"><span class="toc-section-number">2.7</span> Common Random Variables</a>
<ul>
<li><a href="2.7-common-random-variables.html#binomial-rvs"><span class="toc-section-number">2.7.1</span> Binomial RVs</a></li>
<li><a href="2.7-common-random-variables.html#geometric-rvs"><span class="toc-section-number">2.7.2</span> Geometric RVs</a></li>
<li><a href="2.7-common-random-variables.html#poisson-rvs"><span class="toc-section-number">2.7.3</span> Poisson RVs</a></li>
<li><a href="2.7-common-random-variables.html#negative-binomial-rvs"><span class="toc-section-number">2.7.4</span> Negative Binomial RVs</a></li>
<li><a href="2.7-common-random-variables.html#normal-rvs"><span class="toc-section-number">2.7.5</span> Normal RVs</a></li>
</ul></li>
<li class="has-sub"><a href="2.8-extra-stuff.html#extra-stuff"><span class="toc-section-number">2.8</span> Extra Stuff</a>
<ul>
<li><a href="2.8-extra-stuff.html#sets-and-conditional-probability"><span class="toc-section-number">2.8.1</span> Sets and Conditional Probability</a></li>
<li><a href="2.8-extra-stuff.html#binomials-and-multinomials"><span class="toc-section-number">2.8.2</span> Binomials and Multinomials</a></li>
<li><a href="2.8-extra-stuff.html#expectation---baseball"><span class="toc-section-number">2.8.3</span> Expectation - Baseball</a></li>
<li><a href="2.8-extra-stuff.html#basketball-scenario"><span class="toc-section-number">2.8.4</span> Basketball Scenario</a></li>
<li><a href="2.8-extra-stuff.html#multiple-probability-distributions---basketball"><span class="toc-section-number">2.8.5</span> Multiple Probability Distributions - Basketball</a></li>
<li><a href="2.8-extra-stuff.html#law-of-total-probability---baseball"><span class="toc-section-number">2.8.6</span> Law of Total Probability - Baseball</a></li>
<li><a href="2.8-extra-stuff.html#multinomial-distribution---baseball"><span class="toc-section-number">2.8.7</span> Multinomial Distribution - Baseball</a></li>
<li><a href="2.8-extra-stuff.html#bayes---injured-baseball-player"><span class="toc-section-number">2.8.8</span> Bayes - injured baseball player</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="3-monte-carlo-simulation.html#monte-carlo-simulation"><span class="toc-section-number">3</span> Monte Carlo Simulation</a>
<ul>
<li><a href="3.1-basics.html#basics"><span class="toc-section-number">3.1</span> Basics</a></li>
<li><a href="3.2-estimating-probabilities.html#estimating-probabilities"><span class="toc-section-number">3.2</span> Estimating Probabilities</a></li>
<li class="has-sub"><a href="3.3-simulating-streaks.html#simulating-streaks"><span class="toc-section-number">3.3</span> Simulating Streaks</a>
<ul>
<li><a href="3.3-simulating-streaks.html#winning-streak-simulation"><span class="toc-section-number">3.3.1</span> Winning Streak Simulation</a></li>
<li><a href="3.3-simulating-streaks.html#hitting-streak-simulation"><span class="toc-section-number">3.3.2</span> Hitting Streak Simulation</a></li>
</ul></li>
<li class="has-sub"><a href="3.4-gambling-simulations.html#gambling-simulations"><span class="toc-section-number">3.4</span> Gambling Simulations</a>
<ul>
<li><a href="3.4-gambling-simulations.html#martingale-system"><span class="toc-section-number">3.4.1</span> Martingale System</a></li>
</ul></li>
<li class="has-sub"><a href="3.5-extra-stuff-1.html#extra-stuff-1"><span class="toc-section-number">3.5</span> Extra stuff</a>
<ul>
<li><a href="3.5-extra-stuff-1.html#shaq-ft-simulation"><span class="toc-section-number">3.5.1</span> Shaq FT simulation</a></li>
</ul></li>
</ul></li>
<li class="has-sub"><a href="4-statistical-inference.html#statistical-inference"><span class="toc-section-number">4</span> Statistical Inference</a>
<ul>
<li><a href="4.1-one-sample-and-two-sample-t-tests-and-confidence-intervals.html#one-sample-and-two-sample-t-tests-and-confidence-intervals"><span class="toc-section-number">4.1</span> One Sample and Two Sample t-tests and confidence intervals</a></li>
</ul></li>
<li class="has-sub"><a href="5-correlation.html#correlation"><span class="toc-section-number">5</span> Correlation</a>
<ul>
<li class="has-sub"><a href="5.1-pearsons-correlation-coefficient.html#pearsons-correlation-coefficient"><span class="toc-section-number">5.1</span> Pearson’s Correlation Coefficient</a>
<ul>
<li><a href="5.1-pearsons-correlation-coefficient.html#properties-of-the-linear-correlation-coefficient"><span class="toc-section-number">5.1.1</span> Properties of the Linear Correlation Coefficient</a></li>
</ul></li>
<li><a href="5.2-rank-correlation.html#rank-correlation"><span class="toc-section-number">5.2</span> Rank Correlation</a></li>
<li><a href="5.3-autocorrelation.html#autocorrelation"><span class="toc-section-number">5.3</span> Autocorrelation</a></li>
<li><a href="5.4-association-of-categorical-variables.html#association-of-categorical-variables"><span class="toc-section-number">5.4</span> Association of Categorical Variables</a></li>
</ul></li>
<li class="has-sub"><a href="6-linear-regression.html#linear-regression"><span class="toc-section-number">6</span> Linear Regression</a>
<ul>
<li><a href="6.1-simple-linear-regression.html#simple-linear-regression"><span class="toc-section-number">6.1</span> Simple Linear Regression</a></li>
<li><a href="6.2-multiple-linear-regression.html#multiple-linear-regression"><span class="toc-section-number">6.2</span> Multiple Linear Regression</a></li>
<li><a href="6.3-confounding-variables.html#confounding-variables"><span class="toc-section-number">6.3</span> Confounding Variables</a></li>
</ul></li>
<li><a href="references.html#references">References</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="hockey" class="section level2" number="1.7">
<h2><span class="header-section-number">1.7</span> Hockey</h2>
<p><a href="https://www.youtube.com/watch?v=nv2FUnHceqU">Link to YouTube video describing hockey rules</a></p>
<div id="basic-hockey-statistics" class="section level3" number="1.7.1">
<h3><span class="header-section-number">1.7.1</span> Basic Hockey Statistics</h3>
<p>Here are some basic statistics that are used often to describe hockey games.</p>
<ul>
<li><p><strong>Goals (G)</strong>: If a team scores, the skater on the scoring team who last touched the puck is credited with a goal.</p></li>
<li><p><strong>Assists (A)</strong>: The players (up to two) on the scoring team who last touch the puck before the goalscorer are credited with assists, unless the opposing team has possession of the puck in between.</p></li>
<li><p><strong>Points (PTS)</strong>: Goals plus assists. [Not to be confused with team points awarded in the regular season standings by the many hockey leagues, including the NHL (two points for a win, one point for an overtime/shootout loss, zero points for a regulation loss)].</p></li>
<li><p><strong>Shots On Goal (SOG)</strong>: Shot attempts in which the puck has been shot directly on goal. Shot attempts which are blocked or miss the goal are not considered SOGs. A team’s shots on goal should equal the opposing goaltender’s saves plus the team’s goals scored.</p></li>
<li><p><strong>Goals Against Average (GAA)</strong>: Of a goaltender, the number of goals allowed by that goaltender adjusted to a per-60 minute rate.</p></li>
<li><p><strong>Penalty Minutes (PIM)</strong>: The amount of penalty time an individual player is assigned for their infractions. PIM may be different than the amount of time the player actually spends in the penalty box.</p></li>
</ul>
<p><em>Reference:</em><br />
<a href="https://www.milehighhockey.com/pages/stats" class="uri">https://www.milehighhockey.com/pages/stats</a></p>
</div>
<div id="advanced-hockey-statistics" class="section level3" number="1.7.2">
<h3><span class="header-section-number">1.7.2</span> Advanced Hockey Statistics</h3>
<ul>
<li><p><strong>CORSI</strong>: CORSI only applies to 5 on 5 (“even-strength”) situations. It is calculated as the difference between shot attempts on offense (shots on goal + blocked shots + missed shots) minus shot attempts allowed on defense. CORSI can also be expressed as a percentage, with percentages over 50% indicating that the player is on ice for more offensive shots than defensive shots.</p></li>
<li><p><strong>Expected Goals (xG)</strong>: Expected Goals statistics give each shot an estimated probability of scoring a goal based on factors such as shot location and game situation. xG cannot be less than 0 or greater than 1 for any particular shot, and different platforms may have different methods of calculating expected goals.</p></li>
<li><p><strong>Fenwick/Unblocked Shot Attempts (USAT)</strong>: Similar to CORSI, but omits blocked shots from the calculation. This statistic is used in many Expected Goals calculations.</p></li>
</ul>
<p>Because the flow of a hockey game is usually quite different in situations other than the normal 5 on 5, such as a power play (5 on 4) or concurrent penalties (4 on 4), many hockey databases separate data by the type of game situation. We will see this below with a dataset from <a href="www.moneypuck.com">MoneyPuck</a>, but it is also present on <a href="https://www.naturalstattrick.com/">Natural Stat Trick</a>, <a href="www.quanthockey.com">QuantHockey</a>, and <a href="www.hockey-reference.com">hockey-reference</a>.</p>
<p><em>References:</em><br />
<a href="https://www.nhl.com/lightning/news/hockey-analytics-101-understanding-advanced-stats-and-how-theyre-measured/c-735819" class="uri">https://www.nhl.com/lightning/news/hockey-analytics-101-understanding-advanced-stats-and-how-theyre-measured/c-735819</a><br />
<a href="https://theathletic.com/121980/2017/10/09/an-advanced-stat-primer-understanding-basic-hockey-metrics/" class="uri">https://theathletic.com/121980/2017/10/09/an-advanced-stat-primer-understanding-basic-hockey-metrics/</a></p>
</div>
<div id="actual-vs.-expected-goals" class="section level3" number="1.7.3">
<h3><span class="header-section-number">1.7.3</span> Actual vs. Expected Goals</h3>
<div class="example">
<p><span id="exm:unlabeled-div-37" class="example"><strong>Example 1.13  </strong></span>For this example, we’ll use a set of NHL data from moneypuck.com. First, let’s load the data into <code>R</code> and open the data frame.</p>
</div>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="1.7-hockey.html#cb88-1" aria-hidden="true" tabindex="-1"></a>nhl_2022_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://moneypuck.com/moneypuck/playerData/seasonSummary/2021/regular/teams.csv&quot;</span>)</span>
<span id="cb88-2"><a href="1.7-hockey.html#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="1.7-hockey.html#cb88-3" aria-hidden="true" tabindex="-1"></a>nhl_2022_data <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">kt</span>()</span></code></pre></div>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
name
</th>
<th style="text-align:center;">
situation
</th>
<th style="text-align:center;">
xGoalsPercentage
</th>
<th style="text-align:center;">
corsiPercentage
</th>
<th style="text-align:center;">
fenwickPercentage
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
WPG
</td>
<td style="text-align:center;">
other
</td>
<td style="text-align:center;">
0.49
</td>
<td style="text-align:center;">
0.50
</td>
<td style="text-align:center;">
0.47
</td>
</tr>
<tr>
<td style="text-align:left;">
WPG
</td>
<td style="text-align:center;">
all
</td>
<td style="text-align:center;">
0.49
</td>
<td style="text-align:center;">
0.50
</td>
<td style="text-align:center;">
0.50
</td>
</tr>
<tr>
<td style="text-align:left;">
WPG
</td>
<td style="text-align:center;">
5on5
</td>
<td style="text-align:center;">
0.49
</td>
<td style="text-align:center;">
0.49
</td>
<td style="text-align:center;">
0.50
</td>
</tr>
<tr>
<td style="text-align:left;">
WPG
</td>
<td style="text-align:center;">
4on5
</td>
<td style="text-align:center;">
0.16
</td>
<td style="text-align:center;">
0.14
</td>
<td style="text-align:center;">
0.15
</td>
</tr>
<tr>
<td style="text-align:left;">
WPG
</td>
<td style="text-align:center;">
5on4
</td>
<td style="text-align:center;">
0.86
</td>
<td style="text-align:center;">
0.86
</td>
<td style="text-align:center;">
0.85
</td>
</tr>
<tr>
<td style="text-align:left;">
CBJ
</td>
<td style="text-align:center;">
other
</td>
<td style="text-align:center;">
0.52
</td>
<td style="text-align:center;">
0.49
</td>
<td style="text-align:center;">
0.49
</td>
</tr>
<tr>
<td style="text-align:left;">
CBJ
</td>
<td style="text-align:center;">
all
</td>
<td style="text-align:center;">
0.45
</td>
<td style="text-align:center;">
0.48
</td>
<td style="text-align:center;">
0.47
</td>
</tr>
<tr>
<td style="text-align:left;">
CBJ
</td>
<td style="text-align:center;">
5on5
</td>
<td style="text-align:center;">
0.45
</td>
<td style="text-align:center;">
0.48
</td>
<td style="text-align:center;">
0.47
</td>
</tr>
<tr>
<td style="text-align:left;">
CBJ
</td>
<td style="text-align:center;">
4on5
</td>
<td style="text-align:center;">
0.14
</td>
<td style="text-align:center;">
0.18
</td>
<td style="text-align:center;">
0.21
</td>
</tr>
<tr>
<td style="text-align:left;">
CBJ
</td>
<td style="text-align:center;">
5on4
</td>
<td style="text-align:center;">
0.81
</td>
<td style="text-align:center;">
0.84
</td>
<td style="text-align:center;">
0.82
</td>
</tr>
</tbody>
</table>
<p>We can create nice looking tables using the ``kableExtra’’ package. Let’s look at the first eight rows and a small selection of columns of the data frame and format the table output using a kable table.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="1.7-hockey.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;kableExtra&quot;</span>)</span>
<span id="cb89-2"><a href="1.7-hockey.html#cb89-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-3"><a href="1.7-hockey.html#cb89-3" aria-hidden="true" tabindex="-1"></a>nhl_2022_data[<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">6</span><span class="sc">:</span><span class="dv">9</span>)] <span class="sc">%&gt;%</span> <span class="fu">kt</span>()</span></code></pre></div>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
name
</th>
<th style="text-align:center;">
situation
</th>
<th style="text-align:center;">
games_played
</th>
<th style="text-align:center;">
xGoalsPercentage
</th>
<th style="text-align:center;">
corsiPercentage
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
WPG
</td>
<td style="text-align:center;">
other
</td>
<td style="text-align:center;">
82
</td>
<td style="text-align:center;">
0.49
</td>
<td style="text-align:center;">
0.50
</td>
</tr>
<tr>
<td style="text-align:left;">
WPG
</td>
<td style="text-align:center;">
all
</td>
<td style="text-align:center;">
82
</td>
<td style="text-align:center;">
0.49
</td>
<td style="text-align:center;">
0.50
</td>
</tr>
<tr>
<td style="text-align:left;">
WPG
</td>
<td style="text-align:center;">
5on5
</td>
<td style="text-align:center;">
82
</td>
<td style="text-align:center;">
0.49
</td>
<td style="text-align:center;">
0.49
</td>
</tr>
<tr>
<td style="text-align:left;">
WPG
</td>
<td style="text-align:center;">
4on5
</td>
<td style="text-align:center;">
82
</td>
<td style="text-align:center;">
0.16
</td>
<td style="text-align:center;">
0.14
</td>
</tr>
<tr>
<td style="text-align:left;">
WPG
</td>
<td style="text-align:center;">
5on4
</td>
<td style="text-align:center;">
82
</td>
<td style="text-align:center;">
0.86
</td>
<td style="text-align:center;">
0.86
</td>
</tr>
<tr>
<td style="text-align:left;">
CBJ
</td>
<td style="text-align:center;">
other
</td>
<td style="text-align:center;">
82
</td>
<td style="text-align:center;">
0.52
</td>
<td style="text-align:center;">
0.49
</td>
</tr>
<tr>
<td style="text-align:left;">
CBJ
</td>
<td style="text-align:center;">
all
</td>
<td style="text-align:center;">
82
</td>
<td style="text-align:center;">
0.45
</td>
<td style="text-align:center;">
0.48
</td>
</tr>
<tr>
<td style="text-align:left;">
CBJ
</td>
<td style="text-align:center;">
5on5
</td>
<td style="text-align:center;">
82
</td>
<td style="text-align:center;">
0.45
</td>
<td style="text-align:center;">
0.48
</td>
</tr>
</tbody>
</table>
<p>This dataset includes a <em>lot</em> of covariates. It also splits these data by different game situations: even-strength (5 on 5), power play (5 on 4), etc. Let’s subset the data to include all game situations.</p>
<p>Use the <code>nrow</code> command to check the number of columns in the new data frame. Check: Is it the same as the number of teams in the league for the 2021-2022 season?</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="1.7-hockey.html#cb90-1" aria-hidden="true" tabindex="-1"></a>nhl_data_all <span class="ot">&lt;-</span> <span class="fu">filter</span>(nhl_2022_data, situation <span class="sc">==</span> <span class="st">&quot;all&quot;</span>)</span>
<span id="cb90-2"><a href="1.7-hockey.html#cb90-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-3"><a href="1.7-hockey.html#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(nhl_data_all)</span></code></pre></div>
<pre><code>## [1] 32</code></pre>
<p>The dataset includes an Expected Goals statistic for each team in the <code>xGoalsFor</code> column. Let’s plot this quantity against the team’s actual number of goals scored; this is given by the <code>goalsFor</code> column.</p>
<p>(Remember to always have a good title and axis labels!)</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="1.7-hockey.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>nhl_data_all, <span class="fu">aes</span>(<span class="at">x=</span>xGoalsFor, <span class="at">y=</span>goalsFor)) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Expected Goals Scored&quot;</span>, <span class="at">y=</span><span class="st">&quot;Actual Goals Scored&quot;</span>, <span class="at">title=</span><span class="st">&quot;NHL Teams: Expected vs. Actual Goals, 2021-22&quot;</span>) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>As expected, there is a general positive correlation between expected and actual goals (<span class="math inline">\(r \approx 0.8\)</span>). However, there is some variability - for example, the Kings only scored 7 more actual goals than the Ducks, despite having 56.6 more expected goals.</p>
<p>Let’s add a line to the graph using the <code>geom_abline</code> function corresponding to the line <span class="math inline">\(y=x\)</span>, the line on which data points would fall if expected goals were equal to actual goals. We can also customize the line’s color and type.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="1.7-hockey.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>nhl_data_all, <span class="fu">aes</span>(<span class="at">x=</span>xGoalsFor, <span class="at">y=</span>goalsFor)) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Expected Goals Scored&quot;</span>, <span class="at">y=</span><span class="st">&quot;Actual Goals Scored&quot;</span>,<span class="at">title=</span><span class="st">&quot;NHL Teams: Expected vs. Actual Goals, 2021-22&quot;</span>) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_abline</span>(<span class="at">intercept=</span><span class="dv">0</span>, <span class="at">slope=</span><span class="dv">1</span>, <span class="at">color=</span><span class="st">&quot;red&quot;</span>, <span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p><em>Note: A slope of 0 and an intercept of 1 are actually the default parameters for the function.</em></p>
<p>Q: What does it mean for a team’s data point to fall below this line? Above it?</p>
<p>A: If the data point is below the line, it means the expected goals were greater than the actual goals; if the data point is above the line, it means the actual goals were greater than the expected goals.</p>
<p>Q: Do you think that a team’s expected goals would be more likely to be closer to its actual goals for a ten-game stretch, an entire season, or five consecutive seasons? Why?</p>
<!-- Question could be reworded/clarified to mean "closer" in a relative (ratio) sense, rather than an absolute sense. -->
<p>A: We would expect that as sample size increases, the result would become closer to expectation. So, actual goals would be most likely closer to expected goals over a span of five seasons.</p>
<!--- This is basically conceptualizing the LLN, but that would rely on this calculation of expected goals being an unbiased estimator of actual goals. -->
</div>
<div id="goalie-statistics" class="section level3" number="1.7.4">
<h3><span class="header-section-number">1.7.4</span> Goalie Statistics</h3>
<div class="example">
<p><span id="exm:unlabeled-div-38" class="example"><strong>Example 1.14  </strong></span>For this next example, let’s use goalie data from the 2021-2022 season from <a href="https://www.naturalstattrick.com/">Natural Stat Trick</a>.</p>
</div>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="1.7-hockey.html#cb94-1" aria-hidden="true" tabindex="-1"></a>goalie_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/GoalieTotals_NaturalStatTrick.csv&quot;</span>)</span>
<span id="cb94-2"><a href="1.7-hockey.html#cb94-2" aria-hidden="true" tabindex="-1"></a>goalie_data <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">12</span>) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="sc">-</span>TOI) <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">kt</span>()</span></code></pre></div>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Player
</th>
<th style="text-align:center;">
Team
</th>
<th style="text-align:center;">
GP
</th>
<th style="text-align:center;">
TOI
</th>
<th style="text-align:center;">
Shots.Against
</th>
<th style="text-align:center;">
Saves
</th>
<th style="text-align:center;">
Goals.Against
</th>
<th style="text-align:center;">
xG.Against
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Juuse Saros
</td>
<td style="text-align:center;">
NSH
</td>
<td style="text-align:center;">
67
</td>
<td style="text-align:center;">
3931.383
</td>
<td style="text-align:center;">
2107
</td>
<td style="text-align:center;">
1934
</td>
<td style="text-align:center;">
173
</td>
<td style="text-align:center;">
180.69
</td>
</tr>
<tr>
<td style="text-align:left;">
Connor Hellebuyck
</td>
<td style="text-align:center;">
WPG
</td>
<td style="text-align:center;">
66
</td>
<td style="text-align:center;">
3903.500
</td>
<td style="text-align:center;">
2155
</td>
<td style="text-align:center;">
1962
</td>
<td style="text-align:center;">
193
</td>
<td style="text-align:center;">
199.26
</td>
</tr>
<tr>
<td style="text-align:left;">
Andrei Vasilevskiy
</td>
<td style="text-align:center;">
T.B
</td>
<td style="text-align:center;">
63
</td>
<td style="text-align:center;">
3760.750
</td>
<td style="text-align:center;">
1869
</td>
<td style="text-align:center;">
1713
</td>
<td style="text-align:center;">
156
</td>
<td style="text-align:center;">
165.89
</td>
</tr>
<tr>
<td style="text-align:left;">
Thatcher Demko
</td>
<td style="text-align:center;">
VAN
</td>
<td style="text-align:center;">
64
</td>
<td style="text-align:center;">
3699.550
</td>
<td style="text-align:center;">
1967
</td>
<td style="text-align:center;">
1799
</td>
<td style="text-align:center;">
168
</td>
<td style="text-align:center;">
173.26
</td>
</tr>
<tr>
<td style="text-align:left;">
Jacob Markstrom
</td>
<td style="text-align:center;">
CGY
</td>
<td style="text-align:center;">
63
</td>
<td style="text-align:center;">
3695.833
</td>
<td style="text-align:center;">
1754
</td>
<td style="text-align:center;">
1617
</td>
<td style="text-align:center;">
137
</td>
<td style="text-align:center;">
152.26
</td>
</tr>
<tr>
<td style="text-align:left;">
Tristan Jarry
</td>
<td style="text-align:center;">
PIT
</td>
<td style="text-align:center;">
58
</td>
<td style="text-align:center;">
3414.717
</td>
<td style="text-align:center;">
1711
</td>
<td style="text-align:center;">
1573
</td>
<td style="text-align:center;">
138
</td>
<td style="text-align:center;">
143.92
</td>
</tr>
<tr>
<td style="text-align:left;">
Elvis Merzlikins
</td>
<td style="text-align:center;">
CBJ
</td>
<td style="text-align:center;">
59
</td>
<td style="text-align:center;">
3320.400
</td>
<td style="text-align:center;">
1922
</td>
<td style="text-align:center;">
1744
</td>
<td style="text-align:center;">
178
</td>
<td style="text-align:center;">
164.94
</td>
</tr>
<tr>
<td style="text-align:left;">
Marc-Andre Fleury
</td>
<td style="text-align:center;">
CHI, MIN
</td>
<td style="text-align:center;">
56
</td>
<td style="text-align:center;">
3284.867
</td>
<td style="text-align:center;">
1732
</td>
<td style="text-align:center;">
1573
</td>
<td style="text-align:center;">
159
</td>
<td style="text-align:center;">
148.00
</td>
</tr>
<tr>
<td style="text-align:left;">
Darcy Kuemper
</td>
<td style="text-align:center;">
COL
</td>
<td style="text-align:center;">
57
</td>
<td style="text-align:center;">
3258.117
</td>
<td style="text-align:center;">
1755
</td>
<td style="text-align:center;">
1617
</td>
<td style="text-align:center;">
138
</td>
<td style="text-align:center;">
154.23
</td>
</tr>
<tr>
<td style="text-align:left;">
John Gibson
</td>
<td style="text-align:center;">
ANA
</td>
<td style="text-align:center;">
56
</td>
<td style="text-align:center;">
3235.583
</td>
<td style="text-align:center;">
1789
</td>
<td style="text-align:center;">
1617
</td>
<td style="text-align:center;">
172
</td>
<td style="text-align:center;">
163.53
</td>
</tr>
</tbody>
</table>
<p>The dataset includes 119 goalies, but many of them didn’t play very much. We can subset the data to include only goaltenders that faced at least 500 shots.</p>
<p>Which player among qualified goalies had the best goals against average? On which team did he play, and what was his GAA?</p>
<p>Which goalie had the most playing time? What was his team, and how much time did he spend on the ice?</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="1.7-hockey.html#cb95-1" aria-hidden="true" tabindex="-1"></a>filtered_goalie_data <span class="ot">&lt;-</span> <span class="fu">filter</span>(goalie_data, Shots.Against <span class="sc">&gt;=</span> <span class="dv">500</span>)</span>
<span id="cb95-2"><a href="1.7-hockey.html#cb95-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-3"><a href="1.7-hockey.html#cb95-3" aria-hidden="true" tabindex="-1"></a>filtered_goalie_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(GAA <span class="sc">==</span> <span class="fu">min</span>(GAA)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(Player, Team, GAA) <span class="sc">%&gt;%</span> <span class="fu">kt</span>()</span></code></pre></div>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Player
</th>
<th style="text-align:center;">
Team
</th>
<th style="text-align:center;">
GAA
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Igor Shesterkin
</td>
<td style="text-align:center;">
NYR
</td>
<td style="text-align:center;">
2.07
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="1.7-hockey.html#cb96-1" aria-hidden="true" tabindex="-1"></a>filtered_goalie_data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(TOI <span class="sc">==</span> <span class="fu">max</span>(TOI)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(Player, Team, TOI) <span class="sc">%&gt;%</span> <span class="fu">kt</span>()</span></code></pre></div>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Player
</th>
<th style="text-align:center;">
Team
</th>
<th style="text-align:center;">
TOI
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Juuse Saros
</td>
<td style="text-align:center;">
NSH
</td>
<td style="text-align:center;">
3931.383
</td>
</tr>
</tbody>
</table>
<p>The following plot compares save percentage to the number of shots on goal faced for the qualified goalies. The dashed horizontal line is placed at the average shots on goal faced among qualified players, and the dashed vertical line is placed at the average save percentage among qualified players.</p>
<p><img src="textbook_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<p>Q: Which quadrant of the graph represents goalies that faced a higher than average number of shots, but had a below-average save percentage?</p>
<p>A: The second (upper left) quadrant.</p>
<p>Q: Which quadrant represents goalies that had a high save percentage and faced a high volume of shots?</p>
<p>A: The first (upper right) quadrant.</p>
</div>
<div id="correlation-plots" class="section level3" number="1.7.5">
<h3><span class="header-section-number">1.7.5</span> Correlation Plots</h3>
<p>When analyzing sports data, there may be many circumstances where statisticians consider which of several variables are most highly correlated to an outcome variable of interest. In this case, it can be useful to use a correlation plot (also known as a correlation matrix or correlogram). Tidyverse and related packages provide many options for creating correlation plots.</p>
<p>Suppose a statistician has recently learned about some advanced hockey statistics and is interested in researching which stat has the highest correlation with goals scored. The statistician wants to compare team shots on goal, CORSI, and Fenwick to observe the association with goals scored for NHL teams.</p>
<div class="example">
<p><span id="exm:unlabeled-div-39" class="example"><strong>Example 1.15  </strong></span>The following plot uses the same 2021-2022 data from Moneypuck.com; it gives the pairwise scatterplots and correlation values for each of the variables, as well as smoothed plots of each individual variable along the diagonals.</p>
</div>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="1.7-hockey.html#cb97-1" aria-hidden="true" tabindex="-1"></a>goal_stats <span class="ot">&lt;-</span> nhl_data_all <span class="sc">%&gt;%</span> <span class="fu">select</span>(shotsOnGoalFor, corsiPercentage, fenwickPercentage, goalsFor)</span>
<span id="cb97-2"><a href="1.7-hockey.html#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(goal_stats, <span class="at">title=</span><span class="st">&quot;Correlation plot of goals and relevant predictors, NHL 2021-22&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<p>Q: Which of the variables has the strongest correlation with goals scored?</p>
<p>A: CORSI percentage, r = .702.</p>
<p>In the article <a href="https://theathletic.com/121980/2017/10/09/an-advanced-stat-primer-understanding-basic-hockey-metrics/">“An advanced stat primer: Understanding basic hockey metrics”</a>, Charlie O’Connor states, “Generally speaking, Corsi is more predictive of future goal differential than Fenwick… however, Fenwick forms the basis for the most widely-used Expected Goals models.” Let’s use the same predictors in a correlation plot with Expected Goals percentage. Does Fenwick have the strongest correlation with xGoal percentage?</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="1.7-hockey.html#cb98-1" aria-hidden="true" tabindex="-1"></a>xGoal_stats <span class="ot">&lt;-</span> nhl_data_all <span class="sc">%&gt;%</span> <span class="fu">select</span>(shotsOnGoalFor, corsiPercentage, fenwickPercentage, xGoalsPercentage)</span>
<span id="cb98-2"><a href="1.7-hockey.html#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(xGoal_stats, <span class="at">title=</span><span class="st">&quot;Correlation plot of expected goals and relevant predictors, NHL 2021-22&quot;</span>)</span></code></pre></div>
<p><img src="textbook_files/figure-html/hockey%20ggplot%206-1.png" width="672" /></p>
<div style="page-break-after: always;"></div>
</div>
</div>
<p style="text-align: center;">
<a href="1.6-basketball.html"><button class="btn btn-default">Previous</button></a>
<a href="1.8-volleyball.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
